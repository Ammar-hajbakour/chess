import{a as h,e as j,h as W,n as N}from"./chunk-PRHRZYX4.js";import{B as _,C as d,H as a,K as V,M as k,N as u,O as C,P as H,Q as L,R as O,S as n,T as o,U as g,V as f,W as m,X as l,aa as M,ba as r,ca as G,da as y,ea as I,ga as x,ia as D,qa as F,sa as B,v,w as E}from"./chunk-FKIAD4CJ.js";import{a as T,b as P,d as w}from"./chunk-XRBH25AC.js";var b=t=>({selected:t}),R=t=>({copied:t});function $(t,s){if(t&1){let e=f();n(0,"div",4)(1,"small"),r(2,"Nick Name"),o(),n(3,"input",9,0),m("change",function(){_(e);let i=M(4),p=l(3);return d(p.user=i.value)}),o()()}}function J(t,s){if(t&1){let e=f();n(0,"button",5),m("click",function(){let i=_(e).$implicit,p=l(4);return d(p.currenStockfishLevel=i)}),r(1),o()}if(t&2){let e=s.$implicit,c=l(4);u("ngClass",x(2,b,e===c.currenStockfishLevel)),a(),y(" ",e," ")}}function z(t,s){if(t&1&&(n(0,"div",4)(1,"small"),r(2,"Level"),o(),L(3,J,2,4,"button",10,H),o()),t&2){let e=l(3);a(3),O(e.stockfishLevel)}}function A(t,s){if(t&1){let e=f();n(0,"div",3),g(1,"img",1),k(2,$,5,0,"div",4)(3,z,5,0,"div",4),n(4,"div",4)(5,"small"),r(6,"Pieces Color"),o(),n(7,"button",5),m("click",function(){_(e);let i=l(2);return d(i.piecesColor="w")}),r(8," White "),o(),n(9,"button",5),m("click",function(){_(e);let i=l(2);return d(i.piecesColor="b")}),r(10," Black "),o()(),n(11,"button",6),m("click",function(){_(e);let i=l(2);return d(i.startGame())}),r(12),o(),n(13,"span",7),m("click",function(){_(e);let i=l(2);return d(i.optionsDialogState="close")}),r(14," \xD7 "),o(),n(15,"small",8),r(16),o()()}if(t&2){let e=l(2);a(2),C(2,e.gameType()==="friend"?2:-1),a(),C(3,e.gameType()==="stockfish"?3:-1),a(4),u("ngClass",x(7,b,e.piecesColor==="w")),a(2),u("ngClass",x(9,b,e.piecesColor==="b")),a(3),y(" ",e.gameType()==="friend"?"Create Game":"Start Game"," "),a(3),u("hidden",!e.validationError),a(),G(e.validationError==null?null:e.validationError.message)}}function U(t,s){if(t&1){let e=f();n(0,"div",3),g(1,"img",1),n(2,"div",4)(3,"small"),r(4,"Game Link You Can Share"),o(),g(5,"input",11),o(),n(6,"div",12)(7,"button",5),m("click",function(){_(e);let i=l(2);return d(i.copyLink())}),r(8),o(),n(9,"button",2),m("click",function(){_(e);let i=l(2);return d(i.joinGame())}),r(10,"Join Game"),o()()()}if(t&2){let e=l(2);a(5),u("value",e.gameLink),a(2),u("ngClass",x(3,R,e.isCopied)),a(),y(" ",e.isCopied?"Copied !":"Copy Link"," ")}}function Y(t,s){if(t&1&&k(0,A,17,11,"div",3)(1,U,11,5),t&2){let e=l();C(0,e.gameId===void 0?0:1)}}var oe=(()=>{let s=class s{constructor(){this.router=v(F),this.chessBoardService=v(N),this.firebase=v(W),this.options={whitePlayer:"guest",color:h.White,level:null,type:"local",allowSelectingOtherPlayerPieces:!0},this.gameType=V("local"),this.piecesColor="w",this.stockfishLevel=[1,2,3,4,5],this.currenStockfishLevel=1,this.optionsDialogState="close",this.user="",this.gameId=void 0,this.gameLink=void 0,this.isCopied=!1,this.validationError=null}startGame(){return w(this,null,function*(){switch(this.gameType()){case"friend":this.options.type="friend",this.options.color=this.piecesColor==="w"?h.White:h.Black,this.options.whitePlayer=this.piecesColor==="w"?this.user:"guest",this.options.allowSelectingOtherPlayerPieces=!1;break;case"stockfish":this.options.type="stockfish",this.options.color=this.piecesColor==="w"?h.White:h.Black,this.options.level=this.currenStockfishLevel,this.options.whitePlayer=this.piecesColor==="w"?"guest":"stockfish",this.options.allowSelectingOtherPlayerPieces=!1;break;default:this.options.allowSelectingOtherPlayerPieces=!0;break}if(this.options){if(this.options.type!=="friend"){this.router.navigate(["/game"],{state:{options:this.options}});return}if(this.user.length<3||this.user.length>20||this.user==="guest"){this.validationError={message:"Invalid nickname, it should be between 3 and 20 characters."};return}localStorage.setItem("USER",this.user),yield this.createGame()}})}createGame(){return w(this,null,function*(){let c=P(T({},this.options),{moves:[],status:j.Active,winner:null,gameOverMessage:null});this.gameId=yield this.firebase.createGame(c),this.gameLink=window.location.origin+`/chess/game/${this.gameId}`})}joinGame(){this.router.navigate(["/game",this.gameId])}copyLink(){this.gameLink&&(navigator.clipboard.writeText(this.gameLink),this.isCopied=!0,setTimeout(()=>{this.isCopied=!1},2e3))}};s.\u0275fac=function(i){return new(i||s)},s.\u0275cmp=E({type:s,selectors:[["app-home"]],standalone:!0,features:[I],decls:9,vars:1,consts:[["nikname",""],["src","assets/intro.png","alt","chess"],[1,"chess-btn",3,"click"],[1,"dialog"],[1,"actions"],[1,"chess-btn",3,"click","ngClass"],["type","submit",1,"chess-btn","play",3,"click"],[1,"close-dialog",3,"click"],[1,"error",3,"hidden"],["type","text","placeholder","John Doe",3,"change"],[1,"chess-btn",3,"ngClass"],["type","text",2,"min-width","350px","max-width","90%",3,"value"],[1,"flex"]],template:function(i,p){i&1&&(g(0,"img",1),n(1,"nav")(2,"button",2),m("click",function(){return p.gameType.set("local"),p.startGame()}),r(3," Local Game "),o(),n(4,"button",2),m("click",function(){return p.optionsDialogState="open",p.gameType.set("stockfish")}),r(5," Play against a computer "),o(),n(6,"button",2),m("click",function(){return p.optionsDialogState="open",p.gameType.set("friend")}),r(7," Play against a friend "),o()(),k(8,Y,2,1)),i&2&&(a(8),C(8,p.optionsDialogState==="open"?8:-1))},dependencies:[B,D],styles:["[_nghost-%COMP%]{height:100vh;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;padding-block:1rem;gap:1rem}[_nghost-%COMP%]   nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:250px;display:block;padding-block:1rem}[_nghost-%COMP%]   nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-bottom:1rem}.play[_ngcontent-%COMP%]{min-width:150px}.flex[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;justify-content:center;align-items:center;gap:1rem}.copied[_ngcontent-%COMP%]{background-color:var(--primary-color)}input[type=text].error[_ngcontent-%COMP%]{border:1px solid var(--primary-color)}small.error[_ngcontent-%COMP%]{color:var(--primary-color);font-size:.6rem;display:inline-block;width:300px;height:25px}"]});let t=s;return t})();export{oe as HomeComponent};
