import{$ as Qt,A as rg,B as ig,C as ze,D as Yt,E as ps,F as Di,H as og,I as sg,J as S,K as ke,L as ue,M as dl,N as ag,O as Ei,P as Me,Q as kt,R as gs,S as fl,T as cg,U as or,V as Ci,W as hl,X as lg,Z as pl,_ as ug,a as D,aa as Ae,b as re,d as Oe,e as qp,f as ds,g as Yp,h as Qp,i as g,j as ir,k as fs,l as Kp,m as Zp,n as Xp,o as fe,p as Jp,r as ul,s as eg,t as wt,v as tg,x as ng,y as hs,z as le}from"./chunk-XRBH25AC.js";function sr(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var nt=sr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function b(t){return typeof t=="function"}var ms=sr(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Tn(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var se=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(b(r))try{r()}catch(o){e=o instanceof ms?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{dg(o)}catch(s){e=e??[],s instanceof ms?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ms(e)}}add(e){var n;if(e&&e!==this)if(this.closed)dg(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Tn(n,e)}remove(e){let{_finalizers:n}=this;n&&Tn(n,e),e instanceof t&&e._removeParent(this)}};se.EMPTY=(()=>{let t=new se;return t.closed=!0,t})();var gl=se.EMPTY;function vs(t){return t instanceof se||t&&"closed"in t&&b(t.remove)&&b(t.add)&&b(t.unsubscribe)}function dg(t){b(t)?t():t.unsubscribe()}var rt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ar={setTimeout(t,e,...n){let{delegate:r}=ar;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ar;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ys(t){ar.setTimeout(()=>{let{onUnhandledError:e}=rt;if(e)e(t);else throw t})}function Sn(){}var fg=ml("C",void 0,void 0);function hg(t){return ml("E",void 0,t)}function pg(t){return ml("N",t,void 0)}function ml(t,e,n){return{kind:t,value:e,error:n}}var Mn=null;function cr(t){if(rt.useDeprecatedSynchronousErrorHandling){let e=!Mn;if(e&&(Mn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Mn;if(Mn=null,n)throw r}}else t()}function gg(t){rt.useDeprecatedSynchronousErrorHandling&&Mn&&(Mn.errorThrown=!0,Mn.error=t)}var An=class extends se{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,vs(e)&&e.add(this)):this.destination=$E}static create(e,n,r){return new it(e,n,r)}next(e){this.isStopped?yl(pg(e),this):this._next(e)}error(e){this.isStopped?yl(hg(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?yl(fg,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},UE=Function.prototype.bind;function vl(t,e){return UE.call(t,e)}var _l=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){_s(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){_s(r)}else _s(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){_s(n)}}},it=class extends An{constructor(e,n,r){super();let i;if(b(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&rt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&vl(e.next,o),error:e.error&&vl(e.error,o),complete:e.complete&&vl(e.complete,o)}):i=e}this.destination=new _l(i)}};function _s(t){rt.useDeprecatedSynchronousErrorHandling?gg(t):ys(t)}function BE(t){throw t}function yl(t,e){let{onStoppedNotification:n}=rt;n&&ar.setTimeout(()=>n(t,e))}var $E={closed:!0,next:Sn,error:BE,complete:Sn};function HE(t,e){let n=typeof e=="object";return new Promise((r,i)=>{let o=new it({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{n?r(e.defaultValue):i(new nt)}});t.subscribe(o)})}var lr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ve(t){return t}function wl(...t){return Dl(t)}function Dl(t){return t.length===0?ve:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var F=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=zE(n)?n:new it(n,r,i);return cr(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=mg(r),new r((i,o)=>{let s=new it({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[lr](){return this}pipe(...n){return Dl(n)(this)}toPromise(n){return n=mg(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function mg(t){var e;return(e=t??rt.Promise)!==null&&e!==void 0?e:Promise}function WE(t){return t&&b(t.next)&&b(t.error)&&b(t.complete)}function zE(t){return t&&t instanceof An||WE(t)&&vs(t)}function El(t){return b(t?.lift)}function x(t){return e=>{if(El(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function R(t,e,n,r,i){return new Cl(t,e,n,r,i)}var Cl=class extends An{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ur(){return x((t,e)=>{let n=null;t._refCount++;let r=R(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var dr=class extends F{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,El(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new se;let n=this.getSubject();e.add(this.source.subscribe(R(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=se.EMPTY)}return e}refCount(){return ur()(this)}};var vg=sr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=(()=>{class t extends F{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ws(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new vg}next(n){cr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){cr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){cr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?gl:(this.currentObservers=null,o.push(n),new se(()=>{this.currentObservers=null,Tn(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new F;return n.source=this,n}}return t.create=(e,n)=>new ws(e,n),t})(),ws=class extends ae{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:gl}};var ye=class extends ae{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ii={now(){return(Ii.delegate||Date).now()},delegate:void 0};var Ds=class extends ae{constructor(e=1/0,n=1/0,r=Ii){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Es=class extends se{constructor(e,n){super()}schedule(e,n=0){return this}};var bi={setInterval(t,e,...n){let{delegate:r}=bi;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=bi;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var fr=class extends Es{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return bi.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&bi.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Tn(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var hr=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};hr.now=Ii.now;var pr=class extends hr{constructor(e,n=hr.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Ti=new pr(fr);var Cs=class extends fr{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Is=class extends pr{};var Il=new Is(Cs);var xe=new F(t=>t.complete());function yg(t){return t&&b(t.schedule)}function bl(t){return t[t.length-1]}function bs(t){return b(bl(t))?t.pop():void 0}function Dt(t){return yg(bl(t))?t.pop():void 0}function _g(t,e){return typeof bl(t)=="number"?t.pop():e}var gr=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ts(t){return b(t?.then)}function Ss(t){return b(t[lr])}function Ms(t){return Symbol.asyncIterator&&b(t?.[Symbol.asyncIterator])}function As(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function GE(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var xs=GE();function Ns(t){return b(t?.[xs])}function Rs(t){return Yp(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ds(n.read());if(i)return yield ds(void 0);yield yield ds(r)}}finally{n.releaseLock()}})}function Ps(t){return b(t?.getReader)}function Z(t){if(t instanceof F)return t;if(t!=null){if(Ss(t))return qE(t);if(gr(t))return YE(t);if(Ts(t))return QE(t);if(Ms(t))return wg(t);if(Ns(t))return KE(t);if(Ps(t))return ZE(t)}throw As(t)}function qE(t){return new F(e=>{let n=t[lr]();if(b(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function YE(t){return new F(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function QE(t){return new F(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ys)})}function KE(t){return new F(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function wg(t){return new F(e=>{XE(t,e).catch(n=>e.error(n))})}function ZE(t){return wg(Rs(t))}function XE(t,e){var n,r,i,o;return qp(this,void 0,void 0,function*(){try{for(n=Qp(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Fe(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Ge(t,e=0){return x((n,r)=>{n.subscribe(R(r,i=>Fe(r,t,()=>r.next(i),e),()=>Fe(r,t,()=>r.complete(),e),i=>Fe(r,t,()=>r.error(i),e)))})}function ot(t,e=0){return x((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Dg(t,e){return Z(t).pipe(ot(e),Ge(e))}function Eg(t,e){return Z(t).pipe(ot(e),Ge(e))}function Cg(t,e){return new F(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Ig(t,e){return new F(n=>{let r;return Fe(n,e,()=>{r=t[xs](),Fe(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>b(r?.return)&&r.return()})}function Os(t,e){if(!t)throw new Error("Iterable cannot be null");return new F(n=>{Fe(n,e,()=>{let r=t[Symbol.asyncIterator]();Fe(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function bg(t,e){return Os(Rs(t),e)}function Tg(t,e){if(t!=null){if(Ss(t))return Dg(t,e);if(gr(t))return Cg(t,e);if(Ts(t))return Eg(t,e);if(Ms(t))return Os(t,e);if(Ns(t))return Ig(t,e);if(Ps(t))return bg(t,e)}throw As(t)}function K(t,e){return e?Tg(t,e):Z(t)}function I(...t){let e=Dt(t);return K(t,e)}function mr(t,e){let n=b(t)?t:()=>t,r=i=>i.error(n());return new F(e?i=>e.schedule(r,0,i):r)}function Tl(t){return!!t&&(t instanceof F||b(t.lift)&&b(t.subscribe))}function T(t,e){return x((n,r)=>{let i=0;n.subscribe(R(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:JE}=Array;function eC(t,e){return JE(e)?t(...e):t(e)}function ks(t){return T(e=>eC(t,e))}var{isArray:tC}=Array,{getPrototypeOf:nC,prototype:rC,keys:iC}=Object;function Sg(t){if(t.length===1){let e=t[0];if(tC(e))return{args:e,keys:null};if(oC(e)){let n=iC(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function oC(t){return t&&typeof t=="object"&&nC(t)===rC}function Mg(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Si(...t){let e=Dt(t),n=bs(t),{args:r,keys:i}=Sg(t);if(r.length===0)return K([],e);let o=new F(sC(r,e,i?s=>Mg(i,s):ve));return n?o.pipe(ks(n)):o}function sC(t,e,n=ve){return r=>{Ag(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)Ag(e,()=>{let l=K(t[c],e),u=!1;l.subscribe(R(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Ag(t,e,n){t?Fe(n,t,e):e()}function xg(t,e,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&e.complete()},h=m=>l<r?p(m):c.push(m),p=m=>{o&&e.next(m),l++;let _=!1;Z(n(m,u++)).subscribe(R(e,w=>{i?.(w),o?h(w):e.next(w)},()=>{_=!0},void 0,()=>{if(_)try{for(l--;c.length&&l<r;){let w=c.shift();s?Fe(e,s,()=>p(w)):p(w)}f()}catch(w){e.error(w)}}))};return t.subscribe(R(e,h,()=>{d=!0,f()})),()=>{a?.()}}function oe(t,e,n=1/0){return b(e)?oe((r,i)=>T((o,s)=>e(r,o,i,s))(Z(t(r,i))),n):(typeof e=="number"&&(n=e),x((r,i)=>xg(r,i,t,n)))}function Kt(t=1/0){return oe(ve,t)}function Ng(){return Kt(1)}function vr(...t){return Ng()(K(t,Dt(t)))}function Fs(t){return new F(e=>{Z(t()).subscribe(e)})}var aC=["addListener","removeListener"],cC=["addEventListener","removeEventListener"],lC=["on","off"];function Sl(t,e,n,r){if(b(n)&&(r=n,n=void 0),r)return Sl(t,e,n).pipe(ks(r));let[i,o]=fC(t)?cC.map(s=>a=>t[s](e,a,n)):uC(t)?aC.map(Rg(t,e)):dC(t)?lC.map(Rg(t,e)):[];if(!i&&gr(t))return oe(s=>Sl(s,e,n))(Z(t));if(!i)throw new TypeError("Invalid event target");return new F(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return i(a),()=>o(a)})}function Rg(t,e){return n=>r=>t[n](e,r)}function uC(t){return b(t.addListener)&&b(t.removeListener)}function dC(t){return b(t.on)&&b(t.off)}function fC(t){return b(t.addEventListener)&&b(t.removeEventListener)}function yr(...t){let e=Dt(t),n=_g(t,1/0),r=t;return r.length?r.length===1?Z(r[0]):Kt(n)(K(r,e)):xe}function _e(t,e){return x((n,r)=>{let i=0;n.subscribe(R(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Zt(t){return x((e,n)=>{let r=null,i=!1,o;r=e.subscribe(R(n,void 0,void 0,s=>{o=Z(t(s,Zt(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Pg(t,e,n,r,i){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(R(s,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Ft(t,e){return b(e)?oe(t,e,1):oe(t,1)}function Xt(t){return x((e,n)=>{let r=!1;e.subscribe(R(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Lt(t){return t<=0?()=>xe:x((e,n)=>{let r=0;e.subscribe(R(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Ml(t){return T(()=>t)}function Al(t,e=ve){return t=t??hC,x((n,r)=>{let i,o=!0;n.subscribe(R(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function hC(t,e){return t===e}function Ls(t=pC){return x((e,n)=>{let r=!1;e.subscribe(R(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function pC(){return new nt}function xn(t){return x((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function qe(t,e){let n=arguments.length>=2;return r=>r.pipe(t?_e((i,o)=>t(i,o,r)):ve,Lt(1),n?Xt(e):Ls(()=>new nt))}function _r(t){return t<=0?()=>xe:x((e,n)=>{let r=[];e.subscribe(R(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function xl(t,e){let n=arguments.length>=2;return r=>r.pipe(t?_e((i,o)=>t(i,o,r)):ve,_r(1),n?Xt(e):Ls(()=>new nt))}function gC(){return x((t,e)=>{let n,r=!1;t.subscribe(R(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function wr(t,e){return x(Pg(t,e,arguments.length>=2,!0))}function Mi(t={}){let{connector:e=()=>new ae,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,c,l=0,u=!1,d=!1,f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),s=c=void 0,u=d=!1},p=()=>{let m=s;h(),m?.unsubscribe()};return x((m,_)=>{l++,!d&&!u&&f();let w=c=c??e();_.add(()=>{l--,l===0&&!d&&!u&&(a=Nl(p,i))}),w.subscribe(_),!s&&l>0&&(s=new it({next:H=>w.next(H),error:H=>{d=!0,f(),a=Nl(h,n,H),w.error(H)},complete:()=>{u=!0,f(),a=Nl(h,r),w.complete()}}),Z(m).subscribe(s))})(o)}}function Nl(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new it({next:()=>{r.unsubscribe(),t()}});return Z(e(...n)).subscribe(r)}function js(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,Mi({connector:()=>new Ds(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Rl(t){return x((e,n)=>{let r=!1,i=0;e.subscribe(R(n,o=>(r||(r=!t(o,i++)))&&n.next(o)))})}function Pl(...t){let e=Dt(t);return x((n,r)=>{(e?vr(t,n,e):vr(t,n)).subscribe(r)})}function X(t,e){return x((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(R(r,c=>{i?.unsubscribe();let l=0,u=o++;Z(t(c,u)).subscribe(i=R(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Vs(t,e){return b(e)?X(()=>t,e):X(()=>t)}function Ol(t){return x((e,n)=>{Z(t).subscribe(R(n,()=>n.complete(),Sn)),!n.closed&&e.subscribe(n)})}function ce(t,e,n){let r=b(t)||e||n?{next:t,error:e,complete:n}:t;return r?x((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(R(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):ve}function kl(...t){let e=bs(t);return x((n,r)=>{let i=t.length,o=new Array(i),s=t.map(()=>!1),a=!1;for(let c=0;c<i;c++)Z(t[c]).subscribe(R(r,l=>{o[c]=l,!a&&!s[c]&&(s[c]=!0,(a=s.every(ve))&&(s=null))},Sn));n.subscribe(R(r,c=>{if(a){let l=[c,...o];r.next(e?e(...l):l)}}))})}function mC(t,e){return Object.is(t,e)}var he=null,Us=!1,Bs=1,Er=Symbol("SIGNAL");function W(t){let e=he;return he=t,e}var Fl={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Og(t){if(Us)throw new Error("");if(he===null)return;he.consumerOnSignalRead(t);let e=he.nextProducerIndex++;if(Dr(he),e<he.producerNode.length&&he.producerNode[e]!==t&&Ai(he)){let n=he.producerNode[e];$s(n,he.producerIndexOfThis[e])}he.producerNode[e]!==t&&(he.producerNode[e]=t,he.producerIndexOfThis[e]=Ai(he)?Ug(t,he,e):0),he.producerLastReadVersion[e]=t.version}function vC(){Bs++}function yC(t){if(!(Ai(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Bs)){if(!t.producerMustRecompute(t)&&!Ll(t)){t.dirty=!1,t.lastCleanEpoch=Bs;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Bs}}function kg(t){if(t.liveConsumerNode===void 0)return;let e=Us;Us=!0;try{for(let n of t.liveConsumerNode)n.dirty||_C(n)}finally{Us=e}}function Fg(){return he?.consumerAllowSignalWrites!==!1}function _C(t){t.dirty=!0,kg(t),t.consumerMarkedDirty?.(t)}function Lg(t){return t&&(t.nextProducerIndex=0),W(t)}function jg(t,e){if(W(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Ai(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)$s(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ll(t){Dr(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(yC(n),r!==n.version))return!0}return!1}function Vg(t){if(Dr(t),Ai(t))for(let e=0;e<t.producerNode.length;e++)$s(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Ug(t,e,n){if(Bg(t),Dr(t),t.liveConsumerNode.length===0)for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=Ug(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function $s(t,e){if(Bg(t),Dr(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)$s(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Dr(i),i.producerIndexOfThis[r]=e}}function Ai(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Dr(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Bg(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function wC(){throw new Error}var $g=wC;function Hg(){$g()}function Wg(t){$g=t}var DC=null;function zg(t){let e=Object.create(qg);e.value=t;let n=()=>(Og(e),e.value);return n[Er]=e,n}function jl(t,e){Fg()||Hg(),t.equal(t.value,e)||(t.value=e,EC(t))}function Gg(t,e){Fg()||Hg(),jl(t,e(t.value))}var qg=re(D({},Fl),{equal:mC,value:void 0});function EC(t){t.version++,vC(),kg(t),DC?.()}var Sm="https://g.co/ng/security#xss",M=class extends Error{constructor(e,n){super(pa(e,n)),this.code=e}};function pa(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function qi(t){return{toString:t}.toString()}var Hs="__parameters__";function CC(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Mm(t,e,n){return qi(()=>{let r=CC(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(Hs)?c[Hs]:Object.defineProperty(c,Hs,{value:[]})[Hs];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var xi=globalThis;function J(t){for(let e in t)if(t[e]===J)return e;throw Error("Could not find renamed property on target object.")}function IC(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function je(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(je).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Yg(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var bC=J({__forward_ref__:J});function Am(t){return t.__forward_ref__=Am,t.toString=function(){return je(this())},t}function Qe(t){return xm(t)?t():t}function xm(t){return typeof t=="function"&&t.hasOwnProperty(bC)&&t.__forward_ref__===Am}function C(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function dt(t){return{providers:t.providers||[],imports:t.imports||[]}}function ga(t){return Qg(t,Rm)||Qg(t,Pm)}function Nm(t){return ga(t)!==null}function Qg(t,e){return t.hasOwnProperty(e)?t[e]:null}function TC(t){let e=t&&(t[Rm]||t[Pm]);return e||null}function Kg(t){return t&&(t.hasOwnProperty(Zg)||t.hasOwnProperty(SC))?t[Zg]:null}var Rm=J({\u0275prov:J}),Zg=J({\u0275inj:J}),Pm=J({ngInjectableDef:J}),SC=J({ngInjectorDef:J}),E=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=C({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Om(t){return t&&!!t.\u0275providers}var MC=J({\u0275cmp:J}),AC=J({\u0275dir:J}),xC=J({\u0275pipe:J}),NC=J({\u0275mod:J}),Zs=J({\u0275fac:J}),Ni=J({__NG_ELEMENT_ID__:J}),Xg=J({__NG_ENV_ID__:J});function Wu(t){return typeof t=="string"?t:t==null?"":String(t)}function RC(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Wu(t)}function PC(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new M(-200,t)}function zu(t,e){throw new M(-201,!1)}var V=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(V||{}),Kl;function km(){return Kl}function Ye(t){let e=Kl;return Kl=t,e}function Fm(t,e,n){let r=ga(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&V.Optional)return null;if(e!==void 0)return e;zu(t,"Injector")}var OC={},Ri=OC,Zl="__NG_DI_FLAG__",Xs="ngTempTokenPath",kC="ngTokenPath",FC=/\n/gm,LC="\u0275",Jg="__source",Sr;function jC(){return Sr}function Jt(t){let e=Sr;return Sr=t,e}function VC(t,e=V.Default){if(Sr===void 0)throw new M(-203,!1);return Sr===null?Fm(t,void 0,e):Sr.get(t,e&V.Optional?null:void 0,e)}function v(t,e=V.Default){return(km()||VC)(Qe(t),e)}function y(t,e=V.Default){return v(t,ma(e))}function ma(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Xl(t){let e=[];for(let n=0;n<t.length;n++){let r=Qe(t[n]);if(Array.isArray(r)){if(r.length===0)throw new M(900,!1);let i,o=V.Default;for(let s=0;s<r.length;s++){let a=r[s],c=UC(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(v(i,o))}else e.push(v(r))}return e}function Lm(t,e){return t[Zl]=e,t.prototype[Zl]=e,t}function UC(t){return t[Zl]}function BC(t,e,n,r){let i=t[Xs];throw e[Jg]&&i.unshift(e[Jg]),t.message=$C(`
`+t.message,i,n,r),t[kC]=i,t[Xs]=null,t}function $C(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==LC?t.slice(2):t;let i=je(e);if(Array.isArray(e))i=e.map(je).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):je(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(FC,`
  `)}`}var Yi=Lm(Mm("Optional"),8);var jm=Lm(Mm("SkipSelf"),4);function Ar(t,e){let n=t.hasOwnProperty(Zs);return n?t[Zs]:null}function HC(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function WC(t){return t.flat(Number.POSITIVE_INFINITY)}function Gu(t,e){t.forEach(n=>Array.isArray(n)?Gu(n,e):e(n))}function Vm(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Js(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var xr={},at=[],Nr=new E(""),Um=new E("",-1),Bm=new E(""),ea=class{get(e,n=Ri){if(n===Ri){let r=new Error(`NullInjectorError: No provider for ${je(e)}!`);throw r.name="NullInjectorError",r}return n}},$m=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}($m||{}),It=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(It||{}),jt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(jt||{});function zC(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Jl(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];qC(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function GC(t){return t===3||t===4||t===6}function qC(t){return t.charCodeAt(0)===64}function Pi(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?em(t,n,i,null,e[++r]):em(t,n,i,null,null))}}return t}function em(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var Hm="ng-template";function YC(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&zC(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(qu(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function qu(t){return t.type===4&&t.value!==Hm}function QC(t,e,n){let r=t.type===4&&!n?Hm:t.value;return e===r}function KC(t,e,n){let r=4,i=t.attrs,o=i!==null?JC(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!st(r)&&!st(c))return!1;if(s&&st(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!QC(t,c,n)||c===""&&e.length===1){if(st(r))return!1;s=!0}}else if(r&8){if(i===null||!YC(t,i,c,n)){if(st(r))return!1;s=!0}}else{let l=e[++a],u=ZC(c,i,qu(t),n);if(u===-1){if(st(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(st(r))return!1;s=!0}}}}return st(r)||s}function st(t){return(t&1)===0}function ZC(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return eI(e,t)}function XC(t,e,n=!1){for(let r=0;r<e.length;r++)if(KC(t,e[r],n))return!0;return!1}function JC(t){for(let e=0;e<t.length;e++){let n=t[e];if(GC(n))return e}return t.length}function eI(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function tm(t,e){return t?":not("+e.trim()+")":e}function tI(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!st(s)&&(e+=tm(o,i),i=""),r=s,o=o||!st(r);n++}return i!==""&&(e+=tm(o,i)),e}function nI(t){return t.map(tI).join(",")}function rI(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!st(i))break;i=o}r++}return{attrs:e,classes:n}}function Wm(t){return qi(()=>{let e=Qm(t),n=re(D({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===$m.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||It.Emulated,styles:t.styles||at,_:null,schemas:t.schemas||null,tView:null,id:""});Km(n);let r=t.dependencies;return n.directiveDefs=rm(r,!1),n.pipeDefs=rm(r,!0),n.id=sI(n),n})}function iI(t){return tn(t)||zm(t)}function oI(t){return t!==null}function ft(t){return qi(()=>({type:t.type,bootstrap:t.bootstrap||at,declarations:t.declarations||at,imports:t.imports||at,exports:t.exports||at,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function nm(t,e){if(t==null)return xr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=jt.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==jt.None?[r,a]:r,e[o]=s):n[o]=r}return n}function va(t){return qi(()=>{let e=Qm(t);return Km(e),e})}function tn(t){return t[MC]||null}function zm(t){return t[AC]||null}function Gm(t){return t[xC]||null}function qm(t){let e=tn(t)||zm(t)||Gm(t);return e!==null?e.standalone:!1}function Ym(t,e){let n=t[NC]||null;if(!n&&e===!0)throw new Error(`Type ${je(t)} does not have '\u0275mod' property.`);return n}function Qm(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||xr,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||at,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:nm(t.inputs,e),outputs:nm(t.outputs),debugInfo:null}}function Km(t){t.features?.forEach(e=>e(t))}function rm(t,e){if(!t)return null;let n=e?Gm:iI;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(oI)}function sI(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Fr(t){return{\u0275providers:t}}function aI(...t){return{\u0275providers:Zm(!0,t),\u0275fromNgModule:!0}}function Zm(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Gu(e,s=>{let a=s;eu(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Xm(i,o),n}function Xm(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Yu(i,o=>{e(o,r)})}}function eu(t,e,n,r){if(t=Qe(t),!t)return!1;let i=null,o=Kg(t),s=!o&&tn(t);if(!o&&!s){let c=t.ngModule;if(o=Kg(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)eu(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Gu(o.imports,u=>{eu(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&Xm(l,e)}if(!a){let l=Ar(i)||(()=>new i);e({provide:i,useFactory:l,deps:at},i),e({provide:Bm,useValue:i,multi:!0},i),e({provide:Nr,useValue:()=>v(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;Yu(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Yu(t,e){for(let n of t)Om(n)&&(n=n.\u0275providers),Array.isArray(n)?Yu(n,e):e(n)}var cI=J({provide:String,useValue:J});function Jm(t){return t!==null&&typeof t=="object"&&cI in t}function lI(t){return!!(t&&t.useExisting)}function uI(t){return!!(t&&t.useFactory)}function tu(t){return typeof t=="function"}var ya=new E(""),zs={},dI={},Vl;function Qu(){return Vl===void 0&&(Vl=new ea),Vl}var Ce=class{},Oi=class extends Ce{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ru(e,s=>this.processProvider(s)),this.records.set(Um,Cr(void 0,this)),i.has("environment")&&this.records.set(Ce,Cr(void 0,this));let o=this.records.get(ya);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Bm,at,V.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=W(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),W(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Jt(this),r=Ye(void 0),i;try{return e()}finally{Jt(n),Ye(r)}}get(e,n=Ri,r=V.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Xg))return e[Xg](this);r=ma(r);let i,o=Jt(this),s=Ye(void 0);try{if(!(r&V.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=vI(e)&&ga(e);l&&this.injectableDefInScope(l)?c=Cr(nu(e),zs):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&V.Self?Qu():this.parent;return n=r&V.Optional&&n===Ri?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Xs]=a[Xs]||[]).unshift(je(e)),o)throw a;return BC(a,e,"R3InjectorError",this.source)}else throw a}finally{Ye(s),Jt(o)}}resolveInjectorInitializers(){let e=W(null),n=Jt(this),r=Ye(void 0),i;try{let o=this.get(Nr,at,V.Self);for(let s of o)s()}finally{Jt(n),Ye(r),W(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(je(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new M(205,!1)}processProvider(e){e=Qe(e);let n=tu(e)?e:Qe(e&&e.provide),r=hI(e);if(!tu(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Cr(void 0,zs,!0),i.factory=()=>Xl(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=W(null);try{return n.value===zs&&(n.value=dI,n.value=n.factory()),typeof n.value=="object"&&n.value&&mI(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{W(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Qe(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function nu(t){let e=ga(t),n=e!==null?e.factory:Ar(t);if(n!==null)return n;if(t instanceof E)throw new M(204,!1);if(t instanceof Function)return fI(t);throw new M(204,!1)}function fI(t){if(t.length>0)throw new M(204,!1);let n=TC(t);return n!==null?()=>n.factory(t):()=>new t}function hI(t){if(Jm(t))return Cr(void 0,t.useValue);{let e=pI(t);return Cr(e,zs)}}function pI(t,e,n){let r;if(tu(t)){let i=Qe(t);return Ar(i)||nu(i)}else if(Jm(t))r=()=>Qe(t.useValue);else if(uI(t))r=()=>t.useFactory(...Xl(t.deps||[]));else if(lI(t))r=()=>v(Qe(t.useExisting));else{let i=Qe(t&&(t.useClass||t.provide));if(gI(t))r=()=>new i(...Xl(t.deps));else return Ar(i)||nu(i)}return r}function Cr(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function gI(t){return!!t.deps}function mI(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function vI(t){return typeof t=="function"||typeof t=="object"&&t instanceof E}function ru(t,e){for(let n of t)Array.isArray(n)?ru(n,e):n&&Om(n)?ru(n.\u0275providers,e):e(n)}function ht(t,e){t instanceof Oi&&t.assertNotDestroyed();let n,r=Jt(t),i=Ye(void 0);try{return e()}finally{Jt(r),Ye(i)}}function ev(){return km()!==void 0||jC()!=null}function yI(t){if(!ev())throw new M(-203,!1)}function _I(t){return typeof t=="function"}var Ut=0,O=1,A=2,we=3,ct=4,pt=5,ki=6,Fi=7,De=8,Rr=9,lt=10,Ie=11,Li=12,im=13,Lr=14,ut=15,Qi=16,Ir=17,Vt=18,_a=19,tv=20,en=21,Ul=22,Pn=23,Ze=25,nv=1;var On=7,ta=8,Pr=9,Ee=10,Ku=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ku||{});function Nn(t){return Array.isArray(t)&&typeof t[nv]=="object"}function Bt(t){return Array.isArray(t)&&t[nv]===!0}function rv(t){return(t.flags&4)!==0}function wa(t){return t.componentOffset>-1}function Zu(t){return(t.flags&1)===1}function kn(t){return!!t.template}function wI(t){return(t[A]&512)!==0}var iu=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function iv(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Da(){return ov}function ov(t){return t.type.prototype.ngOnChanges&&(t.setInput=EI),DI}Da.ngInherit=!0;function DI(){let t=av(this),e=t?.current;if(e){let n=t.previous;if(n===xr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function EI(t,e,n,r,i){let o=this.declaredInputs[r],s=av(t)||CI(t,{previous:xr,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new iu(l&&l.currentValue,n,c===xr),iv(t,e,i,n)}var sv="__ngSimpleChanges__";function av(t){return t[sv]||null}function CI(t,e){return t[sv]=e}var om=null;var Et=function(t,e,n){om?.(t,e,n)},II="svg",bI="math",TI=!1;function SI(){return TI}function bt(t){for(;Array.isArray(t);)t=t[Ut];return t}function MI(t,e){return bt(e[t])}function gt(t,e){return bt(e[t.index])}function Xu(t,e){return t.data[e]}function AI(t,e){return t[e]}function sn(t,e){let n=e[t];return Nn(n)?n:n[Ut]}function xI(t){return(t[A]&4)===4}function Ju(t){return(t[A]&128)===128}function NI(t){return Bt(t[we])}function na(t,e){return e==null?null:t[e]}function cv(t){t[Ir]=0}function RI(t){t[A]&1024||(t[A]|=1024,Ju(t)&&ji(t))}function PI(t,e){for(;t>0;)e=e[Lr],t--;return e}function ed(t){return!!(t[A]&9216||t[Pn]?.dirty)}function ou(t){t[lt].changeDetectionScheduler?.notify(1),ed(t)?ji(t):t[A]&64&&(SI()?(t[A]|=1024,ji(t)):t[lt].changeDetectionScheduler?.notify())}function ji(t){t[lt].changeDetectionScheduler?.notify();let e=Vi(t);for(;e!==null&&!(e[A]&8192||(e[A]|=8192,!Ju(e)));)e=Vi(e)}function lv(t,e){if((t[A]&256)===256)throw new M(911,!1);t[en]===null&&(t[en]=[]),t[en].push(e)}function OI(t,e){if(t[en]===null)return;let n=t[en].indexOf(e);n!==-1&&t[en].splice(n,1)}function Vi(t){let e=t[we];return Bt(e)?e[we]:e}var B={lFrame:mv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function kI(){return B.lFrame.elementDepthCount}function FI(){B.lFrame.elementDepthCount++}function LI(){B.lFrame.elementDepthCount--}function uv(){return B.bindingsEnabled}function jI(){return B.skipHydrationRootTNode!==null}function VI(t){return B.skipHydrationRootTNode===t}function UI(){B.skipHydrationRootTNode=null}function Y(){return B.lFrame.lView}function St(){return B.lFrame.tView}function fU(t){return B.lFrame.contextLView=t,t[De]}function hU(t){return B.lFrame.contextLView=null,t}function mt(){let t=dv();for(;t!==null&&t.type===64;)t=t.parent;return t}function dv(){return B.lFrame.currentTNode}function BI(){let t=B.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ki(t,e){let n=B.lFrame;n.currentTNode=t,n.isParent=e}function fv(){return B.lFrame.isParent}function $I(){B.lFrame.isParent=!1}function HI(){return B.lFrame.contextLView}function td(){let t=B.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function WI(t){return B.lFrame.bindingIndex=t}function Ea(){return B.lFrame.bindingIndex++}function zI(){return B.lFrame.inI18n}function GI(t,e){let n=B.lFrame;n.bindingIndex=n.bindingRootIndex=t,su(e)}function qI(){return B.lFrame.currentDirectiveIndex}function su(t){B.lFrame.currentDirectiveIndex=t}function hv(){return B.lFrame.currentQueryIndex}function nd(t){B.lFrame.currentQueryIndex=t}function YI(t){let e=t[O];return e.type===2?e.declTNode:e.type===1?t[pt]:null}function pv(t,e,n){if(n&V.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&V.Host);)if(i=YI(o),i===null||(o=o[Lr],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=B.lFrame=gv();return r.currentTNode=e,r.lView=t,!0}function rd(t){let e=gv(),n=t[O];B.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function gv(){let t=B.lFrame,e=t===null?null:t.child;return e===null?mv(t):e}function mv(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function vv(){let t=B.lFrame;return B.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var yv=vv;function id(){let t=vv();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function QI(t){return(B.lFrame.contextLView=PI(t,B.lFrame.contextLView))[De]}function Ca(){return B.lFrame.selectedIndex}function Fn(t){B.lFrame.selectedIndex=t}function _v(){let t=B.lFrame;return Xu(t.tView,t.selectedIndex)}function KI(){return B.lFrame.currentNamespace}var wv=!0;function od(){return wv}function sd(t){wv=t}function ZI(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=ov(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function ad(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Gs(t,e,n){Dv(t,e,3,n)}function qs(t,e,n,r){(t[A]&3)===n&&Dv(t,e,n,r)}function Bl(t,e){let n=t[A];(n&3)===e&&(n&=16383,n+=1,t[A]=n)}function Dv(t,e,n,r){let i=r!==void 0?t[Ir]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Ir]+=65536),(a<o||o==-1)&&(XI(t,n,e,c),t[Ir]=(t[Ir]&4294901760)+c+2),c++}function sm(t,e){Et(4,t,e);let n=W(null);try{e.call(t)}finally{W(n),Et(5,t,e)}}function XI(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[A]>>14<t[Ir]>>16&&(t[A]&3)===e&&(t[A]+=16384,sm(a,o)):sm(a,o)}var Mr=-1,Ui=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function JI(t){return t instanceof Ui}function eb(t){return(t.flags&8)!==0}function tb(t){return(t.flags&16)!==0}function Ev(t){return t!==Mr}function ra(t){return t&32767}function nb(t){return t>>16}function ia(t,e){let n=nb(t),r=e;for(;n>0;)r=r[Lr],n--;return r}var au=!0;function am(t){let e=au;return au=t,e}var rb=256,Cv=rb-1,Iv=5,ib=0,Ct={};function ob(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ni)&&(r=n[Ni]),r==null&&(r=n[Ni]=ib++);let i=r&Cv,o=1<<i;e.data[t+(i>>Iv)]|=o}function bv(t,e){let n=Tv(t,e);if(n!==-1)return n;let r=e[O];r.firstCreatePass&&(t.injectorIndex=e.length,$l(r.data,t),$l(e,null),$l(r.blueprint,null));let i=cd(t,e),o=t.injectorIndex;if(Ev(i)){let s=ra(i),a=ia(i,e),c=a[O].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function $l(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Tv(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function cd(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Nv(i),r===null)return Mr;if(n++,i=i[Lr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Mr}function sb(t,e,n){ob(t,e,n)}function Sv(t,e,n){if(n&V.Optional||t!==void 0)return t;zu(e,"NodeInjector")}function Mv(t,e,n,r){if(n&V.Optional&&r===void 0&&(r=null),!(n&(V.Self|V.Host))){let i=t[Rr],o=Ye(void 0);try{return i?i.get(e,r,n&V.Optional):Fm(e,r,n&V.Optional)}finally{Ye(o)}}return Sv(r,e,n)}function Av(t,e,n,r=V.Default,i){if(t!==null){if(e[A]&2048&&!(r&V.Self)){let s=ub(t,e,n,r,Ct);if(s!==Ct)return s}let o=xv(t,e,n,r,Ct);if(o!==Ct)return o}return Mv(e,n,r,i)}function xv(t,e,n,r,i){let o=cb(n);if(typeof o=="function"){if(!pv(e,t,r))return r&V.Host?Sv(i,n,r):Mv(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&V.Optional))zu(n);else return s}finally{yv()}}else if(typeof o=="number"){let s=null,a=Tv(t,e),c=Mr,l=r&V.Host?e[ut][pt]:null;for((a===-1||r&V.SkipSelf)&&(c=a===-1?cd(t,e):e[a+8],c===Mr||!lm(r,!1)?a=-1:(s=e[O],a=ra(c),e=ia(c,e)));a!==-1;){let u=e[O];if(cm(o,a,u.data)){let d=ab(a,e,n,s,r,l);if(d!==Ct)return d}c=e[a+8],c!==Mr&&lm(r,e[O].data[a+8]===l)&&cm(o,a,e)?(s=u,a=ra(c),e=ia(c,e)):a=-1}}return i}function ab(t,e,n,r,i,o){let s=e[O],a=s.data[t+8],c=r==null?wa(a)&&au:r!=s&&(a.type&3)!==0,l=i&V.Host&&o===a,u=Ys(a,s,n,c,l);return u!==null?Or(e,s,u,a):Ct}function Ys(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let p=s[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(i){let h=s[c];if(h&&kn(h)&&h.type===n)return c}return null}function Or(t,e,n,r){let i=t[n],o=e.data;if(JI(i)){let s=i;s.resolving&&PC(RC(o[n]));let a=am(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Ye(s.injectImpl):null,u=pv(t,r,V.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&ZI(n,o[n],e)}finally{l!==null&&Ye(l),am(a),s.resolving=!1,yv()}}return i}function cb(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ni)?t[Ni]:void 0;return typeof e=="number"?e>=0?e&Cv:lb:e}function cm(t,e,n){let r=1<<t;return!!(n[e+(t>>Iv)]&r)}function lm(t,e){return!(t&V.Self)&&!(t&V.Host&&e)}var Rn=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Av(this._tNode,this._lView,e,ma(r),n)}};function lb(){return new Rn(mt(),Y())}function ld(t){return qi(()=>{let e=t.prototype.constructor,n=e[Zs]||cu(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Zs]||cu(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function cu(t){return xm(t)?()=>{let e=cu(Qe(t));return e&&e()}:Ar(t)}function ub(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[A]&2048&&!(s[A]&512);){let a=xv(o,s,n,r|V.Self,Ct);if(a!==Ct)return a;let c=o.parent;if(!c){let l=s[tv];if(l){let u=l.get(n,Ct,r);if(u!==Ct)return u}c=Nv(s),s=s[Lr]}o=c}return i}function Nv(t){let e=t[O],n=e.type;return n===2?e.declTNode:n===1?t[pt]:null}function um(t,e=null,n=null,r){let i=Rv(t,e,n,r);return i.resolveInjectorInitializers(),i}function Rv(t,e=null,n=null,r,i=new Set){let o=[n||at,aI(t)];return r=r||(typeof t=="object"?void 0:je(t)),new Oi(o,e||Qu(),r||null,i)}var an=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return um({name:""},i,r,"");{let o=r.name??"";return um({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=Ri,e.NULL=new ea,e.\u0275prov=C({token:e,providedIn:"any",factory:()=>v(Um)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var db="ngOriginalError";function Hl(t){return t[db]}var Tt=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Hl(e);for(;n&&Hl(n);)n=Hl(n);return n||null}},Pv=new E("",{providedIn:"root",factory:()=>y(Tt).handleError.bind(void 0)}),ud=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=fb,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),lu=class extends ud{constructor(e){super(),this._lView=e}onDestroy(e){return lv(this._lView,e),()=>OI(this._lView,e)}};function fb(){return new lu(Y())}function hb(){return jr(mt(),Y())}function jr(t,e){return new cn(gt(t,e))}var cn=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=hb;let t=e;return t})();function pb(t){return t instanceof cn?t.nativeElement:t}var uu=class extends ae{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,ev()&&(this.destroyRef=y(ud,{optional:!0})??void 0)}emit(e){let n=W(null);try{super.next(e)}finally{W(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Wl(o),i&&(i=Wl(i)),s&&(s=Wl(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof se&&e.add(a),a}};function Wl(t){return e=>{setTimeout(t,void 0,e)}}var Ke=uu;function gb(){return this._results[Symbol.iterator]()}var du=class t{get changes(){return this._changes??=new Ke}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=gb)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=WC(e);(this._changesDetected=!HC(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function Ov(t){return(t.flags&128)===128}var kv=new Map,mb=0;function vb(){return mb++}function yb(t){kv.set(t[_a],t)}function _b(t){kv.delete(t[_a])}var dm="__ngContext__";function Ln(t,e){Nn(e)?(t[dm]=e[_a],yb(e)):t[dm]=e}function Fv(t){return jv(t[Li])}function Lv(t){return jv(t[ct])}function jv(t){for(;t!==null&&!Bt(t);)t=t[ct];return t}var fu;function Vv(t){fu=t}function wb(){if(fu!==void 0)return fu;if(typeof document<"u")return document;throw new M(210,!1)}var dd=new E("",{providedIn:"root",factory:()=>Db}),Db="ng",fd=new E(""),be=new E("",{providedIn:"platform",factory:()=>"unknown"});var hd=new E("",{providedIn:"root",factory:()=>wb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Eb="h",Cb="b";var Ib=()=>null;function pd(t,e,n=!1){return Ib(t,e,n)}var Uv=!1,bb=new E("",{providedIn:"root",factory:()=>Uv});var oa=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Sm})`}};function gd(t){return t instanceof oa?t.changingThisBreaksApplicationSecurity:t}function Bv(t,e){let n=Tb(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Sm})`)}return n===e}function Tb(t){return t instanceof oa&&t.getTypeName()||null}var Sb=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function $v(t){return t=String(t),t.match(Sb)?t:"unsafe:"+t}var md=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(md||{});function pU(t){let e=Mb();return e?e.sanitize(md.URL,t)||"":Bv(t,"URL")?gd(t):$v(Wu(t))}function Mb(){let t=Y();return t&&t[lt].sanitizer}function Hv(t){return t instanceof Function?t():t}function Ab(t){return(t??y(an)).get(be)==="browser"}var Vn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Vn||{}),xb;function vd(t,e){return xb(t,e)}function br(t,e,n,r,i){if(r!=null){let o,s=!1;Bt(r)?o=r:Nn(r)&&(s=!0,r=r[Ut]);let a=bt(r);t===0&&n!==null?i==null?qv(e,n,a):sa(e,n,a,i||null,!0):t===1&&n!==null?sa(e,n,a,i||null,!0):t===2?qb(e,a,s):t===3&&e.destroyNode(a),o!=null&&Qb(e,t,o,n,i)}}function Nb(t,e){return t.createText(e)}function Rb(t,e,n){t.setValue(e,n)}function Wv(t,e,n){return t.createElement(e,n)}function Pb(t,e){zv(t,e),e[Ut]=null,e[pt]=null}function Ob(t,e,n,r,i,o){r[Ut]=i,r[pt]=e,ba(t,r,n,1,i,o)}function zv(t,e){e[lt].changeDetectionScheduler?.notify(1),ba(t,e,e[Ie],2,null,null)}function kb(t){let e=t[Li];if(!e)return zl(t[O],t);for(;e;){let n=null;if(Nn(e))n=e[Li];else{let r=e[Ee];r&&(n=r)}if(!n){for(;e&&!e[ct]&&e!==t;)Nn(e)&&zl(e[O],e),e=e[we];e===null&&(e=t),Nn(e)&&zl(e[O],e),n=e&&e[ct]}e=n}}function Fb(t,e,n,r){let i=Ee+r,o=n.length;r>0&&(n[i-1][ct]=e),r<o-Ee?(e[ct]=n[i],Vm(n,Ee+r,e)):(n.push(e),e[ct]=null),e[we]=n;let s=e[Qi];s!==null&&n!==s&&Lb(s,e);let a=e[Vt];a!==null&&a.insertView(t),ou(e),e[A]|=128}function Lb(t,e){let n=t[Pr],i=e[we][we][ut];e[ut]!==i&&(t[A]|=Ku.HasTransplantedViews),n===null?t[Pr]=[e]:n.push(e)}function Gv(t,e){let n=t[Pr],r=n.indexOf(e);n.splice(r,1)}function Bi(t,e){if(t.length<=Ee)return;let n=Ee+e,r=t[n];if(r){let i=r[Qi];i!==null&&i!==t&&Gv(i,r),e>0&&(t[n-1][ct]=r[ct]);let o=Js(t,Ee+e);Pb(r[O],r);let s=o[Vt];s!==null&&s.detachView(o[O]),r[we]=null,r[ct]=null,r[A]&=-129}return r}function Ia(t,e){if(!(e[A]&256)){let n=e[Ie];n.destroyNode&&ba(t,e,n,3,null,null),kb(e)}}function zl(t,e){if(e[A]&256)return;let n=W(null);try{e[A]&=-129,e[A]|=256,e[Pn]&&Vg(e[Pn]),Vb(t,e),jb(t,e),e[O].type===1&&e[Ie].destroy();let r=e[Qi];if(r!==null&&Bt(e[we])){r!==e[we]&&Gv(r,e);let i=e[Vt];i!==null&&i.detachView(t)}_b(e)}finally{W(n)}}function jb(t,e){let n=t.cleanup,r=e[Fi];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Fi]=null);let i=e[en];if(i!==null){e[en]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function Vb(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ui)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Et(4,a,c);try{c.call(a)}finally{Et(5,a,c)}}else{Et(4,i,o);try{o.call(i)}finally{Et(5,i,o)}}}}}function Ub(t,e,n){return Bb(t,e.parent,n)}function Bb(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Ut];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===It.None||o===It.Emulated)return null}return gt(r,n)}}function sa(t,e,n,r,i){t.insertBefore(e,n,r,i)}function qv(t,e,n){t.appendChild(e,n)}function fm(t,e,n,r,i){r!==null?sa(t,e,n,r,i):qv(t,e,n)}function $b(t,e,n,r){t.removeChild(e,n,r)}function yd(t,e){return t.parentNode(e)}function Hb(t,e){return t.nextSibling(e)}function Wb(t,e,n){return Gb(t,e,n)}function zb(t,e,n){return t.type&40?gt(t,n):null}var Gb=zb,hm;function _d(t,e,n,r){let i=Ub(t,r,e),o=e[Ie],s=r.parent||e[pt],a=Wb(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)fm(o,i,n[c],a,!1);else fm(o,i,n,a,!1);hm!==void 0&&hm(o,r,e,n,i)}function Qs(t,e){if(e!==null){let n=e.type;if(n&3)return gt(e,t);if(n&4)return hu(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Qs(t,r);{let i=t[e.index];return Bt(i)?hu(-1,i):bt(i)}}else{if(n&32)return vd(e,t)()||bt(t[e.index]);{let r=Yv(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Vi(t[ut]);return Qs(i,r)}else return Qs(t,e.next)}}}return null}function Yv(t,e){if(e!==null){let r=t[ut][pt],i=e.projection;return r.projection[i]}return null}function hu(t,e){let n=Ee+t+1;if(n<e.length){let r=e[n],i=r[O].firstChild;if(i!==null)return Qs(r,i)}return e[On]}function qb(t,e,n){let r=yd(t,e);r&&$b(t,r,e,n)}function wd(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&e===0&&(a&&Ln(bt(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)wd(t,e,n.child,r,i,o,!1),br(e,t,i,a,o);else if(c&32){let l=vd(n,r),u;for(;u=l();)br(e,t,i,u,o);br(e,t,i,a,o)}else c&16?Yb(t,e,r,n,i,o):br(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ba(t,e,n,r,i,o){wd(n,r,t.firstChild,e,i,o,!1)}function Yb(t,e,n,r,i,o){let s=n[ut],c=s[pt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];br(e,t,i,u,o)}else{let l=c,u=s[we];Ov(r)&&(l.flags|=128),wd(t,e,l,u,i,o,!0)}}function Qb(t,e,n,r,i){let o=n[On],s=bt(n);o!==s&&br(e,t,r,o,i);for(let a=Ee;a<n.length;a++){let c=n[a];ba(c[O],c,t,e,r,o)}}function Kb(t,e,n){t.setAttribute(e,"style",n)}function Qv(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Kv(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Jl(t,e,r),i!==null&&Qv(t,e,i),o!==null&&Kb(t,e,o)}var Un={};function gU(t=1){Zv(St(),Y(),Ca()+t,!1)}function Zv(t,e,n,r){if(!r)if((e[A]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Gs(e,o,n)}else{let o=t.preOrderHooks;o!==null&&qs(e,o,0,n)}Fn(n)}function Zi(t,e=V.Default){let n=Y();if(n===null)return v(t,e);let r=mt();return Av(r,n,Qe(t),e)}function Xv(){let t="invalid";throw new Error(t)}function Jv(t,e,n,r,i,o){let s=W(null);try{let a=null;i&jt.SignalBased&&(a=e[r][Er]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&jt.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):iv(e,a,r,o)}finally{W(s)}}function Zb(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Fn(~i);else{let o=i,s=n[++r],a=n[++r];GI(s,o);let c=e[o];a(2,c)}}}finally{Fn(-1)}}function Ta(t,e,n,r,i,o,s,a,c,l,u){let d=e.blueprint.slice();return d[Ut]=i,d[A]=r|4|128|8|64,(l!==null||t&&t[A]&2048)&&(d[A]|=2048),cv(d),d[we]=d[Lr]=t,d[De]=n,d[lt]=s||t&&t[lt],d[Ie]=a||t&&t[Ie],d[Rr]=c||t&&t[Rr]||null,d[pt]=o,d[_a]=vb(),d[ki]=u,d[tv]=l,d[ut]=e.type==2?t[ut]:d,d}function Sa(t,e,n,r,i){let o=t.data[e];if(o===null)o=Xb(t,e,n,r,i),zI()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=BI();o.injectorIndex=s===null?-1:s.injectorIndex}return Ki(o,!0),o}function Xb(t,e,n,r,i){let o=dv(),s=fv(),a=s?o:o&&o.parent,c=t.data[e]=iT(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function ey(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ty(t,e,n,r,i){let o=Ca(),s=r&2;try{Fn(-1),s&&e.length>Ze&&Zv(t,e,Ze,!1),Et(s?2:0,i),n(r,i)}finally{Fn(o),Et(s?3:1,i)}}function ny(t,e,n){if(rv(e)){let r=W(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{W(r)}}}function ry(t,e,n){uv()&&(uT(t,e,n,gt(n,e)),(n.flags&64)===64&&ly(t,e,n))}function iy(t,e,n=gt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function oy(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Dd(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Dd(t,e,n,r,i,o,s,a,c,l,u){let d=Ze+r,f=d+i,h=Jb(d,f),p=typeof l=="function"?l():l;return h[O]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function Jb(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Un);return n}function eT(t,e,n,r){let o=r.get(bb,Uv)||n===It.ShadowDom,s=t.selectRootElement(e,o);return tT(s),s}function tT(t){nT(t)}var nT=()=>null;function rT(t,e,n,r){let i=fy(e);i.push(n),t.firstCreatePass&&hy(t).push(r,i.length-1)}function iT(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return jI()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function pm(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=jt.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?gm(r,n,l,a,c):gm(r,n,l,a)}return r}function gm(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function oT(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=o[u],f=n?n.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;c=pm(0,d.inputs,u,c,h),l=pm(1,d.outputs,u,l,p);let m=c!==null&&s!==null&&!qu(e)?_T(c,u,s):null;a.push(m)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function sT(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function sy(t,e,n,r,i,o,s,a){let c=gt(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(Ed(t,n,u,r,i),wa(e)&&aT(n,e.index)):e.type&3?(r=sT(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function aT(t,e){let n=sn(e,t);n[A]&16||(n[A]|=64)}function ay(t,e,n,r){if(uv()){let i=r===null?null:{"":-1},o=fT(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&cy(t,e,n,s,i,a),i&&hT(n,r,i)}n.mergedAttrs=Pi(n.mergedAttrs,n.attrs)}function cy(t,e,n,r,i,o){for(let l=0;l<r.length;l++)sb(bv(n,e),t,r[l].type);gT(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=ey(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=Pi(n.mergedAttrs,u.hostAttrs),mT(t,n,e,c,u),pT(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}oT(t,n,o)}function cT(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;lT(s)!=a&&s.push(a),s.push(n,r,o)}}function lT(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function uT(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;wa(n)&&vT(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||bv(n,e),Ln(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],l=Or(e,t,a,n);if(Ln(l,e),s!==null&&yT(e,a-i,l,c,n,s),kn(c)){let u=sn(n.index,e);u[De]=Or(e,t,a,n)}}}function ly(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=qI();try{Fn(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];su(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&dT(c,l)}}finally{Fn(-1),su(s)}}function dT(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function fT(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(XC(e,s.selectors,!1))if(r||(r=[]),kn(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;pu(t,e,c)}else r.unshift(s),pu(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function pu(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function hT(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new M(-301,!1);r.push(e[i],o)}}}function pT(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;kn(e)&&(n[""]=t)}}function gT(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function mT(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Ar(i.type,!0)),s=new Ui(o,kn(i),Zi);t.blueprint[r]=s,n[r]=s,cT(t,e,r,ey(t,n,i.hostVars,Un),i)}function vT(t,e,n){let r=gt(e,t),i=oy(n),o=t[lt].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Ma(t,Ta(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function yT(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],d=s[a++];Jv(r,n,c,l,u,d)}}function _T(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function uy(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function dy(t,e){let n=t.contentQueries;if(n!==null){let r=W(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];nd(o),a.contentQueries(2,e[s],s)}}}finally{W(r)}}}function Ma(t,e){return t[Li]?t[im][ct]=e:t[Li]=e,t[im]=e,e}function gu(t,e,n){nd(0);let r=W(null);try{e(t,n)}finally{W(r)}}function fy(t){return t[Fi]||(t[Fi]=[])}function hy(t){return t.cleanup||(t.cleanup=[])}function py(t,e){let n=t[Rr],r=n?n.get(Tt,null):null;r&&r.handleError(e)}function Ed(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],l=e[s],u=t.data[s];Jv(u,l,r,a,c,i)}}function wT(t,e,n){let r=MI(e,t);Rb(t[Ie],r,n)}function DT(t,e){let n=sn(e,t),r=n[O];ET(r,n);let i=n[Ut];i!==null&&n[ki]===null&&(n[ki]=pd(i,n[Rr])),Cd(r,n,n[De])}function ET(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Cd(t,e,n){rd(e);try{let r=t.viewQuery;r!==null&&gu(1,r,n);let i=t.template;i!==null&&ty(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Vt]?.finishViewCreation(t),t.staticContentQueries&&dy(t,e),t.staticViewQueries&&gu(2,t.viewQuery,n);let o=t.components;o!==null&&CT(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[A]&=-5,id()}}function CT(t,e){for(let n=0;n<e.length;n++)DT(t,e[n])}function Aa(t,e,n,r){let i=W(null);try{let o=e.tView,a=t[A]&4096?4096:16,c=Ta(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Qi]=l;let u=t[Vt];return u!==null&&(c[Vt]=u.createEmbeddedView(o)),Cd(o,c,n),c}finally{W(i)}}function gy(t,e){let n=Ee+e;if(n<t.length)return t[n]}function $i(t,e){return!e||e.firstChild===null||Ov(t)}function xa(t,e,n,r=!0){let i=e[O];if(Fb(i,e,t,n),r){let s=hu(n,t),a=e[Ie],c=yd(a,t[On]);c!==null&&Ob(i,t[pt],a,e,c,s)}let o=e[ki];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function my(t,e){let n=Bi(t,e);return n!==void 0&&Ia(n[O],n),n}function aa(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(bt(o)),Bt(o)&&IT(o,r);let s=n.type;if(s&8)aa(t,e,n.child,r);else if(s&32){let a=vd(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=Yv(e,n);if(Array.isArray(a))r.push(...a);else{let c=Vi(e[ut]);aa(c[O],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function IT(t,e){for(let n=Ee;n<t.length;n++){let r=t[n],i=r[O].firstChild;i!==null&&aa(r[O],r,i,e)}t[On]!==t[Ut]&&e.push(t[On])}var vy=[];function bT(t){return t[Pn]??TT(t)}function TT(t){let e=vy.pop()??Object.create(MT);return e.lView=t,e}function ST(t){t.lView[Pn]!==t&&(t.lView=null,vy.push(t))}var MT=re(D({},Fl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ji(t.lView)},consumerOnSignalRead(){this.lView[Pn]=this}}),yy=100;function _y(t,e=!0,n=0){let r=t[lt],i=r.rendererFactory,o=!1;o||i.begin?.();try{AT(t,n)}catch(s){throw e&&py(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function AT(t,e){mu(t,e);let n=0;for(;ed(t);){if(n===yy)throw new M(103,!1);n++,mu(t,1)}}function xT(t,e,n,r){let i=e[A];if((i&256)===256)return;let o=!1;!o&&e[lt].inlineEffectRunner?.flush(),rd(e);let s=null,a=null;!o&&NT(t)&&(a=bT(e),s=Lg(a));try{cv(e),WI(t.bindingStartIndex),n!==null&&ty(t,e,n,2,r);let c=(i&3)===3;if(!o)if(c){let d=t.preOrderCheckHooks;d!==null&&Gs(e,d,null)}else{let d=t.preOrderHooks;d!==null&&qs(e,d,0,null),Bl(e,0)}if(RT(e),wy(e,0),t.contentQueries!==null&&dy(t,e),!o)if(c){let d=t.contentCheckHooks;d!==null&&Gs(e,d)}else{let d=t.contentHooks;d!==null&&qs(e,d,1),Bl(e,1)}Zb(t,e);let l=t.components;l!==null&&Ey(e,l,0);let u=t.viewQuery;if(u!==null&&gu(2,u,r),!o)if(c){let d=t.viewCheckHooks;d!==null&&Gs(e,d)}else{let d=t.viewHooks;d!==null&&qs(e,d,2),Bl(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ul]){for(let d of e[Ul])d();e[Ul]=null}o||(e[A]&=-73)}catch(c){throw ji(e),c}finally{a!==null&&(jg(a,s),ST(a)),id()}}function NT(t){return t.type!==2}function wy(t,e){for(let n=Fv(t);n!==null;n=Lv(n))for(let r=Ee;r<n.length;r++){let i=n[r];Dy(i,e)}}function RT(t){for(let e=Fv(t);e!==null;e=Lv(e)){if(!(e[A]&Ku.HasTransplantedViews))continue;let n=e[Pr];for(let r=0;r<n.length;r++){let i=n[r],o=i[we];RI(i)}}}function PT(t,e,n){let r=sn(e,t);Dy(r,n)}function Dy(t,e){Ju(t)&&mu(t,e)}function mu(t,e){let r=t[O],i=t[A],o=t[Pn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ll(o)),o&&(o.dirty=!1),t[A]&=-9217,s)xT(r,t,r.template,t[De]);else if(i&8192){wy(t,1);let a=r.components;a!==null&&Ey(t,a,1)}}function Ey(t,e,n){for(let r=0;r<e.length;r++)PT(t,e[r],n)}function Id(t){for(t[lt].changeDetectionScheduler?.notify();t;){t[A]|=64;let e=Vi(t);if(wI(t)&&!e)return t;t=e}return null}var jn=class{get rootNodes(){let e=this._lView,n=e[O];return aa(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[De]}set context(e){this._lView[De]=e}get destroyed(){return(this._lView[A]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[we];if(Bt(e)){let n=e[ta],r=n?n.indexOf(this):-1;r>-1&&(Bi(e,r),Js(n,r))}this._attachedToViewContainer=!1}Ia(this._lView[O],this._lView)}onDestroy(e){lv(this._lView,e)}markForCheck(){Id(this._cdRefInjectingView||this._lView)}detach(){this._lView[A]&=-129}reattach(){ou(this._lView),this._lView[A]|=128}detectChanges(){this._lView[A]|=1024,_y(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new M(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,zv(this._lView[O],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new M(902,!1);this._appRef=e,ou(this._lView)}},Hi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=FT;let t=e;return t})(),OT=Hi,kT=class extends OT{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Aa(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new jn(i)}};function FT(){return bd(mt(),Y())}function bd(t,e){return t.type&4?new kT(e,t,jr(t,e)):null}var vU=new RegExp(`^(\\d+)*(${Cb}|${Eb})*(.*)`);var LT=()=>null;function Wi(t,e){return LT(t,e)}var ca=class{},vu=class{},la=class{};function jT(t){let e=Error(`No component factory found for ${je(t)}.`);return e[VT]=t,e}var VT="ngComponent";var yu=class{resolveComponentFactory(e){throw jT(e)}},Na=(()=>{let e=class e{};e.NULL=new yu;let t=e;return t})(),zi=class{},Ra=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>UT();let t=e;return t})();function UT(){let t=Y(),e=mt(),n=sn(e.index,t);return(Nn(n)?n:t)[Ie]}var BT=(()=>{let e=class e{};e.\u0275prov=C({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Gl={};var mm=new Set;function Bn(t){mm.has(t)||(mm.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function vm(...t){}function $T(){let t=typeof xi.requestAnimationFrame=="function",e=xi[t?"requestAnimationFrame":"setTimeout"],n=xi[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var z=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ke(!1),this.onMicrotaskEmpty=new Ke(!1),this.onStable=new Ke(!1),this.onError=new Ke(!1),typeof Zone>"u")throw new M(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=$T().nativeRequestAnimationFrame,zT(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new M(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new M(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,HT,vm,vm);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},HT={};function Td(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function WT(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(xi,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,_u(t),t.isCheckStableRunning=!0,Td(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),_u(t))}function zT(t){let e=()=>{WT(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(GT(a))return n.invokeTask(i,o,s,a);try{return ym(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),_m(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return ym(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),_m(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,_u(t),Td(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function _u(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function ym(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function _m(t){t._nesting--,Td(t)}function GT(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Tr=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Tr||{}),qT={destroy(){}};function Pa(t,e){!e&&yI(Pa);let n=e?.injector??y(an);if(!Ab(n))return qT;Bn("NgAfterNextRender");let r=n.get(Sd),i=r.handler??=new Du,o=e?.phase??Tr.MixedReadWrite,s=()=>{i.unregister(c),a()},a=n.get(ud).onDestroy(s),c=ht(n,()=>new wu(o,()=>{s(),t()}));return i.register(c),{destroy:s}}var wu=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=y(z),this.errorHandler=y(Tt,{optional:!0}),y(ca,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Du=class{constructor(){this.executingCallbacks=!1,this.buckets={[Tr.EarlyRead]:new Set,[Tr.Write]:new Set,[Tr.MixedReadWrite]:new Set,[Tr.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Sd=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=C({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Eu(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Yg(i,a);else if(o==2){let c=a,l=e[++s];r=Yg(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var ua=class extends Na{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=tn(e);return new kr(n,this.ngModule)}};function wm(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function YT(t){let e=t.toLowerCase();return e==="svg"?II:e==="math"?bI:null}var Cu=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ma(r);let i=this.injector.get(e,Gl,r);return i!==Gl||n===Gl?i:this.parentInjector.get(e,n,r)}},kr=class extends la{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=wm(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return wm(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=nI(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=W(null);try{i=i||this.ngModule;let s=i instanceof Ce?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Cu(e,s):e,c=a.get(zi,null);if(c===null)throw new M(407,!1);let l=a.get(BT,null),u=a.get(Sd,null),d=a.get(ca,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},h=c.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",m=r?eT(h,r,this.componentDef.encapsulation,a):Wv(h,p,YT(p)),_=512;this.componentDef.signals?_|=4096:this.componentDef.onPush||(_|=16);let w=null;m!==null&&(w=pd(m,a,!0));let H=Dd(0,null,null,1,0,null,null,null,null,null,null),N=Ta(null,H,null,_,null,null,f,h,a,null,w);rd(N);let $,de;try{let Le=this.componentDef,qt,ll=null;Le.findHostDirectiveDefs?(qt=[],ll=new Map,Le.findHostDirectiveDefs(Le,qt,ll),qt.push(Le)):qt=[Le];let jE=QT(N,m),VE=KT(jE,m,Le,qt,N,f,h);de=Xu(H,Ze),m&&JT(h,Le,m,r),n!==void 0&&eS(de,this.ngContentSelectors,n),$=XT(VE,Le,qt,ll,N,[tS]),Cd(H,N,null)}finally{id()}return new Iu(this.componentType,$,jr(de,N),N,de)}finally{W(o)}}},Iu=class extends vu{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new jn(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Ed(o[O],o,i,e,n),this.previousInputValues.set(e,n);let s=sn(this._tNode.index,o);Id(s)}}get injector(){return new Rn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function QT(t,e){let n=t[O],r=Ze;return t[r]=e,Sa(n,r,2,"#host",null)}function KT(t,e,n,r,i,o,s){let a=i[O];ZT(r,t,e,s);let c=null;e!==null&&(c=pd(e,i[Rr]));let l=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Ta(i,oy(n),null,u,i[t.index],t,o,l,null,null,c);return a.firstCreatePass&&pu(a,t,r.length-1),Ma(i,d),i[t.index]=d}function ZT(t,e,n,r){for(let i of t)e.mergedAttrs=Pi(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Eu(e,e.mergedAttrs,!0),n!==null&&Kv(r,n,e))}function XT(t,e,n,r,i,o){let s=mt(),a=i[O],c=gt(s,i);cy(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,f=Or(i,a,d,s);Ln(f,i)}ly(a,i,s),c&&Ln(c,i);let l=Or(i,a,s.directiveStart+s.componentOffset,s);if(t[De]=i[De]=l,o!==null)for(let u of o)u(l,e);return ny(a,s,i),l}function JT(t,e,n,r){if(r)Jl(t,n,["ng-version","17.3.11"]);else{let{attrs:i,classes:o}=rI(e.selectors[0]);i&&Jl(t,n,i),o&&o.length>0&&Qv(t,n,o.join(" "))}}function eS(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function tS(){let t=mt();ad(Y()[O],t)}var Vr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=nS;let t=e;return t})();function nS(){let t=mt();return Iy(t,Y())}var rS=Vr,Cy=class extends rS{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return jr(this._hostTNode,this._hostLView)}get injector(){return new Rn(this._hostTNode,this._hostLView)}get parentInjector(){let e=cd(this._hostTNode,this._hostLView);if(Ev(e)){let n=ia(e,this._hostLView),r=ra(e),i=n[O].data[r+8];return new Rn(i,n)}else return new Rn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Dm(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ee}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Wi(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,$i(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!_I(e),a;if(s)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let c=s?e:new kr(tn(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let m=(s?l:this.parentInjector).get(Ce,null);m&&(o=m)}let u=tn(c.componentType??{}),d=Wi(this._lContainer,u?.id??null),f=d?.firstChild??null,h=c.create(l,i,f,o);return this.insertImpl(h.hostView,a,$i(this._hostTNode,d)),h}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(NI(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[we],l=new Cy(c,c[pt],c[we]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return xa(s,i,o,r),e.attachToViewContainerRef(),Vm(ql(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Dm(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Bi(this._lContainer,n);r&&(Js(ql(this._lContainer),n),Ia(r[O],r))}detach(e){let n=this._adjustIndex(e,-1),r=Bi(this._lContainer,n);return r&&Js(ql(this._lContainer),n)!=null?new jn(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Dm(t){return t[ta]}function ql(t){return t[ta]||(t[ta]=[])}function Iy(t,e){let n,r=e[t.index];return Bt(r)?n=r:(n=uy(r,e,null,t),e[t.index]=n,Ma(e,n)),oS(n,e,t,r),new Cy(n,t,e)}function iS(t,e){let n=t[Ie],r=n.createComment(""),i=gt(e,t),o=yd(n,i);return sa(n,o,r,Hb(n,i),!1),r}var oS=cS,sS=()=>!1;function aS(t,e,n){return sS(t,e,n)}function cS(t,e,n,r){if(t[On])return;let i;n.type&8?i=bt(r):i=iS(e,n),t[On]=i}var bu=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Tu=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Md(e,n).matches!==null&&this.queries[n].setDirty()}},Su=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=mS(e):this.predicate=e}},Mu=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Au=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,lS(n,o)),this.matchTNodeWithReadOption(e,n,Ys(n,e,o,!1,!1))}else r===Hi?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Ys(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===cn||i===Vr||i===Hi&&n.type&4)this.addMatch(n.index,-2);else{let o=Ys(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function lS(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function uS(t,e){return t.type&11?jr(t,e):t.type&4?bd(t,e):null}function dS(t,e,n,r){return n===-1?uS(e,t):n===-2?fS(t,e,r):Or(t,t[O],n,e)}function fS(t,e,n){if(n===cn)return jr(e,t);if(n===Hi)return bd(e,t);if(n===Vr)return Iy(e,t)}function by(t,e,n,r){let i=e[Vt].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(dS(e,u,s[c+1],n.metadata.read))}}i.matches=a}return i.matches}function xu(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=by(t,e,i,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],u=e[-c];for(let d=Ee;d<u.length;d++){let f=u[d];f[Qi]===f[we]&&xu(f[O],f,l,r)}if(u[Pr]!==null){let d=u[Pr];for(let f=0;f<d.length;f++){let h=d[f];xu(h[O],h,l,r)}}}}}return r}function hS(t,e){return t[Vt].queries[e].queryList}function pS(t,e,n){let r=new du((n&4)===4);return rT(t,e,r,r.destroy),(e[Vt]??=new Tu).queries.push(new bu(r))-1}function gS(t,e,n){let r=St();return r.firstCreatePass&&(vS(r,new Su(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),pS(r,Y(),e)}function mS(t){return t.split(",").map(e=>e.trim())}function vS(t,e,n){t.queries===null&&(t.queries=new Mu),t.queries.track(new Au(e,n))}function Md(t,e){return t.queries.getByIndex(e)}function yS(t,e){let n=t[O],r=Md(n,e);return r.crossesNgTemplate?xu(n,t,e,[]):by(n,t,r,e)}function _U(t,e){Bn("NgSignals");let n=zg(t),r=n[Er];return e?.equal&&(r.equal=e.equal),n.set=i=>jl(r,i),n.update=i=>Gg(r,i),n.asReadonly=_S.bind(n),n}function _S(){let t=this[Er];if(t.readonlyFn===void 0){let e=()=>this();e[Er]=t,t.readonlyFn=e}return t.readonlyFn}function wS(t){return Object.getPrototypeOf(t.prototype).constructor}function DS(t){let e=wS(t.type),n=!0,r=[t];for(;e;){let i;if(kn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new M(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Ws(t.inputs),s.inputTransforms=Ws(t.inputTransforms),s.declaredInputs=Ws(t.declaredInputs),s.outputs=Ws(t.outputs);let a=i.hostBindings;a&&TS(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&IS(t,c),l&&bS(t,l),ES(t,i),IC(t.outputs,i.outputs),kn(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===DS&&(n=!1)}}e=Object.getPrototypeOf(e)}CS(r)}function ES(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function CS(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Pi(i.hostAttrs,n=Pi(n,i.hostAttrs))}}function Ws(t){return t===xr?{}:t===at?[]:t}function IS(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function bS(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function TS(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var nn=class{},Gi=class{};var Nu=class extends nn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ua(this);let i=Ym(e);this._bootstrapComponents=Hv(i.bootstrap),this._r3Injector=Rv(e,n,[{provide:nn,useValue:this},{provide:Na,useValue:this.componentFactoryResolver},...r],je(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ru=class extends Gi{constructor(e){super(),this.moduleType=e}create(e){return new Nu(this.moduleType,e,[])}};var da=class extends nn{constructor(e){super(),this.componentFactoryResolver=new ua(this),this.instance=null;let n=new Oi([...e.providers,{provide:nn,useValue:this},{provide:Na,useValue:this.componentFactoryResolver}],e.parent||Qu(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Oa(t,e,n=null){return new da({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Ur=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ye(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ad(t,e,n){return t[e]=n}function Ty(t,e){return t[e]}function rn(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Pu(t,e,n,r){let i=rn(t,e,n);return rn(t,e+1,r)||i}function SS(t,e,n,r,i){let o=Pu(t,e,n,r);return rn(t,e+2,i)||o}function MS(t,e,n,r,i,o){let s=Pu(t,e,n,r);return Pu(t,e+2,i,o)||s}function AS(t){return(t.flags&32)===32}function xS(t,e,n,r,i,o,s,a,c){let l=e.consts,u=Sa(e,t,4,s||null,na(l,a));ay(e,n,u,na(l,c)),ad(e,u);let d=u.tView=Dd(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function Ou(t,e,n,r,i,o,s,a){let c=Y(),l=St(),u=t+Ze,d=l.firstCreatePass?xS(u,l,c,e,n,r,i,o,s):l.data[u];Ki(d,!1);let f=NS(l,c,d,t);od()&&_d(l,c,f,d),Ln(f,c);let h=uy(f,c,f,d);return c[u]=h,Ma(c,h),aS(h,d,c),Zu(d)&&ry(l,c,d),s!=null&&iy(c,d,a),Ou}var NS=RS;function RS(t,e,n,r){return sd(!0),e[Ie].createComment("")}function Sy(t,e,n,r){return rn(t,Ea(),n)?e+Wu(n)+r:Un}function PS(t,e,n){let r=Y(),i=Ea();if(rn(r,i,e)){let o=St(),s=_v();sy(o,s,r,t,e,r[Ie],n,!1)}return PS}function Em(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";Ed(t,n,o[s],s,r)}var ku=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Yl(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function OS(t,e,n){let r,i,o=0,s=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;o<=s&&o<=a;){let c=t.at(o),l=e[o],u=Yl(o,c,o,l,n);if(u!==0){u<0&&t.updateValue(o,l),o++;continue}let d=t.at(s),f=e[a],h=Yl(s,d,a,f,n);if(h!==0){h<0&&t.updateValue(s,f),s--,a--;continue}let p=n(o,c),m=n(s,d),_=n(o,l);if(Object.is(_,m)){let w=n(a,f);Object.is(w,p)?(t.swap(o,s),t.updateValue(s,f),a--,s--):t.move(s,o),t.updateValue(o,l),o++;continue}if(r??=new fa,i??=Im(t,o,s,n),Fu(t,r,o,_))t.updateValue(o,l),o++,s++;else if(i.has(_))r.set(p,t.detach(o)),s--;else{let w=t.create(o,e[o]);t.attach(o,w),o++,s++}}for(;o<=a;)Cm(t,r,n,o,e[o]),o++}else if(e!=null){let a=e[Symbol.iterator](),c=a.next();for(;!c.done&&o<=s;){let l=t.at(o),u=c.value,d=Yl(o,l,o,u,n);if(d!==0)d<0&&t.updateValue(o,u),o++,c=a.next();else{r??=new fa,i??=Im(t,o,s,n);let f=n(o,u);if(Fu(t,r,o,f))t.updateValue(o,u),o++,s++,c=a.next();else if(!i.has(f))t.attach(o,t.create(o,u)),o++,s++,c=a.next();else{let h=n(o,l);r.set(h,t.detach(o)),s--}}}for(;!c.done;)Cm(t,r,n,t.length,c.value),c=a.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(a=>{t.destroy(a)})}function Fu(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function Cm(t,e,n,r,i){if(Fu(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function Im(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var fa=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function wU(t,e,n){Bn("NgControlFlow");let r=Y(),i=Ea(),o=Uu(r,Ze+t),s=0;if(rn(r,i,e)){let a=W(null);try{if(my(o,s),e!==-1){let c=Bu(r[O],Ze+e),l=Wi(o,c.tView.ssrId),u=Aa(r,c,n,{dehydratedView:l});xa(o,u,s,$i(c,l))}}finally{W(a)}}else{let a=gy(o,s);a!==void 0&&(a[De]=n)}}var Lu=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Ee}};function DU(t,e){return e}var ju=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function EU(t,e,n,r,i,o,s,a,c,l,u,d,f){Bn("NgControlFlow");let h=c!==void 0,p=Y(),m=a?s.bind(p[ut][De]):s,_=new ju(h,m);p[Ze+t]=_,Ou(t+1,e,n,r,i,o),h&&Ou(t+2,c,l,u,d,f)}var Vu=class extends ku{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Ee}at(e){return this.getLView(e)[De].$implicit}attach(e,n){let r=n[ki];this.needsIndexUpdate||=e!==this.length,xa(this.lContainer,n,e,$i(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,kS(this.lContainer,e)}create(e,n){let r=Wi(this.lContainer,this.templateTNode.tView.ssrId);return Aa(this.hostLView,this.templateTNode,new Lu(this.lContainer,n,e),{dehydratedView:r})}destroy(e){Ia(e[O],e)}updateValue(e,n){this.getLView(e)[De].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[De].$index=e}getLView(e){return FS(this.lContainer,e)}};function CU(t){let e=W(null),n=Ca();try{let r=Y(),i=r[O],o=r[n];if(o.liveCollection===void 0){let a=n+1,c=Uu(r,a),l=Bu(i,a);o.liveCollection=new Vu(c,r,l)}else o.liveCollection.reset();let s=o.liveCollection;if(OS(s,t,o.trackByFn),s.updateIndexes(),o.hasEmptyBlock){let a=Ea(),c=s.length===0;if(rn(r,a,c)){let l=n+2,u=Uu(r,l);if(c){let d=Bu(i,l),f=Wi(u,d.tView.ssrId),h=Aa(r,d,void 0,{dehydratedView:f});xa(u,h,0,$i(d,f))}else my(u,0)}}}finally{W(e)}}function Uu(t,e){return t[e]}function kS(t,e){return Bi(t,e)}function FS(t,e){return gy(t,e)}function Bu(t,e){return Xu(t,e)}function LS(t,e,n,r,i,o){let s=e.consts,a=na(s,i),c=Sa(e,t,2,r,a);return ay(e,n,c,na(s,o)),c.attrs!==null&&Eu(c,c.attrs,!1),c.mergedAttrs!==null&&Eu(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function My(t,e,n,r){let i=Y(),o=St(),s=Ze+t,a=i[Ie],c=o.firstCreatePass?LS(s,o,i,e,n,r):o.data[s],l=jS(o,i,c,a,e,t);i[s]=l;let u=Zu(c);return Ki(c,!0),Kv(a,l,c),!AS(c)&&od()&&_d(o,i,l,c),kI()===0&&Ln(l,i),FI(),u&&(ry(o,i,c),ny(o,c,i)),r!==null&&iy(i,c),My}function Ay(){let t=mt();fv()?$I():(t=t.parent,Ki(t,!1));let e=t;VI(e)&&UI(),LI();let n=St();return n.firstCreatePass&&(ad(n,t),rv(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&eb(e)&&Em(n,e,Y(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&tb(e)&&Em(n,e,Y(),e.stylesWithoutHost,!1),Ay}function xd(t,e,n,r){return My(t,e,n,r),Ay(),xd}var jS=(t,e,n,r,i,o)=>(sd(!0),Wv(r,i,KI()));function IU(){return Y()}var ha="en-US";var VS=ha;function US(t){typeof t=="string"&&(VS=t.toLowerCase().replace(/_/g,"-"))}function xy(t,e,n,r){let i=Y(),o=St(),s=mt();return $S(o,i,i[Ie],s,t,e,r),xy}function BS(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Fi],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function $S(t,e,n,r,i,o,s){let a=Zu(r),l=t.firstCreatePass&&hy(t),u=e[De],d=fy(e),f=!0;if(r.type&3||s){let m=gt(r,e),_=s?s(m):m,w=d.length,H=s?$=>s(bt($[r.index])):r.index,N=null;if(!s&&a&&(N=BS(t,e,i,r.index)),N!==null){let $=N.__ngLastListenerFn__||N;$.__ngNextListenerFn__=o,N.__ngLastListenerFn__=o,f=!1}else{o=Tm(r,e,u,o,!1);let $=n.listen(_,i,o);d.push(o,$),l&&l.push(i,H,w,w+1)}}else o=Tm(r,e,u,o,!1);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let m=p.length;if(m)for(let _=0;_<m;_+=2){let w=p[_],H=p[_+1],de=e[w][H].subscribe(o),Le=d.length;d.push(o,de),l&&l.push(i,r.index,Le,-(Le+1))}}}function bm(t,e,n,r){let i=W(null);try{return Et(6,e,n),n(r)!==!1}catch(o){return py(t,o),!1}finally{Et(7,e,n),W(i)}}function Tm(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?sn(t.index,e):e;Id(a);let c=bm(e,n,r,s),l=o.__ngNextListenerFn__;for(;l;)c=bm(e,n,l,s)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function bU(t=1){return QI(t)}function HS(t,e,n){return Ny(t,"",e,"",n),HS}function Ny(t,e,n,r,i){let o=Y(),s=Sy(o,e,n,r);if(s!==Un){let a=St(),c=_v();sy(a,c,o,t,s,o[Ie],i,!1)}return Ny}function TU(t,e,n){gS(t,e,n)}function WS(t){let e=Y(),n=St(),r=hv();nd(r+1);let i=Md(n,r);if(t.dirty&&xI(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=yS(e,r);t.reset(o,pb),t.notifyOnChanges()}return!0}return!1}function zS(){return hS(Y(),hv())}function SU(t){let e=HI();return AI(e,Ze+t)}function MU(t,e=""){let n=Y(),r=St(),i=t+Ze,o=r.firstCreatePass?Sa(r,i,1,e,null):r.data[i],s=GS(r,n,o,e,t);n[i]=s,od()&&_d(r,n,s,o),Ki(o,!1)}var GS=(t,e,n,r,i)=>(sd(!0),Nb(e[Ie],r));function qS(t){return Ry("",t,""),qS}function Ry(t,e,n){let r=Y(),i=Sy(r,t,e,n);return i!==Un&&wT(r,Ca(),i),Ry}var YS=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Zm(!1,r.type),o=i.length>0?Oa([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=C({token:e,providedIn:"environment",factory:()=>new e(v(Ce))});let t=e;return t})();function Py(t){Bn("NgStandalone"),t.getStandaloneInjector=e=>e.get(YS).getOrCreateStandaloneInjector(t)}function AU(t,e,n){let r=td()+t,i=Y();return i[r]===Un?Ad(i,r,n?e.call(n):e()):Ty(i,r)}function xU(t,e,n,r){return KS(Y(),td(),t,e,n,r)}function NU(t,e,n,r,i,o,s,a,c,l){let u=td()+t,d=Y(),f=MS(d,u,n,r,i,o);return SS(d,u+4,s,a,c)||f?Ad(d,u+7,l?e.call(l,n,r,i,o,s,a,c):e(n,r,i,o,s,a,c)):Ty(d,u+7)}function QS(t,e){let n=t[e];return n===Un?void 0:n}function KS(t,e,n,r,i,o){let s=e+n;return rn(t,s,i)?Ad(t,s+1,o?r.call(o,i):r(i)):QS(t,s+1)}var on=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Oy=new on("17.3.11"),ka=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var ky=new E("");function Xi(t){return!!t&&typeof t.then=="function"}function Fy(t){return!!t&&typeof t.subscribe=="function"}var Fa=new E(""),Ly=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=y(Fa,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Xi(s))r.push(s);else if(Fy(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ji=new E("");function ZS(){Wg(()=>{throw new M(600,!1)})}function XS(t){return t.isBoundToModule}function JS(t,e,n){try{let r=n();return Xi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Br=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=y(Pv),this.afterRenderEffectManager=y(Sd),this.externalTestViews=new Set,this.beforeRender=new ae,this.afterTick=new ae,this.componentTypes=[],this.components=[],this.isStable=y(Ur).hasPendingTasks.pipe(T(r=>!r)),this._injector=y(Ce)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof la;if(!this._injector.get(Ly).done){let h=!o&&qm(r),p=!1;throw new M(405,p)}let a;o?a=r:a=this._injector.get(Na).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=XS(a)?void 0:this._injector.get(nn),l=i||a.selector,u=a.create(an.NULL,[],l,c),d=u.location.nativeElement,f=u.injector.get(ky,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Ql(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new M(101,!1);let i=W(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,W(i)}}detectChangesInAttachedViews(r){let i=0,o=this.afterRenderEffectManager;for(;;){if(i===yy)throw new M(103,!1);if(r){let s=i===0;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:c}of this._views)e0(a,s,c)}if(i++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>$u(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>$u(s))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Ql(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Ji,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Ql(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new M(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ql(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function e0(t,e,n){!e&&!$u(t)||t0(t,n,e)}function $u(t){return ed(t)}function t0(t,e,n){let r;n?(r=0,t[A]|=1024):t[A]&64?r=0:r=1,_y(t,e,r)}var Hu=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},La=(()=>{let e=class e{compileModuleSync(r){return new Ru(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=Ym(r),s=Hv(o.declarations).reduce((a,c)=>{let l=tn(c);return l&&a.push(new kr(l)),a},[]);return new Hu(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var n0=(()=>{let e=class e{constructor(){this.zone=y(z),this.applicationRef=y(Br)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function r0(t){return[{provide:z,useFactory:t},{provide:Nr,multi:!0,useFactory:()=>{let e=y(n0,{optional:!0});return()=>e.initialize()}},{provide:Nr,multi:!0,useFactory:()=>{let e=y(a0);return()=>{e.initialize()}}},{provide:Pv,useFactory:i0}]}function i0(){let t=y(z),e=y(Tt);return n=>t.runOutsideAngular(()=>e.handleError(n))}function o0(t){let e=r0(()=>new z(s0(t)));return Fr([[],e])}function s0(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var a0=(()=>{let e=class e{constructor(){this.subscription=new se,this.initialized=!1,this.zone=y(z),this.pendingTasks=y(Ur)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{z.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{z.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function c0(){return typeof $localize<"u"&&$localize.locale||ha}var Nd=new E("",{providedIn:"root",factory:()=>y(Nd,V.Optional|V.SkipSelf)||c0()});var jy=new E("");var Ks=null;function l0(t=[],e){return an.create({name:e,providers:[{provide:ya,useValue:"platform"},{provide:jy,useValue:new Set([()=>Ks=null])},...t]})}function u0(t=[]){if(Ks)return Ks;let e=l0(t);return Ks=e,ZS(),d0(e),e}function d0(t){t.get(fd,null)?.forEach(n=>n())}function Rd(){return!1}var eo=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=f0;let t=e;return t})();function f0(t){return h0(mt(),Y(),(t&16)===16)}function h0(t,e,n){if(wa(t)&&!n){let r=sn(t.index,e);return new jn(r,r)}else if(t.type&47){let r=e[ut];return new jn(r,e)}return null}function Vy(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=u0(r),o=[o0(),...n||[]],a=new da({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(z);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(Tt,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:h=>{l.handleError(h)}})});let d=()=>a.destroy(),f=i.get(jy);return f.add(d),a.onDestroy(()=>{u.unsubscribe(),f.delete(d)}),JS(l,c,()=>{let h=a.get(Ly);return h.runInitializers(),h.donePromise.then(()=>{let p=a.get(Nd,ha);US(p||ha);let m=a.get(Br);return e!==void 0&&m.bootstrap(e),m})})})}catch(e){return Promise.reject(e)}}function Uy(t){let e=tn(t);if(!e)return null;let n=new kr(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Wy=null;function $r(){return Wy}function zy(t){Wy??=t}var ja=class{};var Te=new E(""),Fd=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>y(v0),providedIn:"platform"});let t=e;return t})(),Gy=new E(""),v0=(()=>{let e=class e extends Fd{constructor(){super(),this._doc=y(Te),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return $r().getBaseHref(this._doc)}onPopState(r){let i=$r().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=$r().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Ld(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function By(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function $t(t){return t&&t[0]!=="?"?"?"+t:t}var $n=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>y(jd),providedIn:"root"});let t=e;return t})(),qy=new E(""),jd=(()=>{let e=class e extends $n{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??y(Te).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Ld(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+$t(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+$t(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+$t(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(v(Fd),v(qy,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Yy=(()=>{let e=class e extends $n{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Ld(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+$t(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+$t(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(v(Fd),v(qy,8))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),Wr=(()=>{let e=class e{constructor(r){this._subject=new Ke,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=w0(By($y(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+$t(i))}normalize(r){return e.stripTrailingSlash(_0(this._basePath,$y(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+$t(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+$t(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=$t,e.joinWithSlash=Ld,e.stripTrailingSlash=By,e.\u0275fac=function(i){return new(i||e)(v($n))},e.\u0275prov=C({token:e,factory:()=>y0(),providedIn:"root"});let t=e;return t})();function y0(){return new Wr(v($n))}function _0(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function $y(t){return t.replace(/\/index.html$/,"")}function w0(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Va(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Pd=/\s+/,Hy=[],iB=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=Hy,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Pd):Hy}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Pd):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Pd).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)(Zi(cn),Zi(Ra))},e.\u0275dir=va({type:e,selectors:[["","ngClass",""]],inputs:{klass:[jt.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var Vd="browser",D0="server";function E0(t){return t===Vd}function zr(t){return t===D0}var Qy=(()=>{let e=class e{};e.\u0275prov=C({token:e,providedIn:"root",factory:()=>E0(y(be))?new Od(y(Te),window):new kd});let t=e;return t})(),Od=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=C0(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function C0(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var kd=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Hr=class{};var no=class{},Ba=class{},Hn=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Bd=class{encodeKey(e){return Ky(e)}encodeValue(e){return Ky(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function S0(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var M0=/%(\d[a-f0-9])/gi,A0={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ky(t){return encodeURIComponent(t).replace(M0,(e,n)=>A0[n]??e)}function Ua(t){return`${t}`}var un=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Bd,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=S0(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Ua):[Ua(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Ua(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Ua(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var $d=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function x0(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Zy(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Xy(t){return typeof Blob<"u"&&t instanceof Blob}function Jy(t){return typeof FormData<"u"&&t instanceof FormData}function N0(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var to=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(x0(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Hn,this.context??=new $d,!this.params)this.params=new un,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Zy(this.body)||Xy(this.body)||Jy(this.body)||N0(this.body)?this.body:this.body instanceof un?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Jy(this.body)?null:Xy(this.body)?this.body.type||null:Zy(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof un?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,u=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((f,h)=>f.set(h,e.setHeaders[h]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((f,h)=>f.set(h,e.setParams[h]),u)),new t(n,r,s,{params:u,headers:l,context:d,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},Gr=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Gr||{}),ro=class{constructor(e,n=Wa.Ok,r="OK"){this.headers=e.headers||new Hn,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Hd=class t extends ro{constructor(e={}){super(e),this.type=Gr.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},$a=class t extends ro{constructor(e={}){super(e),this.type=Gr.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ha=class extends ro{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Wa=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(Wa||{});function Ud(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var R0=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,o={}){let s;if(r instanceof to)s=r;else{let l;o.headers instanceof Hn?l=o.headers:l=new Hn(o.headers);let u;o.params&&(o.params instanceof un?u=o.params:u=new un({fromObject:o.params})),s=new to(r,i,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:u,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=I(s).pipe(Ft(l=>this.handler.handle(l)));if(r instanceof to||o.observe==="events")return a;let c=a.pipe(_e(l=>l instanceof $a));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(T(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(T(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(T(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(T(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new un().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,Ud(o,i))}post(r,i,o={}){return this.request("POST",r,Ud(o,i))}put(r,i,o={}){return this.request("PUT",r,Ud(o,i))}};e.\u0275fac=function(i){return new(i||e)(v(no))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();function P0(t,e){return e(t)}function O0(t,e,n){return(r,i)=>ht(n,()=>e(r,o=>t(o,i)))}var n_=new E(""),k0=new E(""),F0=new E("");var e_=(()=>{let e=class e extends no{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=y(Ur);let o=y(F0,{optional:!0});this.backend=o??r}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(n_),...this.injector.get(k0,[])]));this.chain=o.reduceRight((s,a)=>O0(s,a,this.injector),P0)}let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(xn(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(v(Ba),v(Ce))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();var L0=/^\)\]\}',?\n/;function j0(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var t_=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new M(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?K(i.\u0275loadImpl()):I(null)).pipe(X(()=>new F(s=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((_,w)=>a.setRequestHeader(_,w.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let _=r.detectContentTypeHeader();_!==null&&a.setRequestHeader("Content-Type",_)}if(r.responseType){let _=r.responseType.toLowerCase();a.responseType=_!=="json"?_:"text"}let c=r.serializeBody(),l=null,u=()=>{if(l!==null)return l;let _=a.statusText||"OK",w=new Hn(a.getAllResponseHeaders()),H=j0(a)||r.url;return l=new Hd({headers:w,status:a.status,statusText:_,url:H}),l},d=()=>{let{headers:_,status:w,statusText:H,url:N}=u(),$=null;w!==Wa.NoContent&&($=typeof a.response>"u"?a.responseText:a.response),w===0&&(w=$?Wa.Ok:0);let de=w>=200&&w<300;if(r.responseType==="json"&&typeof $=="string"){let Le=$;$=$.replace(L0,"");try{$=$!==""?JSON.parse($):null}catch(qt){$=Le,de&&(de=!1,$={error:qt,text:$})}}de?(s.next(new $a({body:$,headers:_,status:w,statusText:H,url:N||void 0})),s.complete()):s.error(new Ha({error:$,headers:_,status:w,statusText:H,url:N||void 0}))},f=_=>{let{url:w}=u(),H=new Ha({error:_,status:a.status||0,statusText:a.statusText||"Unknown Error",url:w||void 0});s.error(H)},h=!1,p=_=>{h||(s.next(u()),h=!0);let w={type:Gr.DownloadProgress,loaded:_.loaded};_.lengthComputable&&(w.total=_.total),r.responseType==="text"&&a.responseText&&(w.partialText=a.responseText),s.next(w)},m=_=>{let w={type:Gr.UploadProgress,loaded:_.loaded};_.lengthComputable&&(w.total=_.total),s.next(w)};return a.addEventListener("load",d),a.addEventListener("error",f),a.addEventListener("timeout",f),a.addEventListener("abort",f),r.reportProgress&&(a.addEventListener("progress",p),c!==null&&a.upload&&a.upload.addEventListener("progress",m)),a.send(c),s.next({type:Gr.Sent}),()=>{a.removeEventListener("error",f),a.removeEventListener("abort",f),a.removeEventListener("load",d),a.removeEventListener("timeout",f),r.reportProgress&&(a.removeEventListener("progress",p),c!==null&&a.upload&&a.upload.removeEventListener("progress",m)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(v(Hr))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),r_=new E(""),V0="XSRF-TOKEN",U0=new E("",{providedIn:"root",factory:()=>V0}),B0="X-XSRF-TOKEN",$0=new E("",{providedIn:"root",factory:()=>B0}),za=class{},H0=(()=>{let e=class e{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Va(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(v(Te),v(be),v(U0))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();function W0(t,e){let n=t.url.toLowerCase();if(!y(r_)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=y(za).getToken(),i=y($0);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}function vB(...t){let e=[R0,t_,e_,{provide:no,useExisting:e_},{provide:Ba,useExisting:t_},{provide:n_,useValue:W0,multi:!0},{provide:r_,useValue:!0},{provide:za,useClass:H0}];for(let n of t)e.push(...n.\u0275providers);return Fr(e)}var Gd=class extends ja{constructor(){super(...arguments),this.supportsDOMEvents=!0}},qd=class t extends Gd{static makeCurrent(){zy(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=z0();return n==null?null:G0(n)}resetBaseElement(){io=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Va(document.cookie,e)}},io=null;function z0(){return io=io||document.querySelector("base"),io?io.getAttribute("href"):null}function G0(t){return new URL(t,document.baseURI).pathname}var q0=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),Yd=new E(""),a_=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new M(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(v(Yd),v(z))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),Ga=class{constructor(e){this._doc=e}},Wd="ng-app-id",c_=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=zr(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Wd}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(Wd),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Wd,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(v(Te),v(dd),v(hd,8),v(be))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),zd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Kd=/%COMP%/g,l_="%COMP%",Y0=`_nghost-${l_}`,Q0=`_ngcontent-${l_}`,K0=!0,Z0=new E("",{providedIn:"root",factory:()=>K0});function X0(t){return Q0.replace(Kd,t)}function J0(t){return Y0.replace(Kd,t)}function u_(t,e){return e.map(n=>n.replace(Kd,t))}var i_=(()=>{let e=class e{constructor(r,i,o,s,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=zr(c),this.defaultRenderer=new oo(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===It.ShadowDom&&(i=re(D({},i),{encapsulation:It.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof qa?o.applyToHost(r):o instanceof so&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case It.Emulated:s=new qa(l,u,i,this.appId,d,a,c,f);break;case It.ShadowDom:return new Qd(l,u,r,i,a,c,this.nonce,f);default:s=new so(l,u,i,d,a,c,f);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(v(a_),v(c_),v(dd),v(Z0),v(Te),v(be),v(z),v(hd))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),oo=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(zd[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(o_(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(o_(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new M(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=zd[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=zd[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Vn.DashCase|Vn.Important)?e.style.setProperty(n,r,i&Vn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Vn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=$r().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function o_(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Qd=class extends oo{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=u_(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},so=class extends oo{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?u_(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},qa=class extends so{constructor(e,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,n,r,o,s,a,c,l),this.contentAttr=X0(l),this.hostAttr=J0(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},eM=(()=>{let e=class e extends Ga{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(v(Te))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})(),s_=["alt","control","meta","shift"],tM={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nM={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},rM=(()=>{let e=class e extends Ga{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$r().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),s_.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=tM[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),s_.forEach(a=>{if(a!==o){let c=nM[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(v(Te))},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();function $B(t,e){return Vy(D({rootComponent:t},iM(e)))}function iM(t){return{appProviders:[...lM,...t?.providers??[]],platformProviders:cM}}function oM(){qd.makeCurrent()}function sM(){return new Tt}function aM(){return Vv(document),document}var cM=[{provide:be,useValue:Vd},{provide:fd,useValue:oM,multi:!0},{provide:Te,useFactory:aM,deps:[]}];var lM=[{provide:ya,useValue:"root"},{provide:Tt,useFactory:sM,deps:[]},{provide:Yd,useClass:eM,multi:!0,deps:[Te,z,be]},{provide:Yd,useClass:rM,multi:!0,deps:[Te]},i_,c_,a_,{provide:zi,useExisting:i_},{provide:Hr,useClass:q0,deps:[]},[]];var d_=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(v(Te))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var k="primary",Co=Symbol("RouteTitle"),tf=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Zr(t){return new tf(t)}function dM(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function fM(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Mt(t[n],e[n]))return!1;return!0}function Mt(t,e){let n=t?nf(t):void 0,r=e?nf(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!w_(t[i],e[i]))return!1;return!0}function nf(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function w_(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function D_(t){return t.length>0?t[t.length-1]:null}function gn(t){return Tl(t)?t:Xi(t)?K(Promise.resolve(t)):I(t)}var hM={exact:C_,subset:I_},E_={exact:pM,subset:gM,ignored:()=>!0};function f_(t,e,n){return hM[n.paths](t.root,e.root,n.matrixParams)&&E_[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function pM(t,e){return Mt(t,e)}function C_(t,e,n){if(!zn(t.segments,e.segments)||!Ka(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!C_(t.children[r],e.children[r],n))return!1;return!0}function gM(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>w_(t[n],e[n]))}function I_(t,e,n){return b_(t,e,e.segments,n)}function b_(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!zn(i,n)||e.hasChildren()||!Ka(i,n,r))}else if(t.segments.length===n.length){if(!zn(t.segments,n)||!Ka(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!I_(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!zn(t.segments,i)||!Ka(t.segments,i,r)||!t.children[k]?!1:b_(t.children[k],e,o,r)}}function Ka(t,e,n){return e.every((r,i)=>E_[n](t[i].parameters,r.parameters))}var dn=class{constructor(e=new Q([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Zr(this.queryParams),this._queryParamMap}toString(){return yM.serialize(this)}},Q=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Za(this)}},Wn=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Zr(this.parameters),this._parameterMap}toString(){return S_(this)}};function mM(t,e){return zn(t,e)&&t.every((n,r)=>Mt(n.parameters,e[r].parameters))}function zn(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function vM(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===k&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==k&&(n=n.concat(e(i,r)))}),n}var Io=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>new po,providedIn:"root"});let t=e;return t})(),po=class{parse(e){let n=new of(e);return new dn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ao(e.root,!0)}`,r=DM(e.queryParams),i=typeof e.fragment=="string"?`#${_M(e.fragment)}`:"";return`${n}${r}${i}`}},yM=new po;function Za(t){return t.segments.map(e=>S_(e)).join("/")}function ao(t,e){if(!t.hasChildren())return Za(t);if(e){let n=t.children[k]?ao(t.children[k],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==k&&r.push(`${i}:${ao(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=vM(t,(r,i)=>i===k?[ao(t.children[k],!1)]:[`${i}:${ao(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[k]!=null?`${Za(t)}/${n[0]}`:`${Za(t)}/(${n.join("//")})`}}function T_(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ya(t){return T_(t).replace(/%3B/gi,";")}function _M(t){return encodeURI(t)}function rf(t){return T_(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xa(t){return decodeURIComponent(t)}function h_(t){return Xa(t.replace(/\+/g,"%20"))}function S_(t){return`${rf(t.path)}${wM(t.parameters)}`}function wM(t){return Object.entries(t).map(([e,n])=>`;${rf(e)}=${rf(n)}`).join("")}function DM(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ya(n)}=${Ya(i)}`).join("&"):`${Ya(n)}=${Ya(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var EM=/^[^\/()?;#]+/;function Zd(t){let e=t.match(EM);return e?e[0]:""}var CM=/^[^\/()?;=#]+/;function IM(t){let e=t.match(CM);return e?e[0]:""}var bM=/^[^=?&#]+/;function TM(t){let e=t.match(bM);return e?e[0]:""}var SM=/^[^&#]+/;function MM(t){let e=t.match(SM);return e?e[0]:""}var of=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Q([],{}):new Q([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[k]=new Q(e,n)),r}parseSegment(){let e=Zd(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new M(4009,!1);return this.capture(e),new Wn(Xa(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=IM(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Zd(this.remaining);i&&(r=i,this.capture(r))}e[Xa(n)]=Xa(r)}parseQueryParam(e){let n=TM(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=MM(this.remaining);s&&(r=s,this.capture(r))}let i=h_(n),o=h_(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Zd(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new M(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=k);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[k]:new Q([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new M(4011,!1)}};function M_(t){return t.segments.length>0?new Q([],{[k]:t}):t}function A_(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=A_(i);if(r===k&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Q(t.segments,e);return AM(n)}function AM(t){if(t.numberOfChildren===1&&t.children[k]){let e=t.children[k];return new Q(t.segments.concat(e.segments),e.children)}return t}function Xr(t){return t instanceof dn}function xM(t,e,n=null,r=null){let i=x_(t);return N_(i,e,n,r)}function x_(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new Q(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=M_(r);return e??i}function N_(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Xd(i,i,i,n,r);let o=NM(e);if(o.toRoot())return Xd(i,i,new Q([],{}),n,r);let s=RM(o,i,t),a=s.processChildren?uo(s.segmentGroup,s.index,o.commands):P_(s.segmentGroup,s.index,o.commands);return Xd(i,s.segmentGroup,a,n,r)}function Ja(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function go(t){return typeof t=="object"&&t!=null&&t.outlets}function Xd(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;t===e?s=n:s=R_(t,e,n);let a=M_(A_(s));return new dn(a,o,i)}function R_(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=R_(o,e,n)}),new Q(t.segments,r)}var ec=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ja(r[0]))throw new M(4003,!1);let i=r.find(go);if(i&&i!==D_(r))throw new M(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function NM(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new ec(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new ec(n,e,r)}var Qr=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function RM(t,e,n){if(t.isAbsolute)return new Qr(e,!0,0);if(!n)return new Qr(e,!1,NaN);if(n.parent===null)return new Qr(n,!0,0);let r=Ja(t.commands[0])?0:1,i=n.segments.length-1+r;return PM(n,i,t.numberOfDoubleDots)}function PM(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new M(4005,!1);i=r.segments.length}return new Qr(r,!1,i-o)}function OM(t){return go(t[0])?t[0].outlets:{[k]:t}}function P_(t,e,n){if(t??=new Q([],{}),t.segments.length===0&&t.hasChildren())return uo(t,e,n);let r=kM(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Q(t.segments.slice(0,r.pathIndex),{});return o.children[k]=new Q(t.segments.slice(r.pathIndex),t.children),uo(o,0,i)}else return r.match&&i.length===0?new Q(t.segments,{}):r.match&&!t.hasChildren()?sf(t,e,n):r.match?uo(t,0,i):sf(t,e,n)}function uo(t,e,n){if(n.length===0)return new Q(t.segments,{});{let r=OM(n),i={};if(Object.keys(r).some(o=>o!==k)&&t.children[k]&&t.numberOfChildren===1&&t.children[k].segments.length===0){let o=uo(t.children[k],e,n);return new Q(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=P_(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Q(t.segments,i)}}function kM(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(go(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!g_(c,l,s))return o;r+=2}else{if(!g_(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function sf(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(go(o)){let c=FM(o.outlets);return new Q(r,c)}if(i===0&&Ja(n[0])){let c=t.segments[e];r.push(new Wn(c.path,p_(n[0]))),i++;continue}let s=go(o)?o.outlets[k]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Ja(a)?(r.push(new Wn(s,p_(a))),i+=2):(r.push(new Wn(s,{})),i++)}return new Q(r,{})}function FM(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=sf(new Q([],{}),0,r))}),e}function p_(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function g_(t,e,n){return t==n.path&&Mt(e,n.parameters)}var fo="imperative",pe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(pe||{}),Xe=class{constructor(e,n){this.id=e,this.url=n}},Jr=class extends Xe{constructor(e,n,r="imperative",i=null){super(e,n),this.type=pe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ht=class extends Xe{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=pe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ue=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ue||{}),tc=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(tc||{}),fn=class extends Xe{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=pe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},hn=class extends Xe{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=pe.NavigationSkipped}},mo=class extends Xe{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=pe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},nc=class extends Xe{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=pe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},af=class extends Xe{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=pe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cf=class extends Xe{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=pe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},lf=class extends Xe{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=pe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},uf=class extends Xe{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=pe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},df=class{constructor(e){this.route=e,this.type=pe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ff=class{constructor(e){this.route=e,this.type=pe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},hf=class{constructor(e){this.snapshot=e,this.type=pe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pf=class{constructor(e){this.snapshot=e,this.type=pe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gf=class{constructor(e){this.snapshot=e,this.type=pe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mf=class{constructor(e){this.snapshot=e,this.type=pe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rc=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=pe.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},vo=class{},yo=class{constructor(e){this.url=e}};var vf=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new bo,this.attachRef=null}},bo=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new vf,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ic=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=yf(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=yf(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=_f(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return _f(e,this._root).map(n=>n.value)}};function yf(t,e){if(t===e.value)return e;for(let n of e.children){let r=yf(t,n);if(r)return r}return null}function _f(t,e){if(t===e.value)return[e];for(let n of e.children){let r=_f(t,n);if(r.length)return r.unshift(e),r}return[]}var Ve=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Yr(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var oc=class extends ic{constructor(e,n){super(e),this.snapshot=n,Af(this,e)}toString(){return this.snapshot.toString()}};function O_(t){let e=LM(t),n=new ye([new Wn("",{})]),r=new ye({}),i=new ye({}),o=new ye({}),s=new ye(""),a=new Gn(n,r,o,s,i,k,t,e.root);return a.snapshot=e.root,new oc(new Ve(a,[]),e)}function LM(t){let e={},n={},r={},i="",o=new _o([],e,r,i,n,k,t,null,{});return new sc("",new Ve(o,[]))}var Gn=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(T(l=>l[Co]))??I(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(T(e=>Zr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(T(e=>Zr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Mf(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:D(D({},e.params),t.params),data:D(D({},e.data),t.data),resolve:D(D(D(D({},t.data),e.data),i?.data),t._resolvedData)}:r={params:D({},t.params),data:D({},t.data),resolve:D(D({},t.data),t._resolvedData??{})},i&&F_(i)&&(r.resolve[Co]=i.title),r}var _o=class{get title(){return this.data?.[Co]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Zr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Zr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},sc=class extends ic{constructor(e,n){super(n),this.url=e,Af(this,n)}toString(){return k_(this._root)}};function Af(t,e){e.value._routerState=t,e.children.forEach(n=>Af(t,n))}function k_(t){let e=t.children.length>0?` { ${t.children.map(k_).join(", ")} } `:"";return`${t.value}${e}`}function Jd(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Mt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Mt(e.params,n.params)||t.paramsSubject.next(n.params),fM(e.url,n.url)||t.urlSubject.next(n.url),Mt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function wf(t,e){let n=Mt(t.params,e.params)&&mM(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||wf(t.parent,e.parent))}function F_(t){return typeof t.title=="string"||t.title===null}var jM=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=k,this.activateEvents=new Ke,this.deactivateEvents=new Ke,this.attachEvents=new Ke,this.detachEvents=new Ke,this.parentContexts=y(bo),this.location=y(Vr),this.changeDetector=y(eo),this.environmentInjector=y(Ce),this.inputBinder=y(uc,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new M(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new M(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new M(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new M(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Df(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=va({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Da]});let t=e;return t})(),Df=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Gn?this.route:e===bo?this.childContexts:this.parent.get(e,n)}},uc=new E(""),m_=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=Si([i.queryParams,i.params,i.data]).pipe(X(([s,a,c],l)=>(c=D(D(D({},s),a),c),l===0?I(c):Promise.resolve(c)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=Uy(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();function VM(t,e,n){let r=wo(t,e._root,n?n._root:void 0);return new oc(r,e)}function wo(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=UM(t,e,n);return new Ve(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>wo(t,a)),s}}let r=BM(e.value),i=e.children.map(o=>wo(t,o));return new Ve(r,i)}}function UM(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return wo(t,r,i);return wo(t,r)})}function BM(t){return new Gn(new ye(t.url),new ye(t.params),new ye(t.queryParams),new ye(t.fragment),new ye(t.data),t.outlet,t.component,t)}var L_="ngNavigationCancelingError";function j_(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Xr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=V_(!1,Ue.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function V_(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[L_]=!0,n.cancellationCode=e,n}function $M(t){return U_(t)&&Xr(t.url)}function U_(t){return!!t&&t[L_]}var HM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Wm({type:e,selectors:[["ng-component"]],standalone:!0,features:[Py],decls:1,vars:0,template:function(i,o){i&1&&xd(0,"router-outlet")},dependencies:[jM],encapsulation:2});let t=e;return t})();function WM(t,e){return t.providers&&!t._injector&&(t._injector=Oa(t.providers,e,`Route: ${t.path}`)),t._injector??e}function xf(t){let e=t.children&&t.children.map(xf),n=e?re(D({},t),{children:e}):D({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==k&&(n.component=HM),n}function At(t){return t.outlet||k}function zM(t,e){let n=t.filter(r=>At(r)===e);return n.push(...t.filter(r=>At(r)!==e)),n}function To(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var GM=(t,e,n,r)=>T(i=>(new Ef(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Ef=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Jd(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Yr(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Yr(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Yr(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Yr(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new mf(o.value.snapshot))}),e.children.length&&this.forwardEvent(new pf(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Jd(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Jd(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=To(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},ac=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Kr=class{constructor(e,n){this.component=e,this.route=n}};function qM(t,e,n){let r=t._root,i=e?e._root:null;return co(r,i,n,[r.value])}function YM(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ti(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Nm(t)?t:e.get(t):r}function co(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Yr(e);return t.children.forEach(s=>{QM(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ho(a,n.getContext(s),i)),i}function QM(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=KM(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new ac(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?co(t,e,a?a.children:null,r,i):co(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Kr(a.outlet.component,s))}else s&&ho(e,a,i),i.canActivateChecks.push(new ac(r)),o.component?co(t,null,a?a.children:null,r,i):co(t,null,n,r,i);return i}function KM(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!zn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!zn(t.url,e.url)||!Mt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!wf(t,e)||!Mt(t.queryParams,e.queryParams);case"paramsChange":default:return!wf(t,e)}}function ho(t,e,n){let r=Yr(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ho(s,e.children.getContext(o),n):ho(s,null,n):ho(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Kr(e.outlet.component,i)):n.canDeactivateChecks.push(new Kr(null,i)):n.canDeactivateChecks.push(new Kr(null,i))}function So(t){return typeof t=="function"}function ZM(t){return typeof t=="boolean"}function XM(t){return t&&So(t.canLoad)}function JM(t){return t&&So(t.canActivate)}function eA(t){return t&&So(t.canActivateChild)}function tA(t){return t&&So(t.canDeactivate)}function nA(t){return t&&So(t.canMatch)}function B_(t){return t instanceof nt||t?.name==="EmptyError"}var Qa=Symbol("INITIAL_VALUE");function ei(){return X(t=>Si(t.map(e=>e.pipe(Lt(1),Pl(Qa)))).pipe(T(e=>{for(let n of e)if(n!==!0){if(n===Qa)return Qa;if(n===!1||n instanceof dn)return n}return!0}),_e(e=>e!==Qa),Lt(1)))}function rA(t,e){return oe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?I(re(D({},n),{guardsResult:!0})):iA(s,r,i,t).pipe(oe(a=>a&&ZM(a)?oA(r,o,t,e):I(a)),T(a=>re(D({},n),{guardsResult:a})))})}function iA(t,e,n,r){return K(t).pipe(oe(i=>uA(i.component,i.route,n,e,r)),qe(i=>i!==!0,!0))}function oA(t,e,n,r){return K(e).pipe(Ft(i=>vr(aA(i.route.parent,r),sA(i.route,r),lA(t,i.path,n),cA(t,i.route,n))),qe(i=>i!==!0,!0))}function sA(t,e){return t!==null&&e&&e(new gf(t)),I(!0)}function aA(t,e){return t!==null&&e&&e(new hf(t)),I(!0)}function cA(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return I(!0);let i=r.map(o=>Fs(()=>{let s=To(e)??n,a=ti(o,s),c=JM(a)?a.canActivate(e,t):ht(s,()=>a(e,t));return gn(c).pipe(qe())}));return I(i).pipe(ei())}function lA(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>YM(s)).filter(s=>s!==null).map(s=>Fs(()=>{let a=s.guards.map(c=>{let l=To(s.node)??n,u=ti(c,l),d=eA(u)?u.canActivateChild(r,t):ht(l,()=>u(r,t));return gn(d).pipe(qe())});return I(a).pipe(ei())}));return I(o).pipe(ei())}function uA(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return I(!0);let s=o.map(a=>{let c=To(e)??i,l=ti(a,c),u=tA(l)?l.canDeactivate(t,e,n,r):ht(c,()=>l(t,e,n,r));return gn(u).pipe(qe())});return I(s).pipe(ei())}function dA(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return I(!0);let o=i.map(s=>{let a=ti(s,t),c=XM(a)?a.canLoad(e,n):ht(t,()=>a(e,n));return gn(c)});return I(o).pipe(ei(),$_(r))}function $_(t){return wl(ce(e=>{if(Xr(e))throw j_(t,e)}),T(e=>e===!0))}function fA(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return I(!0);let o=i.map(s=>{let a=ti(s,t),c=nA(a)?a.canMatch(e,n):ht(t,()=>a(e,n));return gn(c)});return I(o).pipe(ei(),$_(r))}var Do=class{constructor(e){this.segmentGroup=e||null}},cc=class extends Error{constructor(e){super(),this.urlTree=e}};function qr(t){return mr(new Do(t))}function hA(t){return mr(new M(4e3,!1))}function pA(t){return mr(V_(!1,Ue.GuardRejected))}var Cf=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return I(r);if(i.numberOfChildren>1||!i.children[k])return hA(e.redirectTo);i=i.children[k]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new cc(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new dn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Q(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new M(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},If={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gA(t,e,n,r,i){let o=Nf(t,e,n);return o.matched?(r=WM(e,r),fA(r,e,n,i).pipe(T(s=>s===!0?o:D({},If)))):I(o)}function Nf(t,e,n){if(e.path==="**")return mA(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?D({},If):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||dM)(n,t,e);if(!i)return D({},If);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?D(D({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function mA(t){return{matched:!0,parameters:t.length>0?D_(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function v_(t,e,n,r){return n.length>0&&_A(t,n,r)?{segmentGroup:new Q(e,yA(r,new Q(n,t.children))),slicedSegments:[]}:n.length===0&&wA(t,n,r)?{segmentGroup:new Q(t.segments,vA(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Q(t.segments,t.children),slicedSegments:n}}function vA(t,e,n,r){let i={};for(let o of n)if(dc(t,e,o)&&!r[At(o)]){let s=new Q([],{});i[At(o)]=s}return D(D({},r),i)}function yA(t,e){let n={};n[k]=e;for(let r of t)if(r.path===""&&At(r)!==k){let i=new Q([],{});n[At(r)]=i}return n}function _A(t,e,n){return n.some(r=>dc(t,e,r)&&At(r)!==k)}function wA(t,e,n){return n.some(r=>dc(t,e,r))}function dc(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function DA(t,e,n,r){return At(t)!==r&&(r===k||!dc(e,n,t))?!1:Nf(e,t,n).matched}function EA(t,e,n){return e.length===0&&!t.children[n]}var bf=class{};function CA(t,e,n,r,i,o,s="emptyOnly"){return new Tf(t,e,n,r,i,s,o).recognize()}var IA=31,Tf=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Cf(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new M(4002,`'${e.segmentGroup}'`)}recognize(){let e=v_(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(T(n=>{let r=new _o([],Object.freeze({}),Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,{},k,this.rootComponentType,null,{}),i=new Ve(r,n),o=new sc("",i),s=xM(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,k).pipe(Zt(r=>{if(r instanceof cc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Do?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Mf(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(T(o=>o instanceof Ve?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return K(i).pipe(Ft(o=>{let s=r.children[o],a=zM(n,o);return this.processSegmentGroup(e,a,s,o)}),wr((o,s)=>(o.push(...s),o)),Xt(null),xl(),oe(o=>{if(o===null)return qr(r);let s=H_(o);return bA(s),I(s)}))}processSegment(e,n,r,i,o,s){return K(n).pipe(Ft(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(Zt(c=>{if(c instanceof Do)return I(null);throw c}))),qe(a=>!!a),Zt(a=>{if(B_(a))return EA(r,i,o)?I(new bf):qr(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return DA(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):qr(i):qr(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=Nf(n,i,o);if(!a)return qr(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>IA&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,d).pipe(oe(f=>this.processSegment(e,r,n,f.concat(u),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=gA(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(X(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(X(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:f}=a,h=new _o(u,f,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,SA(r),At(r),r.component??r._loadedComponent??null,r,MA(r)),{segmentGroup:p,slicedSegments:m}=v_(n,u,d,c);if(m.length===0&&p.hasChildren())return this.processChildren(l,c,p).pipe(T(w=>w===null?null:new Ve(h,w)));if(c.length===0&&m.length===0)return I(new Ve(h,[]));let _=At(r)===o;return this.processSegment(l,c,p,m,_?k:o,!0).pipe(T(w=>new Ve(h,w instanceof Ve?[w]:[])))}))):qr(n)))}getChildConfig(e,n,r){return n.children?I({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?I({routes:n._loadedRoutes,injector:n._loadedInjector}):dA(e,n,r,this.urlSerializer).pipe(oe(i=>i?this.configLoader.loadChildren(e,n).pipe(ce(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):pA(n))):I({routes:[],injector:e})}};function bA(t){t.sort((e,n)=>e.value.outlet===k?-1:n.value.outlet===k?1:e.value.outlet.localeCompare(n.value.outlet))}function TA(t){let e=t.value.routeConfig;return e&&e.path===""}function H_(t){let e=[],n=new Set;for(let r of t){if(!TA(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=H_(r.children);e.push(new Ve(r.value,i))}return e.filter(r=>!n.has(r))}function SA(t){return t.data||{}}function MA(t){return t.resolve||{}}function AA(t,e,n,r,i,o){return oe(s=>CA(t,e,n,r,s.extractedUrl,i,o).pipe(T(({state:a,tree:c})=>re(D({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function xA(t,e){return oe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return I(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of W_(c))s.add(l);let a=0;return K(s).pipe(Ft(c=>o.has(c)?NA(c,r,t,e):(c.data=Mf(c,c.parent,t).resolve,I(void 0))),ce(()=>a++),_r(1),oe(c=>a===s.size?I(n):xe))})}function W_(t){let e=t.children.map(n=>W_(n)).flat();return[t,...e]}function NA(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!F_(i)&&(o[Co]=i.title),RA(o,t,e,r).pipe(T(s=>(t._resolvedData=s,t.data=Mf(t,t.parent,n).resolve,null)))}function RA(t,e,n,r){let i=nf(t);if(i.length===0)return I({});let o={};return K(i).pipe(oe(s=>PA(t[s],e,n,r).pipe(qe(),ce(a=>{o[s]=a}))),_r(1),Ml(o),Zt(s=>B_(s)?xe:mr(s)))}function PA(t,e,n,r){let i=To(e)??r,o=ti(t,i),s=o.resolve?o.resolve(e,n):ht(i,()=>o(e,n));return gn(s)}function ef(t){return X(e=>{let n=t(e);return n?K(n).pipe(T(()=>e)):I(e)})}var z_=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===k);return i}getResolvedTitleForRoute(r){return r.data[Co]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>y(OA),providedIn:"root"});let t=e;return t})(),OA=(()=>{let e=class e extends z_{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(v(d_))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Mo=new E("",{providedIn:"root",factory:()=>({})}),Eo=new E(""),Rf=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=y(La)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return I(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=gn(r.loadComponent()).pipe(T(G_),ce(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),xn(()=>{this.componentLoaders.delete(r)})),o=new dr(i,()=>new ae).pipe(ur());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return I({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=kA(i,this.compiler,r,this.onLoadEndListener).pipe(xn(()=>{this.childrenLoaders.delete(i)})),a=new dr(s,()=>new ae).pipe(ur());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function kA(t,e,n,r){return gn(t.loadChildren()).pipe(T(G_),oe(i=>i instanceof Gi||Array.isArray(i)?I(i):K(e.compileModuleAsync(i))),T(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Eo,[],{optional:!0,self:!0}).flat()),{routes:s.map(xf),injector:o}}))}function FA(t){return t&&typeof t=="object"&&"default"in t}function G_(t){return FA(t)?t.default:t}var Pf=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>y(LA),providedIn:"root"});let t=e;return t})(),LA=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),q_=new E(""),Y_=new E("");function jA(t,e,n){let r=t.get(Y_),i=t.get(Te);return t.get(z).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),VA(t))),{onViewTransitionCreated:c}=r;return c&&ht(t,()=>c({transition:a,from:e,to:n})),s})}function VA(t){return new Promise(e=>{Pa(e,{injector:t})})}var Of=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ae,this.transitionAbortSubject=new ae,this.configLoader=y(Rf),this.environmentInjector=y(Ce),this.urlSerializer=y(Io),this.rootContexts=y(bo),this.location=y(Wr),this.inputBindingEnabled=y(uc,{optional:!0})!==null,this.titleStrategy=y(z_),this.options=y(Mo,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=y(Pf),this.createViewTransition=y(q_,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>I(void 0),this.rootComponentType=null;let r=o=>this.events.next(new df(o)),i=o=>this.events.next(new ff(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(re(D(D({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new ye({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:fo,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(_e(s=>s.id!==0),T(s=>re(D({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),X(s=>{let a=!1,c=!1;return I(s).pipe(X(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ue.SupersededByNewNavigation),xe;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?re(D({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new hn(l.id,this.urlSerializer.serialize(l.rawUrl),f,tc.IgnoredSameUrlNavigation)),l.resolve(null),xe}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return I(l).pipe(X(f=>{let h=this.transitions?.getValue();return this.events.next(new Jr(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),h!==this.transitions?.getValue()?xe:Promise.resolve(f)}),AA(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ce(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=re(D({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let h=new nc(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(h)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:f,extractedUrl:h,source:p,restoredState:m,extras:_}=l,w=new Jr(f,this.urlSerializer.serialize(h),p,m);this.events.next(w);let H=O_(this.rootComponentType).snapshot;return this.currentTransition=s=re(D({},l),{targetSnapshot:H,urlAfterRedirects:h,extras:re(D({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,I(s)}else{let f="";return this.events.next(new hn(l.id,this.urlSerializer.serialize(l.extractedUrl),f,tc.IgnoredByUrlHandlingStrategy)),l.resolve(null),xe}}),ce(l=>{let u=new af(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),T(l=>(this.currentTransition=s=re(D({},l),{guards:qM(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),rA(this.environmentInjector,l=>this.events.next(l)),ce(l=>{if(s.guardsResult=l.guardsResult,Xr(l.guardsResult))throw j_(this.urlSerializer,l.guardsResult);let u=new cf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),_e(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Ue.GuardRejected),!1)),ef(l=>{if(l.guards.canActivateChecks.length)return I(l).pipe(ce(u=>{let d=new lf(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),X(u=>{let d=!1;return I(u).pipe(xA(this.paramsInheritanceStrategy,this.environmentInjector),ce({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",Ue.NoDataFromResolver)}}))}),ce(u=>{let d=new uf(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),ef(l=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(ce(h=>{d.component=h}),T(()=>{})));for(let h of d.children)f.push(...u(h));return f};return Si(u(l.targetSnapshot.root)).pipe(Xt(null),Lt(1))}),ef(()=>this.afterPreactivation()),X(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?K(d).pipe(T(()=>s)):I(s)}),T(l=>{let u=VM(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=re(D({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),ce(()=>{this.events.next(new vo)}),GM(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Lt(1),ce({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ht(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Ol(this.transitionAbortSubject.pipe(ce(l=>{throw l}))),xn(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",Ue.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Zt(l=>{if(c=!0,U_(l))this.events.next(new fn(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),$M(l)?this.events.next(new yo(l.url)):s.resolve(!1);else{this.events.next(new mo(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return xe}))}))}cancelNavigationTransition(r,i,o){let s=new fn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function UA(t){return t!==fo}var BA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>y($A),providedIn:"root"});let t=e;return t})(),Sf=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},$A=(()=>{let e=class e extends Sf{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=ld(e)))(o||e)}})(),e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Q_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:()=>y(HA),providedIn:"root"});let t=e;return t})(),HA=(()=>{let e=class e extends Q_{constructor(){super(...arguments),this.location=y(Wr),this.urlSerializer=y(Io),this.options=y(Mo,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=y(Pf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new dn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=O_(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Jr)this.stateMemento=this.createStateMemento();else if(r instanceof hn)this.rawUrlTree=i.initialUrl;else if(r instanceof nc){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof vo?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof fn&&(r.code===Ue.GuardRejected||r.code===Ue.NoDataFromResolver)?this.restoreHistory(i):r instanceof mo?this.restoreHistory(i,!0):r instanceof Ht&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=D(D({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=D(D({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=ld(e)))(o||e)}})(),e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),lo=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(lo||{});function K_(t,e){t.events.pipe(_e(n=>n instanceof Ht||n instanceof fn||n instanceof mo||n instanceof hn),T(n=>n instanceof Ht||n instanceof hn?lo.COMPLETE:(n instanceof fn?n.code===Ue.Redirect||n.code===Ue.SupersededByNewNavigation:!1)?lo.REDIRECTING:lo.FAILED),_e(n=>n!==lo.REDIRECTING),Lt(1)).subscribe(()=>{e()})}function WA(t){throw t}var zA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},GA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},pn=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=y(ka),this.stateManager=y(Q_),this.options=y(Mo,{optional:!0})||{},this.pendingTasks=y(Ur),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=y(Of),this.urlSerializer=y(Io),this.location=y(Wr),this.urlHandlingStrategy=y(Pf),this._events=new ae,this.errorHandler=this.options.errorHandler||WA,this.navigated=!1,this.routeReuseStrategy=y(BA),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=y(Eo,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!y(uc,{optional:!0}),this.eventsSubscription=new se,this.isNgZoneEnabled=y(z)instanceof z&&z.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof fn&&i.code!==Ue.Redirect&&i.code!==Ue.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ht)this.navigated=!0;else if(i instanceof yo){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||UA(o.source)};this.scheduleNavigation(a,fo,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}YA(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=D({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(xf),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=D(D({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let h=o?o.snapshot:this.routerState.snapshot.root;f=x_(h)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),f=this.currentUrlTree.root}return N_(f,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Xr(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,fo,null,i)}navigate(r,i={skipLocationChange:!1}){return qA(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=D({},zA):i===!1?o=D({},GA):o=i,Xr(r))return f_(this.currentUrlTree,r,o);let s=this.parseUrl(r);return f_(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((f,h)=>{c=f,l=h});let d=this.pendingTasks.add();return K_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function qA(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new M(4008,!1)}function YA(t){return!(t instanceof vo)&&!(t instanceof yo)}var lc=class{};var QA=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(_e(r=>r instanceof Ht),Ft(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Oa(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return K(o).pipe(Kt())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=I(null);let s=o.pipe(oe(a=>a===null?I(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return K([s,a]).pipe(Kt())}else return s})}};e.\u0275fac=function(i){return new(i||e)(v(pn),v(La),v(Ce),v(lc),v(Rf))},e.\u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Z_=new E(""),KA=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=y(Ce),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Jr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Ht?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof hn&&r.code===tc.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof rc&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>Oe(this,null,function*(){yield new Promise(o=>{setTimeout(()=>{o()}),Pa(()=>{o()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new rc(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){Xv()},e.\u0275prov=C({token:e,factory:e.\u0275fac});let t=e;return t})();function l$(t,...e){return Fr([{provide:Eo,multi:!0,useValue:t},[],{provide:Gn,useFactory:X_,deps:[pn]},{provide:Ji,multi:!0,useFactory:J_},e.map(n=>n.\u0275providers)])}function X_(t){return t.routerState.root}function Ao(t,e){return{\u0275kind:t,\u0275providers:e}}function J_(){let t=y(an);return e=>{let n=t.get(Br);if(e!==n.components[0])return;let r=t.get(pn),i=t.get(ew);t.get(kf)===1&&r.initialNavigation(),t.get(tw,null,V.Optional)?.setUpPreloading(),t.get(Z_,null,V.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var ew=new E("",{factory:()=>new ae}),kf=new E("",{providedIn:"root",factory:()=>1});function ZA(){return Ao(2,[{provide:kf,useValue:0},{provide:Fa,multi:!0,deps:[an],useFactory:e=>{let n=e.get(Gy,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(pn),o=e.get(ew);K_(i,()=>{r(!0)}),e.get(Of).afterPreactivation=()=>(r(!0),o.closed?I(void 0):o),i.initialNavigation()}))}}])}function XA(){return Ao(3,[{provide:Fa,multi:!0,useFactory:()=>{let e=y(pn);return()=>{e.setUpLocationChangeListener()}}},{provide:kf,useValue:2}])}var tw=new E("");function JA(t){return Ao(0,[{provide:tw,useExisting:QA},{provide:lc,useExisting:t}])}function ex(){return Ao(8,[m_,{provide:uc,useExisting:m_}])}function tx(t){let e=[{provide:q_,useValue:jA},{provide:Y_,useValue:D({skipNextTransition:!!t?.skipInitialTransition},t)}];return Ao(9,e)}var y_=new E("ROUTER_FORROOT_GUARD"),nx=[Wr,{provide:Io,useClass:po},pn,bo,{provide:Gn,useFactory:X_,deps:[pn]},Rf,[]],u$=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[nx,[],{provide:Eo,multi:!0,useValue:r},{provide:y_,useFactory:sx,deps:[[pn,new Yi,new jm]]},{provide:Mo,useValue:i||{}},i?.useHash?ix():ox(),rx(),i?.preloadingStrategy?JA(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?ax(i):[],i?.bindToComponentInputs?ex().\u0275providers:[],i?.enableViewTransitions?tx().\u0275providers:[],cx()]}}static forChild(r){return{ngModule:e,providers:[{provide:Eo,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(v(y_,8))},e.\u0275mod=ft({type:e}),e.\u0275inj=dt({});let t=e;return t})();function rx(){return{provide:Z_,useFactory:()=>{let t=y(Qy),e=y(z),n=y(Mo),r=y(Of),i=y(Io);return n.scrollOffset&&t.setOffset(n.scrollOffset),new KA(i,r,t,e,n)}}}function ix(){return{provide:$n,useClass:Yy}}function ox(){return{provide:$n,useClass:jd}}function sx(t){return"guarded"}function ax(t){return[t.initialNavigation==="disabled"?XA().\u0275providers:[],t.initialNavigation==="enabledBlocking"?ZA().\u0275providers:[]]}var __=new E("");function cx(){return[{provide:__,useFactory:J_},{provide:Ji,multi:!0,useExisting:__}]}var lx="firebase",ux="10.12.3";Qt(lx,ux,"app");var nw="@firebase/database",rw="1.0.6";var qh="";function Yh(t){qh=t}var Hf=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),le(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:hs(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Wf=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ze(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var Ow=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Hf(e)}}catch{}return new Wf},Yn=Ow("localStorage"),zf=Ow("sessionStorage");var oi=new or("@firebase/database"),kw=function(){let t=1;return function(){return t++}}(),Fw=function(t){let e=ag(t),n=new sg;n.update(e);let r=n.digest();return fs.encodeByteArray(r)},Jo=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Jo.apply(null,r):typeof r=="object"?e+=le(r):e+=r,e+=" "}return e},Qn=null,iw=!0,Lw=function(t,e){g(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(oi.logLevel=cg.VERBOSE,Qn=oi.log.bind(oi),e&&zf.set("logging_enabled",!0)):typeof t=="function"?Qn=t:(Qn=null,zf.remove("logging_enabled"))},ge=function(...t){if(iw===!0&&(iw=!1,Qn===null&&zf.get("logging_enabled")===!0&&Lw(!0)),Qn){let e=Jo.apply(null,t);Qn(e)}},es=function(t){return function(...e){ge(t,...e)}},Gf=function(...t){let e="FIREBASE INTERNAL ERROR: "+Jo(...t);oi.error(e)},Rt=function(...t){let e=`FIREBASE FATAL ERROR: ${Jo(...t)}`;throw oi.error(e),new Error(e)},Se=function(...t){let e="FIREBASE WARNING: "+Jo(...t);oi.warn(e)},dx=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Se("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Vc=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},fx=function(t){if(wt()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},_n="[MIN_NAME]",Wt="[MAX_NAME]",Zn=function(t,e){if(t===e)return 0;if(t===_n||e===Wt)return-1;if(e===_n||t===Wt)return 1;{let n=ow(t),r=ow(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},hx=function(t,e){return t===e?0:t<e?-1:1},xo=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+le(e))},Qh=function(t){if(typeof t!="object"||t===null)return le(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=le(e[r]),n+=":",n+=Qh(t[e[r]]);return n+="}",n},jw=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function me(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var Vw=function(t){g(!Vc(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,o,s,a,c;t===0?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},px=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},gx=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function mx(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var vx=new RegExp("^-?(0*)\\d{1,10}$"),yx=-2147483648,_x=2147483647,ow=function(t){if(vx.test(t)){let e=Number(t);if(e>=yx&&e<=_x)return e}return null},pi=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Se("Exception was thrown by user callback.",n),e},Math.floor(0))}},wx=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Oo=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var qf=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Se(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Yf=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ge("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Se(e)}},ko=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),hc="5",Uw="v",Bw="s",$w="r",Hw="f",Ww=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,zw="ls",Gw="p",Qf="ac",qw="websocket",Yw="long_polling";var pc=class{constructor(e,n,r,i,o=!1,s="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Yn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Yn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function Dx(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Qw(t,e,n){g(typeof e=="string","typeof type must == string"),g(typeof n=="object","typeof params must == object");let r;if(e===qw)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Yw)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Dx(t)&&(n.ns=t.namespace);let i=[];return me(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var Kf=class{constructor(){this.counters_={}}incrementCounter(e,n=1){ze(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Zp(this.counters_)}};var Ff={},Lf={};function Kh(t){let e=t.toString();return Ff[e]||(Ff[e]=new Kf),Ff[e]}function Ex(t,e){let n=t.toString();return Lf[n]||(Lf[n]=e()),Lf[n]}var Zf=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&pi(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var sw="start",Cx="close",Ix="pLPCommand",bx="pRTLPCB",Kw="id",Zw="pw",Xw="ser",Tx="cb",Sx="seg",Mx="ts",Ax="d",xx="dframe",Jw=1870,eD=30,Nx=Jw-eD,Rx=25e3,Px=3e4,Vo=class t{constructor(e,n,r,i,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=es(e),this.stats_=Kh(n),this.urlFn=c=>(this.appCheckToken&&(c[Qf]=this.appCheckToken),Qw(n,Yw,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Zf(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Px)),fx(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Xf((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===sw)this.id=a,this.password=c;else if(s===Cx)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[sw]="t",r[Xw]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Tx]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Uw]=hc,this.transportSessionId&&(r[Bw]=this.transportSessionId),this.lastSessionId&&(r[zw]=this.lastSessionId),this.applicationId&&(r[Gw]=this.applicationId),this.appCheckToken&&(r[Qf]=this.appCheckToken),typeof location<"u"&&location.hostname&&Ww.test(location.hostname)&&(r[$w]=Hw);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return wt()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!px()&&!gx()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=le(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Kp(n),i=jw(r,Nx);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(wt())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[xx]="t",r[Kw]=e,r[Zw]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=le(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Xf=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,wt())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=kw(),window[Ix+this.uniqueCallbackIdentifier]=e,window[bx+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){ge("frame writing exception"),a.stack&&ge(a.stack),ge(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ge("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Kw]=this.myID,e[Zw]=this.myPW,e[Xw]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+eD+r.length<=Jw;){let s=this.pendingSegs.shift();r=r+"&"+Sx+i+"="+s.seg+"&"+Mx+i+"="+s.ts+"&"+Ax+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Rx)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,n){wt()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ge("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var Ox=16384,kx=45e3,gc=null;typeof MozWebSocket<"u"?gc=MozWebSocket:typeof WebSocket<"u"&&(gc=WebSocket);var ri=(()=>{class t{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=es(this.connId),this.stats_=Kh(r),this.connURL=t.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[Uw]=hc,!wt()&&typeof location<"u"&&location.hostname&&Ww.test(location.hostname)&&(a[$w]=Hw),r&&(a[Bw]=r),i&&(a[zw]=i),o&&(a[Qf]=o),s&&(a[Gw]=s),Qw(n,qw,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Yn.set("previous_websocket_failure",!0);try{let i;if(wt()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${hc}/${qh}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new gc(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&gc!==null&&!t.forceDisallow_}static previouslyFailed(){return Yn.isInMemoryStorage||Yn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Yn.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=hs(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(g(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=le(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=jw(r,Ox);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(kx))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),tD=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Vo,ri]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=ri&&ri.isAvailable(),i=r&&!ri.previouslyFailed();if(n.webSocketOnly&&(r||Se("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ri];else{let o=this.transports_=[];for(let s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),Fx=6e4,Lx=5e3,jx=10*1024,Vx=100*1024,jf="t",aw="d",Ux="s",cw="r",Bx="e",lw="o",uw="a",dw="n",fw="p",$x="h",Jf=class{constructor(e,n,r,i,o,s,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=es("c:"+this.id+":"),this.transportManager_=new tD(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Oo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Vx?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>jx?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(jf in e){let n=e[jf];n===uw?this.upgradeIfSecondaryHealthy_():n===cw?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===lw&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=xo("t",e),r=xo("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:fw,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:uw,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:dw,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=xo("t",e),r=xo("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=xo(jf,e);if(aw in e){let r=e[aw];if(n===$x){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===dw){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Ux?this.onConnectionShutdown_(r):n===cw?this.onReset_(r):n===Bx?Gf("Server Error: "+r):n===lw?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Gf("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),hc!==r&&Se("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Oo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Fx))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Oo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Lx))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:fw,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Yn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var mc=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var vc=class{constructor(e){this.allowedEvents_=e,this.listeners_={},g(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){g(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var yc=class t extends vc{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ul()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return g(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var hw=32,pw=768,q=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function G(){return new q("")}function L(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function wn(t){return t.pieces_.length-t.pieceNum_}function ee(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new q(t.pieces_,e)}function Zh(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Hx(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Uo(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function nD(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new q(e,0)}function ne(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof q)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new q(n,0)}function j(t){return t.pieceNum_>=t.pieces_.length}function Ne(t,e){let n=L(t),r=L(e);if(n===null)return e;if(n===r)return Ne(ee(t),ee(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Wx(t,e){let n=Uo(t,0),r=Uo(e,0);for(let i=0;i<n.length&&i<r.length;i++){let o=Zn(n[i],r[i]);if(o!==0)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Xh(t,e){if(wn(t)!==wn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Je(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(wn(t)>wn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var eh=class{constructor(e,n){this.errorPrefix_=n,this.parts_=Uo(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ei(this.parts_[r]);rD(this)}};function zx(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ei(e),rD(t)}function Gx(t){let e=t.parts_.pop();t.byteLength_-=Ei(e),t.parts_.length>0&&(t.byteLength_-=1)}function rD(t){if(t.byteLength_>pw)throw new Error(t.errorPrefix_+"has a key path longer than "+pw+" bytes ("+t.byteLength_+").");if(t.parts_.length>hw)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+hw+") or object contains a cycle "+qn(t))}function qn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var th=class t extends vc{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return g(e==="visible","Unknown event type: "+e),[this.visible_]}};var No=1e3,qx=60*5*1e3,gw=30*1e3,Yx=1.3,Qx=3e4,Kx="server_kill",mw=3,Jh=(()=>{class t extends mc{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=es("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=No,this.maxReconnectDelay_=qx,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!wt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");th.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&yc.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(le(s)),g(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new fe,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),g(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&ze(n,"w")){let i=Yt(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();Se(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||ig(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=gw)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=rg(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+le(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Gf("Unrecognized action received from server: "+le(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){g(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=No,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=No,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Qx&&(this.reconnectDelay_=No),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Yx)}this.onConnectStatus_(!1)}establishConnection_(){return Oe(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){g(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,h]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?ge("getToken() completed but was canceled"):(ge("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,c=new Jf(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,p=>{Se(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(Kx)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&Se(f),l())}}})}interrupt(n){ge("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){ge("Resuming connection for reason: "+n),delete this.interruptReasons_[n],ps(this.interruptReasons_)&&(this.reconnectDelay_=No,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>Qh(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new q(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){ge("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=mw&&(this.reconnectDelay_=gw,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){ge("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=mw&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";wt()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+qh.replace(/\./g,"-")]=1,ul()?n["framework.cordova"]=1:eg()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=yc.getInstance().currentlyOnline();return ps(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),U=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var si=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new U(_n,e),i=new U(_n,n);return this.compare(r,i)!==0}minPost(){return U.MIN}};var fc,_c=class extends si{static get __EMPTY_NODE(){return fc}static set __EMPTY_NODE(e){fc=e}compare(e,n){return Zn(e.name,n.name)}isDefinedOn(e){throw ir("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return U.MIN}maxPost(){return new U(Wt,fc)}makePost(e,n){return g(typeof e=="string","KeyIndex indexValue must always be a string."),new U(e,fc)}toString(){return".key"}},Nt=new _c;var ii=class{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?r(e.key,n):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},vt=(()=>{class t{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??t.RED,this.left=o??et.EMPTY_NODE,this.right=s??et.EMPTY_NODE}copy(n,r,i,o,s){return new t(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return et.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return et.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),nh=class{copy(e,n,r,i,o){return this}insert(e,n,r){return new vt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},et=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,vt.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,vt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ii(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ii(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ii(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ii(this.root_,null,this.comparator_,!0,e)}};et.EMPTY_NODE=new nh;function Zx(t,e){return Zn(t.name,e.name)}function ep(t,e){return Zn(t,e)}var rh;function Xx(t){rh=t}var iD=function(t){return typeof t=="number"?"number:"+Vw(t):"string:"+t},oD=function(t){if(t.isLeafNode()){let e=t.val();g(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ze(e,".sv"),"Priority must be a string or number.")}else g(t===rh||t.isEmpty(),"priority of unexpected type.");g(t===rh||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var vw,ai=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,g(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),oD(this.priorityNode_)}static set __childrenNodeConstructor(n){vw=n}static get __childrenNodeConstructor(){return vw}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return j(n)?this:L(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=L(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(g(i!==".priority"||wn(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ee(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+iD(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=Vw(this.value_):n+=this.value_,this.lazyHash_=Fw(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(g(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),s=t.VALUE_TYPE_ORDER.indexOf(i);return g(o>=0,"Unknown leaf type: "+r),g(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),sD,aD;function Jx(t){sD=t}function eN(t){aD=t}var ih=class extends si{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?Zn(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return U.MIN}maxPost(){return new U(Wt,new ai("[PRIORITY-POST]",aD))}makePost(e,n){let r=sD(e);return new U(n,new ai("[PRIORITY-POST]",r))}toString(){return".priority"}},te=new ih;var tN=Math.log(2),oh=class{constructor(e){let n=o=>parseInt(Math.log(o)/tN,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},wc=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,f;if(u===0)return null;if(u===1)return d=t[c],f=n?n(d):d,new vt(f,d.node,vt.BLACK,null,null);{let h=parseInt(u/2,10)+c,p=i(c,h),m=i(h+1,l);return d=t[h],f=n?n(d):d,new vt(f,d.node,vt.BLACK,p,m)}},o=function(c){let l=null,u=null,d=t.length,f=function(p,m){let _=d-p,w=d;d-=p;let H=i(_+1,w),N=t[_],$=n?n(N):N;h(new vt($,N.node,m,null,H))},h=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){let m=c.nextBitIsOne(),_=Math.pow(2,c.count-(p+1));m?f(_,vt.BLACK):(f(_,vt.BLACK),f(_,vt.RED))}return u},s=new oh(t.length),a=o(s);return new et(r||e,a)};var Vf,ni={},ci=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return g(ni&&te,"ChildrenNode.ts has not been loaded"),Vf=Vf||new t({".priority":ni},{".priority":te}),Vf}get(e){let n=Yt(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof et?n:null}hasIndex(e){return ze(this.indexSet_,e.toString())}addIndex(e,n){g(e!==Nt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(U.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=wc(r,e.getCompare()):a=ni;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=Di(this.indexes_,(i,o)=>{let s=Yt(this.indexSet_,o);if(g(s,"Missing index implementation for "+o),i===ni)if(s.isDefinedOn(e.node)){let a=[],c=n.getIterator(U.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),wc(a,s.getCompare())}else return ni;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new U(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Di(this.indexes_,i=>{if(i===ni)return i;{let o=n.get(e.name);return o?i.remove(new U(e.name,o)):i}});return new t(r,this.indexSet_)}};var Ro,P=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&oD(this.priorityNode_),this.children_.isEmpty()&&g(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ro||(Ro=new t(new et(ep),null,ci.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ro}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Ro:r}}getChild(n){let r=L(n);return r===null?this:this.getImmediateChild(r).getChild(ee(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(g(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new U(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Ro:this.priorityNode_;return new t(o,a,s)}}updateChild(n,r){let i=L(n);if(i===null)return r;{g(L(n)!==".priority"||wn(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(ee(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(te,(a,c)=>{r[a]=c.val(n),i++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+iD(this.getPriority().val())+":"),this.forEachChild(te,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":Fw(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new U(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new U(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new U(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,U.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,U.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===ts?-1:0}withIndex(n){if(n===Nt||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Nt||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(te),o=r.getIterator(te),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Nt?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),sh=class extends P{constructor(){super(new et(ep),P.EMPTY_NODE,ci.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return P.EMPTY_NODE}isEmpty(){return!1}},ts=new sh;Object.defineProperties(U,{MIN:{value:new U(_n,P.EMPTY_NODE)},MAX:{value:new U(Wt,ts)}});_c.__EMPTY_NODE=P.EMPTY_NODE;ai.__childrenNodeConstructor=P;Xx(ts);eN(ts);var nN=!0;function ie(t,e=null){if(t===null)return P.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),g(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new ai(n,ie(e))}if(!(t instanceof Array)&&nN){let n=[],r=!1;if(me(t,(s,a)=>{if(s.substring(0,1)!=="."){let c=ie(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new U(s,c)))}}),n.length===0)return P.EMPTY_NODE;let o=wc(n,Zx,s=>s.name,ep);if(r){let s=wc(n,te.getCompare());return new P(o,ie(e),new ci({".priority":s},{".priority":te}))}else return new P(o,ie(e),ci.Default)}else{let n=P.EMPTY_NODE;return me(t,(r,i)=>{if(ze(t,r)&&r.substring(0,1)!=="."){let o=ie(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(ie(e))}}Jx(ie);var Bo=class extends si{constructor(e){super(),this.indexPath_=e,g(!j(e)&&L(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?Zn(e.name,n.name):o}makePost(e,n){let r=ie(e),i=P.EMPTY_NODE.updateChild(this.indexPath_,r);return new U(n,i)}maxPost(){let e=P.EMPTY_NODE.updateChild(this.indexPath_,ts);return new U(Wt,e)}toString(){return Uo(this.indexPath_,0).join("/")}};var ah=class extends si{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Zn(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return U.MIN}maxPost(){return U.MAX}makePost(e,n){let r=ie(e);return new U(n,r)}toString(){return".value"}},tp=new ah;function cD(t){return{type:"value",snapshotNode:t}}function li(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function $o(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ho(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function rN(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Wo=class{constructor(e){this.index_=e}updateChild(e,n,r,i,o,s){g(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?e.hasChild(n)?s.trackChildChange($o(n,a)):g(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(li(n,r)):s.trackChildChange(Ho(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(te,(i,o)=>{n.hasChild(i)||r.trackChildChange($o(i,o))}),n.isLeafNode()||n.forEachChild(te,(i,o)=>{if(e.hasChild(i)){let s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(Ho(i,o,s))}else r.trackChildChange(li(i,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?P.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Dc=class t{constructor(e){this.indexedFilter_=new Wo(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,o,s){return this.matches(new U(n,r))||(r=P.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,s)}updateFullNode(e,n,r){n.isLeafNode()&&(n=P.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(P.EMPTY_NODE);let o=this;return n.forEachChild(te,(s,a)=>{o.matches(new U(s,a))||(i=i.updateImmediateChild(s,P.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var ch=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Dc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,o,s){return this.rangedFilter_.matches(new U(n,r))||(r=P.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,s):this.fullLimitUpdateChild_(e,n,r,o,s)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=P.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=P.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(P.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,P.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();let a=e;g(a.numChildren()===this.limit_,"");let c=new U(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),f=i.getChildAfterChild(this.index_,l,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);let h=f==null?1:s(f,c);if(u&&!r.isEmpty()&&h>=0)return o?.trackChildChange(Ho(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange($o(n,d));let m=a.updateImmediateChild(n,P.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange(li(f.name,f.node)),m.updateImmediateChild(f.name,f.node)):m}}else return r.isEmpty()?e:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange($o(l.name,l.node)),o.trackChildChange(li(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,P.EMPTY_NODE)):e}};var zo=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=te}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return g(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return g(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_n}hasEnd(){return this.endSet_}getIndexEndValue(){return g(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return g(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Wt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return g(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===te}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function iN(t){return t.loadsAllData()?new Wo(t.getIndex()):t.hasLimit()?new ch(t):new Dc(t)}function oN(t,e){let n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function sN(t,e){let n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function lh(t,e,n){let r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function aN(t,e,n){let r;return t.index_===Nt||n?r=lh(t,e,n):r=lh(t,e,Wt),r.startAfterSet_=!0,r}function uh(t,e,n){let r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function cN(t,e,n){let r;return t.index_===Nt||n?r=uh(t,e,n):r=uh(t,e,_n),r.endBeforeSet_=!0,r}function Uc(t,e){let n=t.copy();return n.index_=e,n}function yw(t){let e={};if(t.isDefault())return e;let n;if(t.index_===te?n="$priority":t.index_===tp?n="$value":t.index_===Nt?n="$key":(g(t.index_ instanceof Bo,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=le(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=le(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+le(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=le(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+le(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function _w(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==te&&(e.i=t.index_.toString()),e}var dh=class t extends mc{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=es("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(g(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=t.getListenId_(e,r),a={};this.listens_[s]=a;let c=yw(e._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),Yt(this.listens_,s)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=yw(e._queryParams),r=e._path.toString(),i=new fe;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+og(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=hs(a.responseText)}catch{Se("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Se("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var fh=class{constructor(){this.rootNode_=P.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Ec(){return{value:null,children:new Map}}function gi(t,e,n){if(j(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=L(e);t.children.has(r)||t.children.set(r,Ec());let i=t.children.get(r);e=ee(e),gi(i,e,n)}}function hh(t,e){if(j(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{let n=t.value;return t.value=null,n.forEachChild(te,(r,i)=>{gi(t,new q(r),i)}),hh(t,e)}}else if(t.children.size>0){let n=L(e);return e=ee(e),t.children.has(n)&&hh(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function ph(t,e,n){t.value!==null?n(e,t.value):lN(t,(r,i)=>{let o=new q(e.toString()+"/"+r);ph(i,o,n)})}function lN(t,e){t.children.forEach((n,r)=>{e(r,n)})}var gh=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&me(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var ww=10*1e3,uN=30*1e3,dN=5*60*1e3,mh=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new gh(e);let r=ww+(uN-ww)*Math.random();Oo(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;me(e,(i,o)=>{o>0&&ze(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Oo(this.reportStats_.bind(this),Math.floor(Math.random()*2*dN))}};var xt=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(xt||{});function np(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function rp(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ip(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var vh=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=xt.ACK_USER_WRITE,this.source=np()}operationForChild(e){if(j(this.path)){if(this.affectedTree.value!=null)return g(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new q(e));return new t(G(),n,this.revert)}}else return g(L(this.path)===e,"operationForChild called for unrelated child."),new t(ee(this.path),this.affectedTree,this.revert)}};var Cc=class t{constructor(e,n){this.source=e,this.path=n,this.type=xt.LISTEN_COMPLETE}operationForChild(e){return j(this.path)?new t(this.source,G()):new t(this.source,ee(this.path))}};var ui=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=xt.OVERWRITE}operationForChild(e){return j(this.path)?new t(this.source,G(),this.snap.getImmediateChild(e)):new t(this.source,ee(this.path),this.snap)}};var Go=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=xt.MERGE}operationForChild(e){if(j(this.path)){let n=this.children.subtree(new q(e));return n.isEmpty()?null:n.value?new ui(this.source,G(),n.value):new t(this.source,G(),n)}else return g(L(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,ee(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Pt=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(j(e))return this.isFullyInitialized()&&!this.filtered_;let n=L(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var yh=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function fN(t,e,n,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(rN(s.childName,s.snapshotNode))}),Po(t,i,"child_removed",e,r,n),Po(t,i,"child_added",e,r,n),Po(t,i,"child_moved",o,r,n),Po(t,i,"child_changed",e,r,n),Po(t,i,"value",e,r,n),i}function Po(t,e,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>pN(t,a,c)),s.forEach(a=>{let c=hN(t,a,o);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function hN(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function pN(t,e,n){if(e.childName==null||n.childName==null)throw ir("Should only compare child_ events.");let r=new U(e.childName,e.snapshotNode),i=new U(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Bc(t,e){return{eventCache:t,serverCache:e}}function Fo(t,e,n,r){return Bc(new Pt(e,n,r),t.serverCache)}function lD(t,e,n,r){return Bc(t.eventCache,new Pt(e,n,r))}function Ic(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Kn(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Uf,gN=()=>(Uf||(Uf=new et(hx)),Uf),Re=class t{constructor(e,n=gN()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return me(e,(r,i)=>{n=n.set(new q(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:G(),value:this.value};if(j(e))return null;{let r=L(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(ee(e),n);return o!=null?{path:ne(new q(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(j(e))return this;{let n=L(e),r=this.children.get(n);return r!==null?r.subtree(ee(e)):new t(null)}}set(e,n){if(j(e))return new t(n,this.children);{let r=L(e),o=(this.children.get(r)||new t(null)).set(ee(e),n),s=this.children.insert(r,o);return new t(this.value,s)}}remove(e){if(j(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=L(e),r=this.children.get(n);if(r){let i=r.remove(ee(e)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new t(null):new t(this.value,o)}else return this}}get(e){if(j(e))return this.value;{let n=L(e),r=this.children.get(n);return r?r.get(ee(e)):null}}setTree(e,n){if(j(e))return n;{let r=L(e),o=(this.children.get(r)||new t(null)).setTree(ee(e),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new t(this.value,s)}}fold(e){return this.fold_(G(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(ne(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,G(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(j(e))return null;{let o=L(e),s=this.children.get(o);return s?s.findOnPath_(ee(e),ne(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,G(),n)}foreachOnPath_(e,n,r){if(j(e))return this;{this.value&&r(n,this.value);let i=L(e),o=this.children.get(i);return o?o.foreachOnPath_(ee(e),ne(n,i),r):new t(null)}}foreach(e){this.foreach_(G(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ne(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var yt=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Re(null))}};function Lo(t,e,n){if(j(e))return new yt(new Re(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=Ne(i,e);return o=o.updateChild(s,n),new yt(t.writeTree_.set(i,o))}else{let i=new Re(n),o=t.writeTree_.setTree(e,i);return new yt(o)}}}function _h(t,e,n){let r=t;return me(n,(i,o)=>{r=Lo(r,ne(e,i),o)}),r}function Dw(t,e){if(j(e))return yt.empty();{let n=t.writeTree_.setTree(e,new Re(null));return new yt(n)}}function wh(t,e){return Xn(t,e)!=null}function Xn(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ne(n.path,e)):null}function Ew(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(te,(r,i)=>{e.push(new U(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new U(r,i.value))}),e}function vn(t,e){if(j(e))return t;{let n=Xn(t,e);return n!=null?new yt(new Re(n)):new yt(t.writeTree_.subtree(e))}}function Dh(t){return t.writeTree_.isEmpty()}function di(t,e){return uD(G(),t.writeTree_,e)}function uD(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(g(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=uD(ne(t,i),o,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ne(t,".priority"),r)),n}}function $c(t,e){return pD(e,t)}function mN(t,e,n,r,i){g(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Lo(t.visibleWrites,e,n)),t.lastWriteId=r}function vN(t,e,n,r){g(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=_h(t.visibleWrites,e,n),t.lastWriteId=r}function yN(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function _N(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);g(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){let a=t.allWrites[s];a.visible&&(s>=n&&wN(a,r.path)?i=!1:Je(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return DN(t),!0;if(r.snap)t.visibleWrites=Dw(t.visibleWrites,r.path);else{let a=r.children;me(a,c=>{t.visibleWrites=Dw(t.visibleWrites,ne(r.path,c))})}return!0}else return!1}function wN(t,e){if(t.snap)return Je(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Je(ne(t.path,n),e))return!0;return!1}function DN(t){t.visibleWrites=dD(t.allWrites,EN,G()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function EN(t){return t.visible}function dD(t,e,n){let r=yt.empty();for(let i=0;i<t.length;++i){let o=t[i];if(e(o)){let s=o.path,a;if(o.snap)Je(n,s)?(a=Ne(n,s),r=Lo(r,a,o.snap)):Je(s,n)&&(a=Ne(s,n),r=Lo(r,G(),o.snap.getChild(a)));else if(o.children){if(Je(n,s))a=Ne(n,s),r=_h(r,a,o.children);else if(Je(s,n))if(a=Ne(s,n),j(a))r=_h(r,G(),o.children);else{let c=Yt(o.children,L(a));if(c){let l=c.getChild(ee(a));r=Lo(r,G(),l)}}}else throw ir("WriteRecord should have .snap or .children")}}return r}function fD(t,e,n,r,i){if(!r&&!i){let o=Xn(t.visibleWrites,e);if(o!=null)return o;{let s=vn(t.visibleWrites,e);if(Dh(s))return n;if(n==null&&!wh(s,G()))return null;{let a=n||P.EMPTY_NODE;return di(s,a)}}}else{let o=vn(t.visibleWrites,e);if(!i&&Dh(o))return n;if(!i&&n==null&&!wh(o,G()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Je(l.path,e)||Je(e,l.path))},a=dD(t.allWrites,s,e),c=n||P.EMPTY_NODE;return di(a,c)}}}function CN(t,e,n){let r=P.EMPTY_NODE,i=Xn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(te,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=vn(t.visibleWrites,e);return n.forEachChild(te,(s,a)=>{let c=di(vn(o,new q(s)),a);r=r.updateImmediateChild(s,c)}),Ew(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=vn(t.visibleWrites,e);return Ew(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function IN(t,e,n,r,i){g(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=ne(e,n);if(wh(t.visibleWrites,o))return null;{let s=vn(t.visibleWrites,o);return Dh(s)?i.getChild(n):di(s,i.getChild(n))}}function bN(t,e,n,r){let i=ne(e,n),o=Xn(t.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=vn(t.visibleWrites,i);return di(s,r.getNode().getImmediateChild(n))}else return null}function TN(t,e){return Xn(t.visibleWrites,e)}function SN(t,e,n,r,i,o,s){let a,c=vn(t.visibleWrites,e),l=Xn(c,G());if(l!=null)a=l;else if(n!=null)a=di(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function MN(){return{visibleWrites:yt.empty(),allWrites:[],lastWriteId:-1}}function bc(t,e,n,r){return fD(t.writeTree,t.treePath,e,n,r)}function op(t,e){return CN(t.writeTree,t.treePath,e)}function Cw(t,e,n,r){return IN(t.writeTree,t.treePath,e,n,r)}function Tc(t,e){return TN(t.writeTree,ne(t.treePath,e))}function AN(t,e,n,r,i,o){return SN(t.writeTree,t.treePath,e,n,r,i,o)}function sp(t,e,n){return bN(t.writeTree,t.treePath,e,n)}function hD(t,e){return pD(ne(t.treePath,e),t.writeTree)}function pD(t,e){return{treePath:t,writeTree:e}}var Eh=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;g(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),g(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,Ho(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,$o(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,li(r,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,Ho(r,e.snapshotNode,i.oldSnap));else throw ir("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Ch=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},gD=new Ch,qo=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Pt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return sp(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Kn(this.viewCache_),o=AN(this.writes_,i,n,1,r,e);return o.length===0?null:o[0]}};function xN(t){return{filter:t}}function NN(t,e){g(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),g(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function RN(t,e,n,r,i){let o=new Eh,s,a;if(n.type===xt.OVERWRITE){let l=n;l.source.fromUser?s=Ih(t,e,l.path,l.snap,r,i,o):(g(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!j(l.path),s=Sc(t,e,l.path,l.snap,r,i,a,o))}else if(n.type===xt.MERGE){let l=n;l.source.fromUser?s=ON(t,e,l.path,l.children,r,i,o):(g(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=bh(t,e,l.path,l.children,r,i,a,o))}else if(n.type===xt.ACK_USER_WRITE){let l=n;l.revert?s=LN(t,e,l.path,r,i,o):s=kN(t,e,l.path,l.affectedTree,r,i,o)}else if(n.type===xt.LISTEN_COMPLETE)s=FN(t,e,n.path,r,o);else throw ir("Unknown operation type: "+n.type);let c=o.getChanges();return PN(e,s,c),{viewCache:s,changes:c}}function PN(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Ic(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(cD(Ic(e)))}}function mD(t,e,n,r,i,o){let s=e.eventCache;if(Tc(r,n)!=null)return e;{let a,c;if(j(n))if(g(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=Kn(e),u=l instanceof P?l:P.EMPTY_NODE,d=op(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{let l=bc(r,Kn(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{let l=L(n);if(l===".priority"){g(wn(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=e.serverCache.getNode();let d=Cw(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=s.getNode()}else{let u=ee(n),d;if(s.isCompleteForChild(l)){c=e.serverCache.getNode();let f=Cw(r,n,s.getNode(),c);f!=null?d=s.getNode().getImmediateChild(l).updateChild(u,f):d=s.getNode().getImmediateChild(l)}else d=sp(r,l,e.serverCache);d!=null?a=t.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return Fo(e,a,s.isFullyInitialized()||j(n),t.filter.filtersNodes())}}function Sc(t,e,n,r,i,o,s,a){let c=e.serverCache,l,u=s?t.filter:t.filter.getIndexedFilter();if(j(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let h=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),h,null)}else{let h=L(n);if(!c.isCompleteForPath(n)&&wn(n)>1)return e;let p=ee(n),_=c.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?l=u.updatePriority(c.getNode(),_):l=u.updateChild(c.getNode(),h,_,p,gD,null)}let d=lD(e,l,c.isFullyInitialized()||j(n),u.filtersNodes()),f=new qo(i,d,o);return mD(t,d,n,i,f,a)}function Ih(t,e,n,r,i,o,s){let a=e.eventCache,c,l,u=new qo(i,e,o);if(j(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,s),c=Fo(e,l,!0,t.filter.filtersNodes());else{let d=L(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Fo(e,l,a.isFullyInitialized(),a.isFiltered());else{let f=ee(n),h=a.getNode().getImmediateChild(d),p;if(j(f))p=r;else{let m=u.getCompleteChild(d);m!=null?Zh(f)===".priority"&&m.getChild(nD(f)).isEmpty()?p=m:p=m.updateChild(f,r):p=P.EMPTY_NODE}if(h.equals(p))c=e;else{let m=t.filter.updateChild(a.getNode(),d,p,f,u,s);c=Fo(e,m,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Iw(t,e){return t.eventCache.isCompleteForChild(e)}function ON(t,e,n,r,i,o,s){let a=e;return r.foreach((c,l)=>{let u=ne(n,c);Iw(e,L(u))&&(a=Ih(t,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=ne(n,c);Iw(e,L(u))||(a=Ih(t,a,u,l,i,o,s))}),a}function bw(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function bh(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;j(n)?l=r:l=new Re(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){let h=e.serverCache.getNode().getImmediateChild(d),p=bw(t,h,f);c=Sc(t,c,new q(d),p,i,o,s,a)}}),l.children.inorderTraversal((d,f)=>{let h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){let p=e.serverCache.getNode().getImmediateChild(d),m=bw(t,p,f);c=Sc(t,c,new q(d),m,i,o,s,a)}}),c}function kN(t,e,n,r,i,o,s){if(Tc(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(j(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Sc(t,e,n,c.getNode().getChild(n),i,o,a,s);if(j(n)){let l=new Re(null);return c.getNode().forEachChild(Nt,(u,d)=>{l=l.set(new q(u),d)}),bh(t,e,n,l,i,o,a,s)}else return e}else{let l=new Re(null);return r.foreach((u,d)=>{let f=ne(n,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),bh(t,e,n,l,i,o,a,s)}}function FN(t,e,n,r,i){let o=e.serverCache,s=lD(e,o.getNode(),o.isFullyInitialized()||j(n),o.isFiltered());return mD(t,s,n,r,gD,i)}function LN(t,e,n,r,i,o){let s;if(Tc(r,n)!=null)return e;{let a=new qo(r,e,i),c=e.eventCache.getNode(),l;if(j(n)||L(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=bc(r,Kn(e));else{let d=e.serverCache.getNode();g(d instanceof P,"serverChildren would be complete if leaf node"),u=op(r,d)}u=u,l=t.filter.updateFullNode(c,u,o)}else{let u=L(n),d=sp(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,ee(n),a,o):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,P.EMPTY_NODE,ee(n),a,o):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=bc(r,Kn(e)),s.isLeafNode()&&(l=t.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||Tc(r,G())!=null,Fo(e,l,s,t.filter.filtersNodes())}}var Th=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Wo(r.getIndex()),o=iN(r);this.processor_=xN(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(P.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(P.EMPTY_NODE,a.getNode(),null),u=new Pt(c,s.isFullyInitialized(),i.filtersNodes()),d=new Pt(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Bc(d,u),this.eventGenerator_=new yh(this.query_)}get query(){return this.query_}};function jN(t){return t.viewCache_.serverCache.getNode()}function VN(t){return Ic(t.viewCache_)}function UN(t,e){let n=Kn(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!j(e)&&!n.getImmediateChild(L(e)).isEmpty())?n.getChild(e):null}function Tw(t){return t.eventRegistrations_.length===0}function BN(t,e){t.eventRegistrations_.push(e)}function Sw(t,e,n){let r=[];if(n){g(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){let s=t.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function Mw(t,e,n,r){e.type===xt.MERGE&&e.source.queryId!==null&&(g(Kn(t.viewCache_),"We should always have a full cache before handling merges"),g(Ic(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,o=RN(t.processor_,i,e,n,r);return NN(t.processor_,o.viewCache),g(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,vD(t,o.changes,o.viewCache.eventCache.getNode(),null)}function $N(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(te,(o,s)=>{r.push(li(o,s))}),n.isFullyInitialized()&&r.push(cD(n.getNode())),vD(t,r,n.getNode(),e)}function vD(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return fN(t.eventGenerator_,e,n,i)}var Mc,Ac=class{constructor(){this.views=new Map}};function HN(t){g(!Mc,"__referenceConstructor has already been defined"),Mc=t}function WN(){return g(Mc,"Reference.ts has not been loaded"),Mc}function zN(t){return t.views.size===0}function ap(t,e,n,r){let i=e.source.queryId;if(i!==null){let o=t.views.get(i);return g(o!=null,"SyncTree gave us an op for an invalid query."),Mw(o,e,n,r)}else{let o=[];for(let s of t.views.values())o=o.concat(Mw(s,e,n,r));return o}}function yD(t,e,n,r,i){let o=e._queryIdentifier,s=t.views.get(o);if(!s){let a=bc(n,i?r:null),c=!1;a?c=!0:r instanceof P?(a=op(n,r),c=!1):(a=P.EMPTY_NODE,c=!1);let l=Bc(new Pt(a,c,!1),new Pt(r,i,!1));return new Th(e,l)}return s}function GN(t,e,n,r,i,o){let s=yD(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),BN(s,n),$N(s,n)}function qN(t,e,n,r){let i=e._queryIdentifier,o=[],s=[],a=Dn(t);if(i==="default")for(let[c,l]of t.views.entries())s=s.concat(Sw(l,n,r)),Tw(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=t.views.get(i);c&&(s=s.concat(Sw(c,n,r)),Tw(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Dn(t)&&o.push(new(WN())(e._repo,e._path)),{removed:o,events:s}}function _D(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function yn(t,e){let n=null;for(let r of t.views.values())n=n||UN(r,e);return n}function wD(t,e){if(e._queryParams.loadsAllData())return Hc(t);{let r=e._queryIdentifier;return t.views.get(r)}}function DD(t,e){return wD(t,e)!=null}function Dn(t){return Hc(t)!=null}function Hc(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var xc;function YN(t){g(!xc,"__referenceConstructor has already been defined"),xc=t}function QN(){return g(xc,"Reference.ts has not been loaded"),xc}var KN=1,Nc=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Re(null),this.pendingWriteTree_=MN(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function cp(t,e,n,r,i){return mN(t.pendingWriteTree_,e,n,r,i),i?mi(t,new ui(np(),e,n)):[]}function ZN(t,e,n,r){vN(t.pendingWriteTree_,e,n,r);let i=Re.fromObject(n);return mi(t,new Go(np(),e,i))}function mn(t,e,n=!1){let r=yN(t.pendingWriteTree_,e);if(_N(t.pendingWriteTree_,e)){let o=new Re(null);return r.snap!=null?o=o.set(G(),!0):me(r.children,s=>{o=o.set(new q(s),!0)}),mi(t,new vh(r.path,o,n))}else return[]}function ns(t,e,n){return mi(t,new ui(rp(),e,n))}function XN(t,e,n){let r=Re.fromObject(n);return mi(t,new Go(rp(),e,r))}function JN(t,e){return mi(t,new Cc(rp(),e))}function eR(t,e,n){let r=lp(t,n);if(r){let i=up(r),o=i.path,s=i.queryId,a=Ne(o,e),c=new Cc(ip(s),a);return dp(t,o,c)}else return[]}function Rc(t,e,n,r,i=!1){let o=e._path,s=t.syncPointTree_.get(o),a=[];if(s&&(e._queryIdentifier==="default"||DD(s,e))){let c=qN(s,e,n,r);zN(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(o,(f,h)=>Dn(h));if(u&&!d){let f=t.syncPointTree_.subtree(o);if(!f.isEmpty()){let h=rR(f);for(let p=0;p<h.length;++p){let m=h[p],_=m.query,w=bD(t,m);t.listenProvider_.startListening(jo(_),Yo(t,_),w.hashFn,w.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(jo(e),null):l.forEach(f=>{let h=t.queryToTagMap.get(zc(f));t.listenProvider_.stopListening(jo(f),h)}))}iR(t,l)}return a}function ED(t,e,n,r){let i=lp(t,r);if(i!=null){let o=up(i),s=o.path,a=o.queryId,c=Ne(s,e),l=new ui(ip(a),c,n);return dp(t,s,l)}else return[]}function tR(t,e,n,r){let i=lp(t,r);if(i){let o=up(i),s=o.path,a=o.queryId,c=Ne(s,e),l=Re.fromObject(n),u=new Go(ip(a),c,l);return dp(t,s,u)}else return[]}function Sh(t,e,n,r=!1){let i=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(f,h)=>{let p=Ne(f,i);o=o||yn(h,p),s=s||Dn(h)});let a=t.syncPointTree_.get(i);a?(s=s||Dn(a),o=o||yn(a,G())):(a=new Ac,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=P.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((h,p)=>{let m=yn(p,G());m&&(o=o.updateImmediateChild(h,m))}));let l=DD(a,e);if(!l&&!e._queryParams.loadsAllData()){let f=zc(e);g(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");let h=oR();t.queryToTagMap.set(f,h),t.tagToQueryMap.set(h,f)}let u=$c(t.pendingWriteTree_,i),d=GN(a,e,n,u,o,c);if(!l&&!s&&!r){let f=wD(a,e);d=d.concat(sR(t,e,f))}return d}function Wc(t,e,n){let i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{let c=Ne(s,e),l=yn(a,c);if(l)return l});return fD(i,e,o,n,!0)}function nR(t,e){let n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=Ne(l,n);r=r||yn(u,d)});let i=t.syncPointTree_.get(n);i?r=r||yn(i,G()):(i=new Ac,t.syncPointTree_=t.syncPointTree_.set(n,i));let o=r!=null,s=o?new Pt(r,!0,!1):null,a=$c(t.pendingWriteTree_,e._path),c=yD(i,e,a,o?s.getNode():P.EMPTY_NODE,o);return VN(c)}function mi(t,e){return CD(e,t.syncPointTree_,null,$c(t.pendingWriteTree_,G()))}function CD(t,e,n,r){if(j(t.path))return ID(t,e,n,r);{let i=e.get(G());n==null&&i!=null&&(n=yn(i,G()));let o=[],s=L(t.path),a=t.operationForChild(s),c=e.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=hD(r,s);o=o.concat(CD(a,c,l,u))}return i&&(o=o.concat(ap(i,t,r,n))),o}}function ID(t,e,n,r){let i=e.get(G());n==null&&i!=null&&(n=yn(i,G()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=hD(r,s),u=t.operationForChild(s);u&&(o=o.concat(ID(u,a,c,l)))}),i&&(o=o.concat(ap(i,t,r,n))),o}function bD(t,e){let n=e.query,r=Yo(t,n);return{hashFn:()=>(jN(e)||P.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?eR(t,n._path,r):JN(t,n._path);{let o=mx(i,n);return Rc(t,n,null,o)}}}}function Yo(t,e){let n=zc(e);return t.queryToTagMap.get(n)}function zc(t){return t._path.toString()+"$"+t._queryIdentifier}function lp(t,e){return t.tagToQueryMap.get(e)}function up(t){let e=t.indexOf("$");return g(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new q(t.substr(0,e))}}function dp(t,e,n){let r=t.syncPointTree_.get(e);g(r,"Missing sync point for query tag that we're tracking");let i=$c(t.pendingWriteTree_,e);return ap(r,n,i,null)}function rR(t){return t.fold((e,n,r)=>{if(n&&Dn(n))return[Hc(n)];{let i=[];return n&&(i=_D(n)),me(r,(o,s)=>{i=i.concat(s)}),i}})}function jo(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(QN())(t._repo,t._path):t}function iR(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=zc(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function oR(){return KN++}function sR(t,e,n){let r=e._path,i=Yo(t,e),o=bD(t,n),s=t.listenProvider_.startListening(jo(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(r);if(i)g(!Dn(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!j(l)&&u&&Dn(u))return[Hc(u).query];{let f=[];return u&&(f=f.concat(_D(u).map(h=>h.query))),me(d,(h,p)=>{f=f.concat(p)}),f}});for(let l=0;l<c.length;++l){let u=c[l];t.listenProvider_.stopListening(jo(u),Yo(t,u))}}return s}var Mh=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},Ah=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=ne(this.path_,e);return new t(this.syncTree_,n)}node(){return Wc(this.syncTree_,this.path_)}},aR=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Aw=function(t,e,n){if(!t||typeof t!="object")return t;if(g(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return cR(t[".sv"],e,n);if(typeof t[".sv"]=="object")return lR(t[".sv"],e);g(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},cR=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:g(!1,"Unexpected server value: "+t)}},lR=function(t,e,n){t.hasOwnProperty("increment")||g(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&g(!1,"Unexpected increment value: "+r);let i=e.node();if(g(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},TD=function(t,e,n,r){return hp(e,new Ah(n,t),r)},fp=function(t,e,n){return hp(t,new Mh(e),n)};function hp(t,e,n){let r=t.getPriority().val(),i=Aw(r,e.getImmediateChild(".priority"),n),o;if(t.isLeafNode()){let s=t,a=Aw(s.getValue(),e,n);return a!==s.getValue()||i!==s.getPriority().val()?new ai(a,ie(i)):t}else{let s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new ai(i))),s.forEachChild(te,(a,c)=>{let l=hp(c,e.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var Qo=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function Gc(t,e){let n=e instanceof q?e:new q(e),r=t,i=L(n);for(;i!==null;){let o=Yt(r.node.children,i)||{children:{},childCount:0};r=new Qo(i,r,o),n=ee(n),i=L(n)}return r}function Jn(t){return t.node.value}function pp(t,e){t.node.value=e,xh(t)}function SD(t){return t.node.childCount>0}function uR(t){return Jn(t)===void 0&&!SD(t)}function qc(t,e){me(t.node.children,(n,r)=>{e(new Qo(n,t,r))})}function MD(t,e,n,r){n&&!r&&e(t),qc(t,i=>{MD(i,e,!0,r)}),n&&r&&e(t)}function dR(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function rs(t){return new q(t.parent===null?t.name:rs(t.parent)+"/"+t.name)}function xh(t){t.parent!==null&&fR(t.parent,t.name,t)}function fR(t,e,n){let r=uR(n),i=ze(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,xh(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,xh(t))}var hR=/[\[\].#$\/\u0000-\u001F\u007F]/,pR=/[\[\].#$\u0000-\u001F\u007F]/,Bf=10*1024*1024,Yc=function(t){return typeof t=="string"&&t.length!==0&&!hR.test(t)},AD=function(t){return typeof t=="string"&&t.length!==0&&!pR.test(t)},gR=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),AD(t)},Ko=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Vc(t)||t&&typeof t=="object"&&ze(t,".sv")},Ot=function(t,e,n,r){r&&e===void 0||is(ke(t,"value"),e,n)},is=function(t,e,n){let r=n instanceof q?new eh(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+qn(r));if(typeof e=="function")throw new Error(t+"contains a function "+qn(r)+" with contents = "+e.toString());if(Vc(e))throw new Error(t+"contains "+e.toString()+" "+qn(r));if(typeof e=="string"&&e.length>Bf/3&&Ei(e)>Bf)throw new Error(t+"contains a string greater than "+Bf+" utf8 bytes "+qn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(me(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!Yc(s)))throw new Error(t+" contains an invalid key ("+s+") "+qn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);zx(r,s),is(t,a,r),Gx(r)}),i&&o)throw new Error(t+' contains ".value" child '+qn(r)+" in addition to actual children.")}},mR=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];let o=Uo(r);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!Yc(o[s]))throw new Error(t+"contains an invalid key ("+o[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(Wx);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Je(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},xD=function(t,e,n,r){if(r&&e===void 0)return;let i=ke(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");let o=[];me(e,(s,a)=>{let c=new q(s);if(is(i,a,ne(n,c)),Zh(c)===".priority"&&!Ko(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(c)}),mR(i,o)},gp=function(t,e,n){if(!(n&&e===void 0)){if(Vc(e))throw new Error(ke(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ko(e))throw new Error(ke(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},os=function(t,e,n,r){if(!(r&&n===void 0)&&!Yc(n))throw new Error(ke(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},vi=function(t,e,n,r){if(!(r&&n===void 0)&&!AD(n))throw new Error(ke(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},vR=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),vi(t,e,n,r)},Be=function(t,e){if(L(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},ND=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Yc(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!gR(n))throw new Error(ke(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Nh=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Qc(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();n!==null&&!Xh(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function RD(t,e,n){Qc(t,n),PD(t,r=>Xh(r,e))}function $e(t,e,n){Qc(t,n),PD(t,r=>Je(r,e)||Je(e,r))}function PD(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let o=i.path;e(o)?(yR(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function yR(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Qn&&ge("event: "+n.toString()),pi(r)}}}var OD="repo_interrupt",_R=25,Rh=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Nh,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ec(),this.transactionQueueTree_=new Qo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function wR(t,e,n){if(t.stats_=Kh(t.repoInfo_),t.forceRestClient_||wx())t.server_=new dh(t.repoInfo_,(r,i,o,s)=>{xw(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Nw(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{le(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Jh(t.repoInfo_,e,(r,i,o,s)=>{xw(t,r,i,o,s)},r=>{Nw(t,r)},r=>{DR(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Ex(t.repoInfo_,()=>new mh(t.stats_,t.server_)),t.infoData_=new fh,t.infoSyncTree_=new Nc({startListening:(r,i,o,s)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=ns(t.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),mp(t,"connected",!1),t.serverSyncTree_=new Nc({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);$e(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function kD(t){let n=t.infoData_.getNode(new q(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ss(t){return aR({timestamp:kD(t)})}function xw(t,e,n,r,i){t.dataUpdateCount++;let o=new q(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){let c=Di(n,l=>ie(l));s=tR(t.serverSyncTree_,o,c,i)}else{let c=ie(n);s=ED(t.serverSyncTree_,o,c,i)}else if(r){let c=Di(n,l=>ie(l));s=XN(t.serverSyncTree_,o,c)}else{let c=ie(n);s=ns(t.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=fi(t,o)),$e(t.eventQueue_,a,s)}function Nw(t,e){mp(t,"connected",e),e===!1&&IR(t)}function DR(t,e){me(e,(n,r)=>{mp(t,n,r)})}function mp(t,e,n){let r=new q("/.info/"+e),i=ie(n);t.infoData_.updateSnapshot(r,i);let o=ns(t.infoSyncTree_,r,i);$e(t.eventQueue_,r,o)}function Kc(t){return t.nextWriteId_++}function ER(t,e,n){let r=nR(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{let o=ie(i).withIndex(e._queryParams.getIndex());Sh(t.serverSyncTree_,e,n,!0);let s;if(e._queryParams.loadsAllData())s=ns(t.serverSyncTree_,e._path,o);else{let a=Yo(t.serverSyncTree_,e);s=ED(t.serverSyncTree_,e._path,o,a)}return $e(t.eventQueue_,e._path,s),Rc(t.serverSyncTree_,e,n,null,!0),o},i=>(yi(t,"get for query "+le(e)+" failed: "+i),Promise.reject(new Error(i))))}function vp(t,e,n,r,i){yi(t,"set",{path:e.toString(),value:n,priority:r});let o=ss(t),s=ie(n,r),a=Wc(t.serverSyncTree_,e),c=fp(s,a,o),l=Kc(t),u=cp(t.serverSyncTree_,e,c,l,!0);Qc(t.eventQueue_,u),t.server_.put(e.toString(),s.val(!0),(f,h)=>{let p=f==="ok";p||Se("set at "+e+" failed: "+f);let m=mn(t.serverSyncTree_,l,!p);$e(t.eventQueue_,e,m),En(t,i,f,h)});let d=_p(t,e);fi(t,d),$e(t.eventQueue_,d,[])}function CR(t,e,n,r){yi(t,"update",{path:e.toString(),value:n});let i=!0,o=ss(t),s={};if(me(n,(a,c)=>{i=!1,s[a]=TD(ne(e,a),ie(c),t.serverSyncTree_,o)}),i)ge("update() called with empty data.  Don't do anything."),En(t,r,"ok",void 0);else{let a=Kc(t),c=ZN(t.serverSyncTree_,e,s,a);Qc(t.eventQueue_,c),t.server_.merge(e.toString(),n,(l,u)=>{let d=l==="ok";d||Se("update at "+e+" failed: "+l);let f=mn(t.serverSyncTree_,a,!d),h=f.length>0?fi(t,e):e;$e(t.eventQueue_,h,f),En(t,r,l,u)}),me(n,l=>{let u=_p(t,ne(e,l));fi(t,u)}),$e(t.eventQueue_,e,[])}}function IR(t){yi(t,"onDisconnectEvents");let e=ss(t),n=Ec();ph(t.onDisconnect_,G(),(i,o)=>{let s=TD(i,o,t.serverSyncTree_,e);gi(n,i,s)});let r=[];ph(n,G(),(i,o)=>{r=r.concat(ns(t.serverSyncTree_,i,o));let s=_p(t,i);fi(t,s)}),t.onDisconnect_=Ec(),$e(t.eventQueue_,G(),r)}function bR(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&hh(t.onDisconnect_,e),En(t,n,r,i)})}function Rw(t,e,n,r){let i=ie(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(o,s)=>{o==="ok"&&gi(t.onDisconnect_,e,i),En(t,r,o,s)})}function TR(t,e,n,r,i){let o=ie(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(s,a)=>{s==="ok"&&gi(t.onDisconnect_,e,o),En(t,i,s,a)})}function SR(t,e,n,r){if(ps(n)){ge("onDisconnect().update() called with empty data.  Don't do anything."),En(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,o)=>{i==="ok"&&me(n,(s,a)=>{let c=ie(a);gi(t.onDisconnect_,ne(e,s),c)}),En(t,r,i,o)})}function MR(t,e,n){let r;L(e._path)===".info"?r=Sh(t.infoSyncTree_,e,n):r=Sh(t.serverSyncTree_,e,n),RD(t.eventQueue_,e._path,r)}function Ph(t,e,n){let r;L(e._path)===".info"?r=Rc(t.infoSyncTree_,e,n):r=Rc(t.serverSyncTree_,e,n),RD(t.eventQueue_,e._path,r)}function FD(t){t.persistentConnection_&&t.persistentConnection_.interrupt(OD)}function AR(t){t.persistentConnection_&&t.persistentConnection_.resume(OD)}function yi(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ge(n,...e)}function En(t,e,n,r){e&&pi(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,e(s)}})}function xR(t,e,n,r,i,o){yi(t,"transaction on "+e);let s={path:e,update:n,onComplete:r,status:null,order:kw(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=yp(t,e,void 0);s.currentInputSnapshot=a;let c=s.update(a.val());if(c===void 0)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{is("transaction failed: Data returned ",c,s.path),s.status=0;let l=Gc(t.transactionQueueTree_,e),u=Jn(l)||[];u.push(s),pp(l,u);let d;typeof c=="object"&&c!==null&&ze(c,".priority")?(d=Yt(c,".priority"),g(Ko(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(Wc(t.serverSyncTree_,e)||P.EMPTY_NODE).getPriority().val();let f=ss(t),h=ie(c,d),p=fp(h,a,f);s.currentOutputSnapshotRaw=h,s.currentOutputSnapshotResolved=p,s.currentWriteId=Kc(t);let m=cp(t.serverSyncTree_,e,p,s.currentWriteId,s.applyLocally);$e(t.eventQueue_,e,m),Zc(t,t.transactionQueueTree_)}}function yp(t,e,n){return Wc(t.serverSyncTree_,e,n)||P.EMPTY_NODE}function Zc(t,e=t.transactionQueueTree_){if(e||Xc(t,e),Jn(e)){let n=jD(t,e);g(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&NR(t,rs(e),n)}else SD(e)&&qc(e,n=>{Zc(t,n)})}function NR(t,e,n){let r=n.map(l=>l.currentWriteId),i=yp(t,e,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];g(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Ne(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;t.server_.put(c.toString(),a,l=>{yi(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(mn(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();Xc(t,Gc(t.transactionQueueTree_,e)),Zc(t,t.transactionQueueTree_),$e(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)pi(d[f])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Se("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}fi(t,e)}},s)}function fi(t,e){let n=LD(t,e),r=rs(n),i=jD(t,n);return RR(t,i,r),r}function RR(t,e,n){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Ne(n,c.path),u=!1,d;if(g(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(mn(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=_R)u=!0,d="maxretry",i=i.concat(mn(t.serverSyncTree_,c.currentWriteId,!0));else{let f=yp(t,c.path,s);c.currentInputSnapshot=f;let h=e[a].update(f.val());if(h!==void 0){is("transaction failed: Data returned ",h,c.path);let p=ie(h);typeof h=="object"&&h!=null&&ze(h,".priority")||(p=p.updatePriority(f.getPriority()));let _=c.currentWriteId,w=ss(t),H=fp(p,f,w);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=H,c.currentWriteId=Kc(t),s.splice(s.indexOf(_),1),i=i.concat(cp(t.serverSyncTree_,c.path,H,c.currentWriteId,c.applyLocally)),i=i.concat(mn(t.serverSyncTree_,_,!0))}else u=!0,d="nodata",i=i.concat(mn(t.serverSyncTree_,c.currentWriteId,!0))}$e(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Xc(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)pi(r[a]);Zc(t,t.transactionQueueTree_)}function LD(t,e){let n,r=t.transactionQueueTree_;for(n=L(e);n!==null&&Jn(r)===void 0;)r=Gc(r,n),e=ee(e),n=L(e);return r}function jD(t,e){let n=[];return VD(t,e,n),n.sort((r,i)=>r.order-i.order),n}function VD(t,e,n){let r=Jn(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);qc(e,i=>{VD(t,i,n)})}function Xc(t,e){let n=Jn(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,pp(e,n.length>0?n:void 0)}qc(e,r=>{Xc(t,r)})}function _p(t,e){let n=rs(LD(t,e)),r=Gc(t.transactionQueueTree_,e);return dR(r,i=>{$f(t,i)}),$f(t,r),MD(r,i=>{$f(t,i)}),n}function $f(t,e){let n=Jn(e);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(g(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(g(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(mn(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?pp(e,void 0):n.length=o+1,$e(t.eventQueue_,rs(e),i);for(let s=0;s<r.length;s++)pi(r[s])}}function PR(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function OR(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Se(`Invalid query segment '${n}' in query '${t}'`)}return e}var Oh=function(t,e){let n=kR(t),r=n.namespace;n.domain==="firebase.com"&&Rt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Rt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||dx();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new pc(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new q(n.pathString)}},kR=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=PR(t.substring(u,d)));let f=OR(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let h=e.slice(0,l);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{let p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var Pw="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",FR=function(){let t=0,e=[];return function(n){let r=n===t;t=n;let i,o=new Array(8);for(i=7;i>=0;i--)o[i]=Pw.charAt(n%64),n=Math.floor(n/64);g(n===0,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)s+=Pw.charAt(e[i]);return g(s.length===20,"nextPushId: Length should be 20."),s}}();var Pc=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+le(this.snapshot.exportVal())}},Oc=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Zo=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return g(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var kc=class{constructor(e,n){this._repo=e,this._path=n}cancel(){let e=new fe;return bR(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Be("OnDisconnect.remove",this._path);let e=new fe;return Rw(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Be("OnDisconnect.set",this._path),Ot("OnDisconnect.set",e,this._path,!1);let n=new fe;return Rw(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Be("OnDisconnect.setWithPriority",this._path),Ot("OnDisconnect.setWithPriority",e,this._path,!1),gp("OnDisconnect.setWithPriority",n,!1);let r=new fe;return TR(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){Be("OnDisconnect.update",this._path),xD("OnDisconnect.update",e,this._path,!1);let n=new fe;return SR(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}};var Pe=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return j(this._path)?null:Zh(this._path)}get ref(){return new He(this._repo,this._path)}get _queryIdentifier(){let e=_w(this._queryParams),n=Qh(e);return n==="{}"?"default":n}get _queryObject(){return _w(this._queryParams)}isEqual(e){if(e=Me(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=Xh(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Hx(this._path)}};function Jc(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function In(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Nt){let r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==_n)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Wt)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===te){if(e!=null&&!Ko(e)||n!=null&&!Ko(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(g(t.getIndex()instanceof Bo||t.getIndex()===tp,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function el(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var He=class t extends Pe{constructor(e,n){super(e,n,new zo,!1)}get parent(){let e=nD(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},hi=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new q(e),r=Cn(this.ref,e);return new t(this._node.getChild(n),r,te)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,Cn(this.ref,r),te)))}hasChild(e){let n=new q(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function wp(t,e){return t=Me(t),t._checkNotDeleted("ref"),e!==void 0?Cn(t._root,e):t._root}function Dp(t,e){t=Me(t),t._checkNotDeleted("refFromURL");let n=Oh(e,t._repo.repoInfo_.nodeAdmin);ND("refFromURL",n);let r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&Rt("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),wp(t,n.path.toString())}function Cn(t,e){return t=Me(t),L(t._path)===null?vR("child","path",e,!1):vi("child","path",e,!1),new He(t._repo,ne(t._path,e))}function UD(t,e){t=Me(t),Be("push",t._path),Ot("push",e,t._path,!0);let n=kD(t._repo),r=FR(n),i=Cn(t,r),o=Cn(t,r),s;return e!=null?s=tl(o,e).then(()=>o):s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function BD(t){return Be("remove",t._path),tl(t,null)}function tl(t,e){t=Me(t),Be("set",t._path),Ot("set",e,t._path,!1);let n=new fe;return vp(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function $D(t,e){t=Me(t),Be("setPriority",t._path),gp("setPriority",e,!1);let n=new fe;return vp(t._repo,ne(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function HD(t,e,n){if(Be("setWithPriority",t._path),Ot("setWithPriority",e,t._path,!1),gp("setWithPriority",n,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";let r=new fe;return vp(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function WD(t,e){xD("update",e,t._path,!1);let n=new fe;return CR(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function zD(t){t=Me(t);let e=new Zo(()=>{}),n=new Xo(e);return ER(t._repo,t,n).then(r=>new hi(r,new He(t._repo,t._path),t._queryParams.getIndex()))}var Xo=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Pc("value",this,new hi(e.snapshotNode,new He(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Oc(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Fc=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Oc(this,e,n):null}createEvent(e,n){g(e.childName!=null,"Child events should have a childName.");let r=Cn(new He(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Pc(e.type,this,new hi(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function as(t,e,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{Ph(t._repo,t,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new Zo(n,o||void 0),a=e==="value"?new Xo(s):new Fc(e,s);return MR(t._repo,t,a),()=>Ph(t._repo,t,a)}function nl(t,e,n,r){return as(t,"value",e,n,r)}function Ep(t,e,n,r){return as(t,"child_added",e,n,r)}function Cp(t,e,n,r){return as(t,"child_changed",e,n,r)}function Ip(t,e,n,r){return as(t,"child_moved",e,n,r)}function bp(t,e,n,r){return as(t,"child_removed",e,n,r)}function Tp(t,e,n){let r=null,i=n?new Zo(n):null;e==="value"?r=new Xo(i):e&&(r=new Fc(e,i)),Ph(t._repo,t,r)}var We=class{},Lc=class extends We{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){Ot("endAt",this._value,e._path,!0);let n=uh(e._queryParams,this._value,this._key);if(el(n),In(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Pe(e._repo,e._path,n,e._orderByCalled)}};function GD(t,e){return os("endAt","key",e,!0),new Lc(t,e)}var kh=class extends We{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){Ot("endBefore",this._value,e._path,!1);let n=cN(e._queryParams,this._value,this._key);if(el(n),In(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Pe(e._repo,e._path,n,e._orderByCalled)}};function qD(t,e){return os("endBefore","key",e,!0),new kh(t,e)}var jc=class extends We{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){Ot("startAt",this._value,e._path,!0);let n=lh(e._queryParams,this._value,this._key);if(el(n),In(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Pe(e._repo,e._path,n,e._orderByCalled)}};function YD(t=null,e){return os("startAt","key",e,!0),new jc(t,e)}var Fh=class extends We{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){Ot("startAfter",this._value,e._path,!1);let n=aN(e._queryParams,this._value,this._key);if(el(n),In(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Pe(e._repo,e._path,n,e._orderByCalled)}};function QD(t,e){return os("startAfter","key",e,!0),new Fh(t,e)}var Lh=class extends We{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Pe(e._repo,e._path,oN(e._queryParams,this._limit),e._orderByCalled)}};function KD(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Lh(t)}var jh=class extends We{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Pe(e._repo,e._path,sN(e._queryParams,this._limit),e._orderByCalled)}};function ZD(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new jh(t)}var Vh=class extends We{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Jc(e,"orderByChild");let n=new q(this._path);if(j(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let r=new Bo(n),i=Uc(e._queryParams,r);return In(i),new Pe(e._repo,e._path,i,!0)}};function XD(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return vi("orderByChild","path",t,!1),new Vh(t)}var Uh=class extends We{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){Jc(e,"orderByKey");let n=Uc(e._queryParams,Nt);return In(n),new Pe(e._repo,e._path,n,!0)}};function JD(){return new Uh}var Bh=class extends We{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){Jc(e,"orderByPriority");let n=Uc(e._queryParams,te);return In(n),new Pe(e._repo,e._path,n,!0)}};function eE(){return new Bh}var $h=class extends We{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){Jc(e,"orderByValue");let n=Uc(e._queryParams,tp);return In(n),new Pe(e._repo,e._path,n,!0)}};function tE(){return new $h}var Hh=class extends We{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(Ot("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Lc(this._value,this._key)._apply(new jc(this._value,this._key)._apply(e))}};function nE(t,e){return os("equalTo","key",e,!0),new Hh(t,e)}function tt(t,...e){let n=Me(t);for(let r of e)n=r._apply(n);return n}HN(He);YN(He);var LR="FIREBASE_DATABASE_EMULATOR_HOST",Wh={},jR=!1;function VR(t,e,n,r){t.repoInfo_=new pc(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Sp(t,e,n,r,i){let o=r||t.options.databaseURL;o===void 0&&(t.options.projectId||Rt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ge("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=Oh(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[LR]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=Oh(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new ko(ko.OWNER):new Yf(t.name,t.options,e);ND("Invalid Firebase Database URL",s),j(s.path)||Rt("Database URL must point to the root of a Firebase Database (not including a child path).");let d=BR(a,t,u,new qf(t.name,n));return new zh(d,t)}function UR(t,e){let n=Wh[e];(!n||n[t.key]!==t)&&Rt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),FD(t),delete n[t.key]}function BR(t,e,n,r){let i=Wh[e.name];i||(i={},Wh[e.name]=i);let o=i[t.toURLString()];return o&&Rt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Rh(t,jR,n,r),i[t.toURLString()]=o,o}var zh=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(wR(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new He(this._repo,G())),this._rootInternal}_delete(){return this._rootInternal!==null&&(UR(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Rt("Cannot call "+e+" on a deleted database.")}};function rE(){tD.IS_TRANSPORT_INITIALIZED&&Se("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function iE(){rE(),Vo.forceDisallow()}function oE(){rE(),ri.forceDisallow(),Vo.forceAllow()}function w$(t=pl(),e){let n=hl(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=Xp("database");r&&Mp(n,...r)}return n}function Mp(t,e,n,r={}){t=Me(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Rt("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Rt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ko(ko.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:Jp(r.mockUserToken,t.app.options.projectId);o=new ko(s)}VR(i,e,n,o)}function sE(t){t=Me(t),t._checkNotDeleted("goOffline"),FD(t._repo)}function aE(t){t=Me(t),t._checkNotDeleted("goOnline"),AR(t._repo)}function cE(t,e){Lw(t,e)}function $R(t){Yh(lg),Ci(new kt("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return Sp(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),Qt(nw,rw,t),Qt(nw,rw,"esm2017")}var HR={".sv":"timestamp"};function lE(){return HR}function uE(t){return{".sv":{increment:t}}}var Gh=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function dE(t,e,n){var r;if(t=Me(t),Be("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";let i=(r=n?.applyLocally)!==null&&r!==void 0?r:!0,o=new fe,s=(c,l,u)=>{let d=null;c?o.reject(c):(d=new hi(u,new He(t._repo,t._path),te),o.resolve(new Gh(l,d)))},a=nl(t,()=>{});return xR(t._repo,t._path,e,s,a,i),o.promise}Jh.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Jh.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};$R();var tr=new on("ANGULARFIRE2_VERSION");var WR=(t,e)=>{let n=e?[e]:ug(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},er=class{constructor(){return WR(zR)}},zR="app-check";function Ap(){}var rl=class{zone;delegate;constructor(e,n=Il){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},xp=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ap,{},Ap,Ap)),n.pipe(ce({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},il=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new rl(Zone.current)),this.insideAngular=n.run(()=>new rl(Zone.current,Ti)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(v(z))};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function GR(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function zt(t){return qR(GR())(t)}function qR(t){return function(n){return n=n.lift(new xp(t.ngZone)),n.pipe(ot(t.outsideAngular),Ge(t.insideAngular))}}var YR="firebase",QR="10.12.3";Ae.registerVersion(YR,QR,"app-compat");var KR=["ngOnDestroy"],pE=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(KR.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>n.run(()=>l)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(u=>{let d=u?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,d),d})})})});var ol=class{constructor(e){return e}},_i=new E("angularfire2.app.options"),wi=new E("angularfire2.app.name");function cs(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=Ae.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Ae.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;ZR("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new ol(s)}var ZR=(t,...e)=>{Rd()&&typeof console<"u"&&console[t](...e)},XR={provide:ol,useFactory:cs,deps:[_i,z,[new Yi,wi]]},F$=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:_i,useValue:n},{provide:wi,useValue:r}]}}constructor(n){Ae.registerVersion("angularfire",tr.full,"core"),Ae.registerVersion("angularfire",tr.full,"app-compat"),Ae.registerVersion("angular",Oy.full,n.toString())}static \u0275fac=function(r){return new(r||t)(v(be))};static \u0275mod=ft({type:t});static \u0275inj=dt({providers:[XR]})}return t})();function sl(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return JR(i,s)||(hE("error",`${e} was already initialized on the ${n} Firebase App with different settings.${eP?" You may need to reload as Firebase is not HMR aware.":""}`),hE("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function JR(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var eP=typeof module<"u"&&!!module.hot,hE=(t,...e)=>{Rd()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var tP=new Map,nP={activated:!1,tokenObservers:[]},rP={initialized:!1,enabled:!1};function _t(t){return tP.get(t)||Object.assign({},nP)}function _E(){return rP}var iP="https://content-firebaseappcheck.googleapis.com/v1";var oP="exchangeDebugToken",gE={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},G$=24*60*60*1e3;var Rp=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return Oe(this,null,function*(){this.stop();try{this.pending=new fe,this.pending.promise.catch(n=>{}),yield sP(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new fe,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function sP(t){return new Promise(e=>{setTimeout(e,t)})}var aP={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},bn=new ng("appCheck","AppCheck",aP);function wE(t){if(!_t(t).activated)throw bn.create("use-before-activation",{appName:t.name})}function DE(r,i){return Oe(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let h=yield s.getHeartbeatsHeader();h&&(o["X-Firebase-Client"]=h)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(h){throw bn.create("fetch-network-error",{originalErrorMessage:h?.message})}if(c.status!==200)throw bn.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(h){throw bn.create("fetch-parse-error",{originalErrorMessage:h?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw bn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let d=Number(u[1])*1e3,f=Date.now();return{token:l.token,expireTimeMillis:f+d,issuedAtTimeMillis:f}})}function EE(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${iP}/projects/${n}/apps/${r}:${oP}?key=${i}`,body:{debug_token:e}}}var cP="firebase-app-check-database",lP=1,Pp="firebase-app-check-store";var al=null;function uP(){return al||(al=new Promise((t,e)=>{try{let n=indexedDB.open(cP,lP);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(bn.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Pp,{keyPath:"compositeKey"})}}}catch(n){e(bn.create("storage-open",{originalErrorMessage:n?.message}))}}),al)}function dP(t,e){return fP(hP(t),e)}function fP(t,e){return Oe(this,null,function*(){let r=(yield uP()).transaction(Pp,"readwrite"),o=r.objectStore(Pp).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(bn.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function hP(t){return`${t.options.appId}-${t.name}`}var Op=new or("@firebase/app-check");function Np(t,e){return tg()?dP(t,e).catch(n=>{Op.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function CE(){return _E().enabled}function IE(){return Oe(this,null,function*(){let t=_E();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var pP={error:"UNKNOWN_ERROR"};function gP(t){return fs.encodeString(JSON.stringify(t),!1)}function kp(t,e=!1){return Oe(this,null,function*(){let n=t.app;wE(n);let r=_t(n),i=r.token,o;if(i&&!ls(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(ls(c)?i=c:yield Np(n,void 0))}if(!e&&i&&ls(i))return{token:i.token};let s=!1;if(CE()){r.exchangeTokenPromise||(r.exchangeTokenPromise=DE(EE(n,yield IE()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield Np(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield _t(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Op.warn(c.message):Op.error(c),o=c}let a;return i?o?ls(i)?a={token:i.token,internalError:o}:a=vE(o):(a={token:i.token},r.token=i,yield Np(n,i)):a=vE(o),s&&_P(n,a),a})}function mP(t){return Oe(this,null,function*(){let e=t.app;wE(e);let{provider:n}=_t(e);if(CE()){let r=yield IE(),{token:i}=yield DE(EE(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function vP(t,e,n,r){let{app:i}=t,o=_t(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&ls(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),mE(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>mE(t))}function bE(t,e){let n=_t(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function mE(t){let{app:e}=t,n=_t(e),r=n.tokenRefresher;r||(r=yP(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function yP(t){let{app:e}=t;return new Rp(()=>Oe(this,null,function*(){let n=_t(e),r;if(n.token?r=yield kp(t,!0):r=yield kp(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=_t(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},gE.RETRIAL_MIN_WAIT,gE.RETRIAL_MAX_WAIT)}function _P(t,e){let n=_t(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function ls(t){return t.expireTimeMillis-Date.now()>0}function vE(t){return{token:gP(pP),error:t}}var Fp=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=_t(this.app);for(let n of e)bE(this.app,n.next);return Promise.resolve()}};function wP(t,e){return new Fp(t,e)}function DP(t){return{getToken:e=>kp(t,e),getLimitedUseToken:()=>mP(t),addTokenListener:e=>vP(t,"INTERNAL",e),removeTokenListener:e=>bE(t.app,e)}}var EP="@firebase/app-check",CP="0.8.5";var IP="app-check",yE="app-check-internal";function bP(){Ci(new kt(IP,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return wP(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(yE).initialize()})),Ci(new kt(yE,t=>{let e=t.getProvider("app-check").getImmediate();return DP(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Qt(EP,CP)}bP();var TP=["localhost","0.0.0.0","127.0.0.1"],i2=typeof window<"u"&&TP.includes(window.location.hostname);var Lp=new E("angularfire2.auth.use-emulator"),jp=new E("angularfire2.auth.settings"),Vp=new E("angularfire2.auth.tenant-id"),Up=new E("angularfire2.auth.langugage-code"),Bp=new E("angularfire2.auth.use-device-language"),$p=new E("angularfire.auth.persistence"),Hp=(t,e,n,r,i,o,s,a)=>sl(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,u]of Object.entries(s))c.settings[l]=u;return a&&c.setPersistence(a),c},[n,r,i,o,s,a]),Wp=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,c,l,u,d,f,h){let p=new ae,m=I(void 0).pipe(Ge(s.outsideAngular),X(()=>o.runOutsideAngular(()=>import("./chunk-FBI6DHAW.js"))),T(()=>cs(n,o,r)),T(_=>Hp(_,o,a,l,u,d,c,f)),js({bufferSize:1,refCount:!1}));if(zr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=I(null);else{m.pipe(qe()).subscribe();let _=m.pipe(X(N=>N.getRedirectResult().then($=>$,()=>null)),zt,js({bufferSize:1,refCount:!1})),w=m.pipe(X(N=>new F($=>({unsubscribe:o.runOutsideAngular(()=>N.onAuthStateChanged(de=>$.next(de),de=>$.error(de),()=>$.complete()))})))),H=m.pipe(X(N=>new F($=>({unsubscribe:o.runOutsideAngular(()=>N.onIdTokenChanged(de=>$.next(de),de=>$.error(de),()=>$.complete()))}))));this.authState=_.pipe(Vs(w),ot(s.outsideAngular),Ge(s.insideAngular)),this.user=_.pipe(Vs(H),ot(s.outsideAngular),Ge(s.insideAngular)),this.idToken=this.user.pipe(X(N=>N?K(N.getIdToken()):I(null))),this.idTokenResult=this.user.pipe(X(N=>N?K(N.getIdTokenResult()):I(null))),this.credential=yr(_,p,this.authState.pipe(_e(N=>!N))).pipe(T(N=>N?.user?N:null),ot(s.outsideAngular),Ge(s.insideAngular))}return pE(this,m,o,{spy:{apply:(_,w,H)=>{(_.startsWith("signIn")||_.startsWith("createUser"))&&H.then(N=>p.next(N))}}})}static \u0275fac=function(r){return new(r||t)(v(_i),v(wi,8),v(be),v(z),v(il),v(Lp,8),v(jp,8),v(Vp,8),v(Up,8),v(Bp,8),v($p,8),v(er,8))};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),w2=(()=>{class t{constructor(){Ae.registerVersion("angularfire",tr.full,"auth-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ft({type:t});static \u0275inj=dt({providers:[Wp]})}return t})();var MP="@firebase/database-compat",AP="1.0.6";var xP=new or("@firebase/database-compat"),SE=function(t){let e="FIREBASE WARNING: "+t;xP.warn(e)};var NP=function(t,e,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(ke(t,e)+"must be a boolean.")},RP=function(t,e,n){if(!(n&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(ke(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var zp=class{constructor(e){this._delegate=e}cancel(e){S("OnDisconnect.cancel",0,1,arguments.length),ue("OnDisconnect.cancel","onComplete",e,!0);let n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){S("OnDisconnect.remove",0,1,arguments.length),ue("OnDisconnect.remove","onComplete",e,!0);let n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){S("OnDisconnect.set",1,2,arguments.length),ue("OnDisconnect.set","onComplete",n,!0);let r=this._delegate.set(e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){S("OnDisconnect.setWithPriority",2,3,arguments.length),ue("OnDisconnect.setWithPriority","onComplete",r,!0);let i=this._delegate.setWithPriority(e,n);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,n){if(S("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,SE("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ue("OnDisconnect.update","onComplete",n,!0);let r=this._delegate.update(e);return n&&r.then(()=>n(null),i=>n(i)),r}};var Gp=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return S("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var nr=class t{constructor(e,n){this._database=e,this._delegate=n}val(){return S("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return S("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return S("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return S("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return S("DataSnapshot.child",0,1,arguments.length),e=String(e),vi("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))}hasChild(e){return S("DataSnapshot.hasChild",1,1,arguments.length),vi("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return S("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return S("DataSnapshot.forEach",1,1,arguments.length),ue("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new t(this._database,n)))}hasChildren(){return S("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return S("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return S("DataSnapshot.ref",0,0,arguments.length),new Gt(this._database,this._delegate.ref)}get ref(){return this.getRef()}},cl=class t{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,i){var o;S("Query.on",2,4,arguments.length),ue("Query.on","callback",n,!1);let s=t.getCancelAndContextArgs_("Query.on",r,i),a=(l,u)=>{n.call(s.context,new nr(this.database,l),u)};a.userCallback=n,a.context=s.context;let c=(o=s.cancel)===null||o===void 0?void 0:o.bind(s.context);switch(e){case"value":return nl(this._delegate,a,c),n;case"child_added":return Ep(this._delegate,a,c),n;case"child_removed":return bp(this._delegate,a,c),n;case"child_changed":return Cp(this._delegate,a,c),n;case"child_moved":return Ip(this._delegate,a,c),n;default:throw new Error(ke("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if(S("Query.off",0,3,arguments.length),RP("Query.off",e,!0),ue("Query.off","callback",n,!0),dl("Query.off","context",r,!0),n){let i=()=>{};i.userCallback=n,i.context=r,Tp(this._delegate,e,i)}else Tp(this._delegate,e)}get(){return zD(this._delegate).then(e=>new nr(this.database,e))}once(e,n,r,i){S("Query.once",1,4,arguments.length),ue("Query.once","callback",n,!0);let o=t.getCancelAndContextArgs_("Query.once",r,i),s=new fe,a=(l,u)=>{let d=new nr(this.database,l);n&&n.call(o.context,d,u),s.resolve(d)};a.userCallback=n,a.context=o.context;let c=l=>{o.cancel&&o.cancel.call(o.context,l),s.reject(l)};switch(e){case"value":nl(this._delegate,a,c,{onlyOnce:!0});break;case"child_added":Ep(this._delegate,a,c,{onlyOnce:!0});break;case"child_removed":bp(this._delegate,a,c,{onlyOnce:!0});break;case"child_changed":Cp(this._delegate,a,c,{onlyOnce:!0});break;case"child_moved":Ip(this._delegate,a,c,{onlyOnce:!0});break;default:throw new Error(ke("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return S("Query.limitToFirst",1,1,arguments.length),new t(this.database,tt(this._delegate,KD(e)))}limitToLast(e){return S("Query.limitToLast",1,1,arguments.length),new t(this.database,tt(this._delegate,ZD(e)))}orderByChild(e){return S("Query.orderByChild",1,1,arguments.length),new t(this.database,tt(this._delegate,XD(e)))}orderByKey(){return S("Query.orderByKey",0,0,arguments.length),new t(this.database,tt(this._delegate,JD()))}orderByPriority(){return S("Query.orderByPriority",0,0,arguments.length),new t(this.database,tt(this._delegate,eE()))}orderByValue(){return S("Query.orderByValue",0,0,arguments.length),new t(this.database,tt(this._delegate,tE()))}startAt(e=null,n){return S("Query.startAt",0,2,arguments.length),new t(this.database,tt(this._delegate,YD(e,n)))}startAfter(e=null,n){return S("Query.startAfter",0,2,arguments.length),new t(this.database,tt(this._delegate,QD(e,n)))}endAt(e=null,n){return S("Query.endAt",0,2,arguments.length),new t(this.database,tt(this._delegate,GD(e,n)))}endBefore(e=null,n){return S("Query.endBefore",0,2,arguments.length),new t(this.database,tt(this._delegate,qD(e,n)))}equalTo(e,n){return S("Query.equalTo",1,2,arguments.length),new t(this.database,tt(this._delegate,nE(e,n)))}toString(){return S("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return S("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(S("Query.isEqual",1,1,arguments.length),!(e instanceof t)){let n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){let i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,ue(e,"cancel",i.cancel,!0),i.context=r,dl(e,"context",i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(ke(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new Gt(this.database,new He(this._delegate._repo,this._delegate._path))}},Gt=class t extends cl{constructor(e,n){super(e,new Pe(n._repo,n._path,new zo,!1)),this.database=e,this._delegate=n}getKey(){return S("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return S("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new t(this.database,Cn(this._delegate,e))}getParent(){S("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new t(this.database,e):null}getRoot(){return S("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)}set(e,n){S("Reference.set",1,2,arguments.length),ue("Reference.set","onComplete",n,!0);let r=tl(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}update(e,n){if(S("Reference.update",1,2,arguments.length),Array.isArray(e)){let i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,SE("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Be("Reference.update",this._delegate._path),ue("Reference.update","onComplete",n,!0);let r=WD(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){S("Reference.setWithPriority",2,3,arguments.length),ue("Reference.setWithPriority","onComplete",r,!0);let i=HD(this._delegate,e,n);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){S("Reference.remove",0,1,arguments.length),ue("Reference.remove","onComplete",e,!0);let n=BD(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){S("Reference.transaction",1,3,arguments.length),ue("Reference.transaction","transactionUpdate",e,!1),ue("Reference.transaction","onComplete",n,!0),NP("Reference.transaction","applyLocally",r,!0);let i=dE(this._delegate,e,{applyLocally:r}).then(o=>new Gp(o.committed,new nr(this.database,o.snapshot)));return n&&i.then(o=>n(null,o.committed,o.snapshot),o=>n(o,!1,null)),i}setPriority(e,n){S("Reference.setPriority",1,2,arguments.length),ue("Reference.setPriority","onComplete",n,!0);let r=$D(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}push(e,n){S("Reference.push",0,2,arguments.length),ue("Reference.push","onComplete",n,!0);let r=UD(this._delegate,e),i=r.then(s=>new t(this.database,s));n&&i.then(()=>n(null),s=>n(s));let o=new t(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return Be("Reference.onDisconnect",this._delegate._path),new zp(new kc(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var rr=class{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:iE,forceLongPolling:oE}}useEmulator(e,n,r={}){Mp(this._delegate,e,n,r)}ref(e){if(S("database.ref",0,1,arguments.length),e instanceof Gt){let n=Dp(this._delegate,e.toString());return new Gt(this,n)}else{let n=wp(this._delegate,e);return new Gt(this,n)}}refFromURL(e){S("database.refFromURL",1,1,arguments.length);let r=Dp(this._delegate,e);return new Gt(this,r)}goOffline(){return S("database.goOffline",0,0,arguments.length),sE(this._delegate)}goOnline(){return S("database.goOnline",0,0,arguments.length),aE(this._delegate)}};rr.ServerValue={TIMESTAMP:lE(),increment:t=>uE(t)};function PP({app:t,url:e,version:n,customAuthImpl:r,customAppCheckImpl:i,namespace:o,nodeAdmin:s=!1}){Yh(n);let a=new fl("database-standalone"),c=new gs("auth-internal",a);c.setComponent(new kt("auth-internal",()=>r,"PRIVATE"));let l;return i&&(l=new gs("app-check-internal",a),l.setComponent(new kt("app-check-internal",()=>i,"PRIVATE"))),{instance:new rr(Sp(t,c,l,e,s),t),namespace:o}}var OP=Object.freeze({__proto__:null,initStandalone:PP});var kP=rr.ServerValue;function FP(t){t.INTERNAL.registerComponent(new kt("database-compat",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new rr(i,r)},"PUBLIC").setServiceProps({Reference:Gt,Query:cl,Database:rr,DataSnapshot:nr,enableLogging:cE,INTERNAL:OP,ServerValue:kP}).setMultipleInstances(!0)),t.registerVersion(MP,AP)}FP(Ae);function us(t,e,n="on",r=Ti){return new F(i=>{let o=null;return o=t[n](e,(s,a)=>{r.schedule(()=>{i.next({snapshot:s,prevKey:a})}),n==="once"&&r.schedule(()=>i.complete())},s=>{r.schedule(()=>i.error(s))}),n==="on"?{unsubscribe(){o!=null&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(T(i=>{let{snapshot:o,prevKey:s}=i,a=null;return o.exists()&&(a=o.key),{type:e,payload:o,prevKey:s,key:a}}),Mi())}function LP(t){return typeof t=="string"}function jP(t){return typeof t.exportVal=="function"}function RE(t){return t==null}function PE(t){return typeof t.set=="function"}function ME(t,e){return PE(e)?e:t.ref(e)}function OE(t,e){if(LP(t))return e.stringCase();if(PE(t))return e.firebaseCase();if(jP(t))return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof t}`)}function kE(t){return(RE(t)||t.length===0)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function FE(t,e,n){e=kE(e);let r=e.map(i=>us(t,i,"on",n));return yr(...r)}function VP(t,e,n){let r=FE(t,e).pipe(wr((i,o)=>[...i,o],[]));return BP(t,r,n)}function UP(t,e){return us(t,"value","on",e).pipe(T(n=>{let r;return n.payload.forEach(i=>(r=i.key,!1)),{data:n,lastKeyToLoad:r}}))}function BP(t,e,n){return UP(t,n).pipe(kl(e),T(([i,o])=>{let s=i.lastKeyToLoad,a=o.map(c=>c.key);return{actions:o,lastKeyToLoad:s,loadedKeys:a}}),Rl(i=>i.loadedKeys.indexOf(i.lastKeyToLoad)===-1),T(i=>i.actions))}function AE(t,e){return function(r,i){return OE(r,{stringCase:()=>t.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function $P(t){return function(n){return n?OE(n,{stringCase:()=>t.child(n).remove(),firebaseCase:()=>n.remove(),snapshotCase:()=>n.ref.remove()}):t.remove()}}function HP(t,e,n){return us(t,"value","once",n).pipe(X(r=>{let i=[I(r)];return e.forEach(o=>i.push(us(t,o,"on",n))),yr(...i).pipe(wr(zP,[]))}),Al())}function LE(t,e){let n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function WP(t,e){if(RE(e))return 0;{let n=LE(t,e);return n===-1?t.length:n+1}}function zP(t,e){let{payload:n,prevKey:r,key:i}=e,o=LE(t,i),s=WP(t,r);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(c=>{let l={payload:c,type:"value",prevKey:a,key:c.key};return a=c.key,t=[...t,l],!1})}return t;case"child_added":if(o>-1)(t[o-1]?.key||null)!==r&&(t=t.filter(c=>c.payload.key!==n.key),t.splice(s,0,e));else{if(r==null)return[e,...t];t=t.slice(),t.splice(s,0,e)}return t;case"child_removed":return t.filter(a=>a.payload.key!==n.key);case"child_changed":return t.map(a=>a.payload.key===i?e:a);case"child_moved":if(o>-1){let a=t.splice(o,1)[0];return t=t.slice(),t.splice(s,0,a),t}return t;default:return t}}function xE(t,e,n){return e=kE(e),HP(t,e,n)}function GP(t,e){let n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:AE(r,"update"),set:AE(r,"set"),push:i=>r.push(i),remove:$P(r),snapshotChanges(i){return xE(t,i,n).pipe(zt)},stateChanges(i){return FE(t,i,n).pipe(zt)},auditTrail(i){return VP(t,i,n).pipe(zt)},valueChanges(i,o){return xE(t,i,n).pipe(T(a=>a.map(c=>o&&o.idField?re(D({},c.payload.val()),{[o.idField]:c.key}):c.payload.val())),zt)}}}function NE(t,e){return function(){return us(t,"value","on",e)}}function qP(t,e){return{query:t,snapshotChanges(){return NE(t,e.schedulers.outsideAngular)().pipe(zt)},update(n){return t.ref.update(n)},set(n){return t.ref.set(n)},remove(){return t.ref.remove()},valueChanges(){return NE(t,e.schedulers.outsideAngular)().pipe(zt,T(r=>r.payload.exists()?r.payload.val():null))}}}var YP=new E("angularfire2.realtimeDatabaseURL"),QP=new E("angularfire2.database.use-emulator"),KP=(()=>{class t{schedulers;database;constructor(n,r,i,o,s,a,c,l,u,d,f,h,p,m,_){this.schedulers=a;let w=c,H=cs(n,s,r);l&&Hp(H,s,u,f,h,p,d,m),this.database=sl(`${H.name}.database.${i}`,"AngularFireDatabase",H.name,()=>{let N=s.runOutsideAngular(()=>H.database(i||void 0));return w&&N.useEmulator(...w),N},[w])}list(n,r){let i=this.schedulers.ngZone.runOutsideAngular(()=>ME(this.database,n)),o=i;return r&&(o=r(i)),GP(o,this)}object(n){let r=this.schedulers.ngZone.runOutsideAngular(()=>ME(this.database,n));return qP(r,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||t)(v(_i),v(wi,8),v(YP,8),v(be),v(z),v(il),v(QP,8),v(Wp,8),v(Lp,8),v(jp,8),v(Vp,8),v(Up,8),v(Bp,8),v($p,8),v(er,8))};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),B2=(()=>{class t{constructor(){Ae.registerVersion("angularfire",tr.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ft({type:t});static \u0275inj=dt({providers:[KP]})}return t})();export{se as a,F as b,ye as c,Ti as d,K as e,I as f,HE as g,T as h,Sl as i,_e as j,Al as k,gC as l,wr as m,Pl as n,X as o,Ol as p,ce as q,C as r,dt as s,E as t,v as u,y as v,Wm as w,ft as x,aI as y,yI as z,Da as A,fU as B,hU as C,ud as D,Ke as E,be as F,pU as G,gU as H,Zi as I,z as J,_U as K,DS as L,Ou as M,PS as N,wU as O,DU as P,EU as Q,CU as R,My as S,Ay as T,xd as U,IU as V,xy as W,bU as X,HS as Y,TU as Z,WS as _,zS as $,SU as aa,MU as ba,qS as ca,Ry as da,Py as ea,AU as fa,xU as ga,NU as ha,iB as ia,zr as ja,un as ka,R0 as la,vB as ma,$B as na,Gn as oa,jM as pa,pn as qa,l$ as ra,u$ as sa,tr as ta,er as ua,il as va,zt as wa,_i as xa,wi as ya,cs as za,F$ as Aa,sl as Ba,Lp as Ca,jp as Da,Vp as Ea,Up as Fa,Bp as Ga,$p as Ha,Hp as Ia,Wp as Ja,w2 as Ka,w$ as La,KP as Ma,B2 as Na};
